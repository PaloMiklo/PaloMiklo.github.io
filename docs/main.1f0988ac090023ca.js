"use strict";(self.webpackChunkpersonal=self.webpackChunkpersonal||[]).push([[179],{3375:(Xt,Be,W)=>{W.d(Be,{z:()=>B});var L=W(8256);let B=(()=>{class Re{}return Re.\u0275fac=function(Te){return new(Te||Re)},Re.\u0275cmp=L.Xpm({type:Re,selectors:[["app-social"]],standalone:!0,features:[L.jDz],decls:1,vars:0,consts:[["type","button","onclick","window.open('https://www.linkedin.com/in/pavol-mikla%C5%A1-2a0b6b174/', '_blank');",1,"btn","btn-circle"]],template:function(Te,Ge){1&Te&&L._UZ(0,"button",0)},styles:[".btn-circle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:#0077b5;color:#fff;border:none;font-size:20px;background-image:url(linkedin.829a204a99320f9c.png);background-position:center;filter:brightness(70%)}.btn-circle[_ngcontent-%COMP%]:hover{filter:brightness(85%)}"],changeDetection:0}),Re})()},2896:(Xt,Be,W)=>{W.d(Be,{N:()=>L});var L=(()=>{return(B=L||(L={}))[B.SUCCESS=0]="SUCCESS",B[B.ERROR=1]="ERROR",B[B.INFO=2]="INFO",L;var B})()},8417:(Xt,Be,W)=>{W.d(Be,{c:()=>pn});var L=W(727);class B extends L.w0{constructor(We,Nt){super()}schedule(We,Nt=0){return this}}const Re={setInterval(St,We,...Nt){const{delegate:Wt}=Re;return Wt?.setInterval?Wt.setInterval(St,We,...Nt):setInterval(St,We,...Nt)},clearInterval(St){const{delegate:We}=Re;return(We?.clearInterval||clearInterval)(St)},delegate:void 0};var Ae=W(8737);const Ge={now:()=>(Ge.delegate||Date).now(),delegate:void 0};class Xe{constructor(We,Nt=Xe.now){this.schedulerActionCtor=We,this.now=Nt}schedule(We,Nt=0,Wt){return new this.schedulerActionCtor(this,We).schedule(Wt,Nt)}}Xe.now=Ge.now;const gt=new class Ne extends Xe{constructor(We,Nt=Xe.now){super(We,Nt),this.actions=[],this._active=!1,this._scheduled=void 0}flush(We){const{actions:Nt}=this;if(this._active)return void Nt.push(We);let Wt;this._active=!0;do{if(Wt=We.execute(We.state,We.delay))break}while(We=Nt.shift());if(this._active=!1,Wt){for(;We=Nt.shift();)We.unsubscribe();throw Wt}}}(class Te extends B{constructor(We,Nt){super(We,Nt),this.scheduler=We,this.work=Nt,this.pending=!1}schedule(We,Nt=0){if(this.closed)return this;this.state=We;const Wt=this.id,ii=this.scheduler;return null!=Wt&&(this.id=this.recycleAsyncId(ii,Wt,Nt)),this.pending=!0,this.delay=Nt,this.id=this.id||this.requestAsyncId(ii,this.id,Nt),this}requestAsyncId(We,Nt,Wt=0){return Re.setInterval(We.flush.bind(We,this),Wt)}recycleAsyncId(We,Nt,Wt=0){if(null!=Wt&&this.delay===Wt&&!1===this.pending)return Nt;Re.clearInterval(Nt)}execute(We,Nt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Wt=this._execute(We,Nt);if(Wt)return Wt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(We,Nt){let ii,Wt=!1;try{this.work(We)}catch(Jn){Wt=!0,ii=Jn||new Error("Scheduled action threw falsy error")}if(Wt)return this.unsubscribe(),ii}unsubscribe(){if(!this.closed){const{id:We,scheduler:Nt}=this,{actions:Wt}=Nt;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ae.P)(Wt,this),null!=We&&(this.id=this.recycleAsyncId(Nt,We,null)),this.delay=null,super.unsubscribe()}}}),it=gt;var Y=W(7272),vt=W(5698),mt=W(4482),at=W(5403),Ze=W(5032),sn=W(9718),xn=W(5577);function Hn(St,We){return We?Nt=>(0,Y.z)(We.pipe((0,vt.q)(1),function Zt(){return(0,mt.e)((St,We)=>{St.subscribe((0,at.x)(We,Ze.Z))})}()),Nt.pipe(Hn(St))):(0,xn.z)((Nt,Wt)=>St(Nt,Wt).pipe((0,vt.q)(1),(0,sn.h)(Nt)))}var Ut=W(9751),Ot=W(3532);function Dn(St,We=gt){const Nt=function Je(St=0,We,Nt=it){let Wt=-1;return null!=We&&((0,Ot.K)(We)?Nt=We:Wt=We),new Ut.y(ii=>{let Jn=function Le(St){return St instanceof Date&&!isNaN(St)}(St)?+St-Nt.now():St;Jn<0&&(Jn=0);let Dr=0;return Nt.schedule(function(){ii.closed||(ii.next(Dr++),0<=Wt?this.schedule(void 0,Wt):ii.complete())},Jn)})}(St,We);return Hn(()=>Nt)}var me,ct=W(7579),Qe=W(9646),Tt=W(8505),_e=new Uint8Array(16);function Fe(){if(!me&&!(me=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return me(_e)}const xe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,_t=function Mt(St){return"string"==typeof St&&xe.test(St)};for(var Jt=[],bn=0;bn<256;++bn)Jt.push((bn+256).toString(16).substr(1));const $i=function ki(St,We,Nt){var Wt=(St=St||{}).random||(St.rng||Fe)();if(Wt[6]=15&Wt[6]|64,Wt[8]=63&Wt[8]|128,We){Nt=Nt||0;for(var ii=0;ii<16;++ii)We[Nt+ii]=Wt[ii];return We}return function Ei(St){var We=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Nt=(Jt[St[We+0]]+Jt[St[We+1]]+Jt[St[We+2]]+Jt[St[We+3]]+"-"+Jt[St[We+4]]+Jt[St[We+5]]+"-"+Jt[St[We+6]]+Jt[St[We+7]]+"-"+Jt[St[We+8]]+Jt[St[We+9]]+"-"+Jt[St[We+10]]+Jt[St[We+11]]+Jt[St[We+12]]+Jt[St[We+13]]+Jt[St[We+14]]+Jt[St[We+15]]).toLowerCase();if(!_t(Nt))throw TypeError("Stringified UUID is invalid");return Nt}(Wt)};var Zn=W(2394),Oi=W(2896),Ji=W(8256);let pn=(()=>{class St{constructor(){this.display=new ct.x,this.display$=this.display.asObservable(),this.success=Nt=>{const Wt=$i();(0,Qe.of)($i()).pipe((0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.SUCCESS,Wt))),Dn(Zn.i),(0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.SUCCESS,Wt))),(0,vt.q)(1)).subscribe()},this.error=Nt=>{const Wt=$i();(0,Qe.of)([]).pipe((0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.ERROR,Wt))),Dn(Zn.i),(0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.ERROR,Wt))),(0,vt.q)(1)).subscribe()},this.info=Nt=>{const Wt=$i();(0,Qe.of)([]).pipe((0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.INFO,Wt))),Dn(Zn.i),(0,Tt.b)(()=>this.display.next(this._contentFactory(Nt,Oi.N.INFO,Wt))),(0,vt.q)(1)).subscribe()},this._contentFactory=(Nt,Wt,ii)=>({mssg:Nt,type:Wt,uuid:ii})}}return St.\u0275fac=function(Nt){return new(Nt||St)},St.\u0275prov=Ji.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})()},2394:(Xt,Be,W)=>{W.d(Be,{U:()=>B,i:()=>Re});var L=W(1017);const B=[{title:"about me",target:L.Q.ABOUT},{title:"contact",target:L.Q.CONTACT}],Re=2e4},7602:(Xt,Be,W)=>{function L(B){const Re=B.prototype.ngOnDestroy;B.prototype.ngOnDestroy=function(){const Ae=this.unsubscribe;Ae.next(),Ae.complete(),Re?.apply(this)}}W.d(Be,{f:()=>L})},1017:(Xt,Be,W)=>{W.d(Be,{Q:()=>L});var L=(()=>{return(B=L||(L={})).ABOUT="about",B.CONTACT="contact",L;var B})()},9387:(Xt,Be,W)=>{W.d(Be,{K:()=>L});const L=class{}},6618:(Xt,Be,W)=>{W.d(Be,{v:()=>B});var L=W(7579);function B(Re){return class extends Re{constructor(){super(...arguments),this.unsubscribe=new L.x,this.unsubscribe$=this.unsubscribe.asObservable()}}}},5768:(Xt,Be,W)=>{W.d(Be,{z:()=>Re});var L=W(1135),B=W(8256);let Re=(()=>{class Ae{constructor(){this.ready=new L.X(!0),this.ready$=this.ready.asObservable(),this._currentLoadings=new Map,this.setLoading=(Ge,Xe)=>{if(!Xe)throw new Error("The request url must be provided to the setLoading method.");!0===Ge?(this._currentLoadings.set(Xe,Ge),this.ready.next(!1)):!1===Ge&&this._currentLoadings.has(Xe)&&this._currentLoadings.delete(Xe),0===this._currentLoadings.size&&this.ready.next(!0)}}}return Ae.\u0275fac=function(Ge){return new(Ge||Ae)},Ae.\u0275prov=B.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})()},546:(Xt,Be,W)=>{W.d(Be,{g:()=>Ae});var L=W(7579),B=W(8256),Re=W(7121);let Ae=(()=>{class Te{constructor(Xe){this._router=Xe,this.activeMenuBtn=void 0,this.changesOnMenuButtons=new L.x,this.changesOnMenuButtons$=this.changesOnMenuButtons.asObservable(),this.resetActiveMenuBtn=()=>{this.activeMenuBtn=void 0,this.changesOnMenuButtons.next()};const Ne=this._router.routerState.snapshot.url,gt=Ne.substring(Ne.indexOf("(")+1,Ne.indexOf("-"));this.activeMenuBtn=gt??void 0,this.changesOnMenuButtons.next()}}return Te.\u0275fac=function(Xe){return new(Xe||Te)(B.LFG(Re.F0))},Te.\u0275prov=B.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},4466:(Xt,Be,W)=>{W.d(Be,{m:()=>Ae});var L=W(6895),B=W(3375),Re=W(8256);let Ae=(()=>{class Te{}return Te.\u0275fac=function(Xe){return new(Xe||Te)},Te.\u0275mod=Re.oAB({type:Te}),Te.\u0275inj=Re.cJS({imports:[L.ez,B.z]}),Te})()},6376:(Xt,Be,W)=>{var L=W(1481),B=W(8256),Re=W(529);class Ae{}const Ge="*";function Ne(c,e=null){return{type:4,styles:e,timings:c}}function it(c,e=null){return{type:2,steps:c,options:e}}function Y(c){return{type:6,styles:c,offset:null}}function mt(c){return{type:5,steps:c}}function at(c,e,t=null){return{type:1,expr:c,animation:e,options:t}}function Ze(c,e=null){return{type:8,animation:c,options:e}}function sn(c,e=null){return{type:10,animation:c,options:e}}function Ut(c){Promise.resolve(null).then(c)}class Ot{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ut(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Le{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,s=0;const a=this.players.length;0==a?Ut(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++n==a&&this._onDestroy()}),l.onStart(()=>{++s==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const s=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(s)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function ct(c){return new B.vHH(3e3,!1)}function oe(){return typeof window<"u"&&typeof window.document<"u"}function ie(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function De(c){switch(c.length){case 0:return new Ot;case 1:return c[0];default:return new Le(c)}}function ht(c,e,t,n,s=new Map,a=new Map){const l=[],d=[];let f=-1,p=null;if(n.forEach(g=>{const y=g.get("offset"),x=y==f,M=x&&p||new Map;g.forEach((T,E)=>{let D=E,N=T;if("offset"!==E)switch(D=e.normalizePropertyName(D,l),N){case"!":N=s.get(E);break;case Ge:N=a.get(E);break;default:N=e.normalizeStyleValue(E,D,N,l)}M.set(D,N)}),x||d.push(M),p=M,f=y}),l.length)throw function Jn(c){return new B.vHH(3502,!1)}();return d}function ln(c,e,t,n){switch(e){case"start":c.onStart(()=>n(t&&dn(t,"start",c)));break;case"done":c.onDone(()=>n(t&&dn(t,"done",c)));break;case"destroy":c.onDestroy(()=>n(t&&dn(t,"destroy",c)))}}function dn(c,e,t){const a=gn(c.element,c.triggerName,c.fromState,c.toState,e||c.phaseName,t.totalTime??c.totalTime,!!t.disabled),l=c._data;return null!=l&&(a._data=l),a}function gn(c,e,t,n,s="",a=0,l){return{element:c,triggerName:e,fromState:t,toState:n,phaseName:s,totalTime:a,disabled:!!l}}function en(c,e,t){let n=c.get(e);return n||c.set(e,n=t),n}function Ni(c){const e=c.indexOf(":");return[c.substring(1,e),c.slice(e+1)]}let Tn=(c,e)=>!1,Vn=(c,e,t)=>[],Cn=null;function Qn(c){const e=c.parentNode||c.host;return e===Cn?null:e}(ie()||typeof Element<"u")&&(oe()?(Cn=(()=>document.documentElement)(),Tn=(c,e)=>{for(;e;){if(e===c)return!0;e=Qn(e)}return!1}):Tn=(c,e)=>c.contains(e),Vn=(c,e,t)=>{if(t)return Array.from(c.querySelectorAll(e));const n=c.querySelector(e);return n?[n]:[]});let Ri=null,Fi=!1;const Tr=Tn,ol=Vn;let Xs=(()=>{class c{validateStyleProperty(t){return function ar(c){Ri||(Ri=function Qi(){return typeof document<"u"?document.body:null}()||{},Fi=!!Ri.style&&"WebkitAppearance"in Ri.style);let e=!0;return Ri.style&&!function Rt(c){return"ebkit"==c.substring(1,6)}(c)&&(e=c in Ri.style,!e&&Fi&&(e="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in Ri.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return Tr(t,n)}getParentElement(t){return Qn(t)}query(t,n,s){return ol(t,n,s)}computeStyle(t,n,s){return s||""}animate(t,n,s,a,l,d=[],f){return new Ot(s,a)}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=B.Yz7({token:c,factory:c.\u0275fac}),c})(),po=(()=>{class c{}return c.NOOP=new Xs,c})();const Ms="ng-enter",is="ng-leave",Yr="ng-trigger",fe=".ng-trigger",le="ng-animating",ne=".ng-animating";function ye(c){if("number"==typeof c)return c;const e=c.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$e(parseFloat(e[1]),e[2])}function $e(c,e){return"s"===e?1e3*c:c}function ze(c,e,t){return c.hasOwnProperty("duration")?c:function Pt(c,e,t){let s,a=0,l="";if("string"==typeof c){const d=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(ct()),{duration:0,delay:0,easing:""};s=$e(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(a=$e(parseFloat(f),d[4]));const p=d[5];p&&(l=p)}else s=c;if(!t){let d=!1,f=e.length;s<0&&(e.push(function Qe(){return new B.vHH(3100,!1)}()),d=!0),a<0&&(e.push(function Tt(){return new B.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,ct())}return{duration:s,delay:a,easing:l}}(c,e,t)}function Sn(c,e={}){return Object.keys(c).forEach(t=>{e[t]=c[t]}),e}function ci(c){const e=new Map;return Object.keys(c).forEach(t=>{e.set(t,c[t])}),e}function gr(c,e=new Map,t){if(t)for(let[n,s]of t)e.set(n,s);for(let[n,s]of c)e.set(n,s);return e}function ei(c,e,t){return t?e+":"+t+";":""}function Ss(c){let e="";for(let t=0;t<c.style.length;t++){const n=c.style.item(t);e+=ei(0,n,c.style.getPropertyValue(n))}for(const t in c.style)c.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ei(0,Ur(t),c.style[t]));c.setAttribute("style",e)}function er(c,e,t){c.style&&(e.forEach((n,s)=>{const a=lr(s);t&&!t.has(s)&&t.set(s,c.style[a]),c.style[a]=n}),ie()&&Ss(c))}function hn(c,e){c.style&&(e.forEach((t,n)=>{const s=lr(n);c.style[s]=""}),ie()&&Ss(c))}function rs(c){return Array.isArray(c)?1==c.length?c[0]:it(c):c}const Es=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ar(c){let e=[];if("string"==typeof c){let t;for(;t=Es.exec(c);)e.push(t[1]);Es.lastIndex=0}return e}function mi(c,e,t){const n=c.toString(),s=n.replace(Es,(a,l)=>{let d=e[l];return null==d&&(t.push(function _e(c){return new B.vHH(3003,!1)}()),d=""),d.toString()});return s==n?c:s}function ss(c){const e=[];let t=c.next();for(;!t.done;)e.push(t.value),t=c.next();return e}const Ds=/-+([a-z0-9])/g;function lr(c){return c.replace(Ds,(...e)=>e[1].toUpperCase())}function Ur(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yr(c,e,t){switch(e.type){case 7:return c.visitTrigger(e,t);case 0:return c.visitState(e,t);case 1:return c.visitTransition(e,t);case 2:return c.visitSequence(e,t);case 3:return c.visitGroup(e,t);case 4:return c.visitAnimate(e,t);case 5:return c.visitKeyframes(e,t);case 6:return c.visitStyle(e,t);case 8:return c.visitReference(e,t);case 9:return c.visitAnimateChild(e,t);case 10:return c.visitAnimateRef(e,t);case 11:return c.visitQuery(e,t);case 12:return c.visitStagger(e,t);default:throw function Fe(c){return new B.vHH(3004,!1)}()}}function ll(c,e){return window.getComputedStyle(c)[e]}function wr(c,e){const t=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(n=>function as(c,e,t){if(":"==c[0]){const f=function Js(c,e){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function We(c){return new B.vHH(3016,!1)}()),"* => *"}}(c,t);if("function"==typeof f)return void e.push(f);c=f}const n=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function St(c){return new B.vHH(3015,!1)}()),e;const s=n[1],a=n[2],l=n[3];e.push(Tc(s,l));"<"==a[0]&&!("*"==s&&"*"==l)&&e.push(Tc(l,s))}(n,t,e)):t.push(c),t}const Qs=new Set(["true","1"]),_i=new Set(["false","0"]);function Tc(c,e){const t=Qs.has(c)||_i.has(c),n=Qs.has(e)||_i.has(e);return(s,a)=>{let l="*"==c||c==s,d="*"==e||e==a;return!l&&t&&"boolean"==typeof s&&(l=s?Qs.has(c):_i.has(c)),!d&&n&&"boolean"==typeof a&&(d=a?Qs.has(e):_i.has(e)),l&&d}}const id=new RegExp("s*:selfs*,?","g");function cl(c,e,t,n){return new Uh(c).build(e,t,n)}class Uh{constructor(e){this._driver=e}build(e,t,n){const s=new Vh(t);return this._resetContextStyleTimingState(s),yr(this,rs(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,s=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function Mt(){return new B.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,p=f.name;p.toString().split(/\s*,\s*/).forEach(g=>{f.name=g,a.push(this.visitState(f,t))}),f.name=p}else if(1==d.type){const f=this.visitTransition(d,t);n+=f.queryCount,s+=f.depCount,l.push(f)}else t.errors.push(function _t(){return new B.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:n,depCount:s,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(n.containsDynamicStyles){const a=new Set,l=s||{};n.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{Ar(f).forEach(p=>{l.hasOwnProperty(p)||a.add(p)})})}),a.size&&(ss(a.values()),t.errors.push(function Jt(c,e){return new B.vHH(3008,!1)}()))}return{type:0,name:e.name,style:n,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=yr(this,rs(e.animation),t);return{type:1,matchers:wr(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:yo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>yr(this,n,t)),options:yo(e.options)}}visitGroup(e,t){const n=t.currentTime;let s=0;const a=e.steps.map(l=>{t.currentTime=n;const d=yr(this,l,t);return s=Math.max(s,t.currentTime),d});return t.currentTime=s,{type:3,steps:a,options:yo(e.options)}}visitAnimate(e,t){const n=function sd(c,e){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return ul(ze(c,e).duration,0,"");const t=c;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=ul(0,0,"");return a.dynamic=!0,a.strValue=t,a}const s=ze(t,e);return ul(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let s,a=e.styles?e.styles:Y({});if(5==a.type)s=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const p={};n.easing&&(p.easing=n.easing),l=Y(p)}t.currentTime+=n.duration+n.delay;const f=this.visitStyle(l,t);f.isEmptyStep=d,s=f}return t.currentAnimateTimings=null,{type:4,timings:n,style:s,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of s)"string"==typeof d?d===Ge?n.push(d):t.errors.push(new B.vHH(3002,!1)):n.push(ci(d));let a=!1,l=null;return n.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!a))for(let f of d.values())if(f.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:n,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let s=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,f)=>{const p=t.collectedStyles.get(t.currentQuerySelector),g=p.get(f);let y=!0;g&&(a!=s&&a>=g.startTime&&s<=g.endTime&&(t.errors.push(function Mn(c,e,t,n,s){return new B.vHH(3010,!1)}()),y=!1),a=g.startTime),y&&p.set(f,{startTime:a,endTime:s}),t.options&&function go(c,e,t){const n=e.params||{},s=Ar(c);s.length&&s.forEach(a=>{n.hasOwnProperty(a)||t.push(function me(c){return new B.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ki(){return new B.vHH(3011,!1)}()),n;let a=0;const l=[];let d=!1,f=!1,p=0;const g=e.steps.map(N=>{const F=this._makeStyleAst(N,t);let z=null!=F.offset?F.offset:function Gh(c){if("string"==typeof c)return null;let e=null;if(Array.isArray(c))c.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const t=c;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(F.styles),k=0;return null!=z&&(a++,k=F.offset=z),f=f||k<0||k>1,d=d||k<p,p=k,l.push(k),F});f&&t.errors.push(function $i(){return new B.vHH(3012,!1)}()),d&&t.errors.push(function Zn(){return new B.vHH(3200,!1)}());const y=e.steps.length;let x=0;a>0&&a<y?t.errors.push(function Oi(){return new B.vHH(3202,!1)}()):0==a&&(x=1/(y-1));const M=y-1,T=t.currentTime,E=t.currentAnimateTimings,D=E.duration;return g.forEach((N,F)=>{const z=x>0?F==M?1:x*F:l[F],k=z*D;t.currentTime=T+E.delay+k,E.duration=k,this._validateStyleAst(N,t),N.offset=z,n.styles.push(N)}),n}visitReference(e,t){return{type:8,animation:yr(this,rs(e.animation),t),options:yo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yo(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function zh(c){const e=!!c.split(/\s*,\s*/).find(t=>":self"==t);return e&&(c=c.replace(id,"")),c=c.replace(/@\*/g,fe).replace(/@\w+/g,t=>fe+"-"+t.slice(1)).replace(/:animating/g,ne),[c,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,en(t.collectedStyles,t.currentQuerySelector,new Map);const d=yr(this,rs(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:a,limit:s.limit||0,optional:!!s.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:yo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Ji(){return new B.vHH(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:ze(e.timings,t.errors,!0);return{type:12,animation:yr(this,rs(e.animation),t),timings:n,options:null}}}class Vh{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function yo(c){return c?(c=Sn(c)).params&&(c.params=function Hh(c){return c?Sn(c):null}(c.params)):c={},c}function ul(c,e,t){return{duration:c,delay:e,easing:t}}function Aa(c,e,t,n,s,a,l=null,d=!1){return{type:1,element:c,keyframes:e,preStyleProps:t,postStyleProps:n,duration:s,delay:a,totalTime:s+a,easing:l,subTimeline:d}}class $o{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Cc=new RegExp(":enter","g"),hl=new RegExp(":leave","g");function As(c,e,t,n,s,a=new Map,l=new Map,d,f,p=[]){return(new fl).buildKeyframes(c,e,t,n,s,a,l,d,f,p)}class fl{buildKeyframes(e,t,n,s,a,l,d,f,p,g=[]){p=p||new $o;const y=new Ir(e,t,p,s,a,g,[]);y.options=f;const x=f.delay?ye(f.delay):0;y.currentTimeline.delayNextStep(x),y.currentTimeline.setStyles([l],null,y.errors,f),yr(this,n,y);const M=y.timelines.filter(T=>T.containsAnimation());if(M.length&&d.size){let T;for(let E=M.length-1;E>=0;E--){const D=M[E];if(D.element===t){T=D;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([d],null,y.errors,f)}return M.length?M.map(T=>T.buildKeyframes()):[Aa(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const s=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(n,s,s.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let a=t.currentTimeline.currentTime;const l=null!=n.duration?ye(n.duration):null,d=null!=n.delay?ye(n.delay):null;return 0!==l&&e.forEach(f=>{const p=t.appendInstructionToTimeline(f,l,d);a=Math.max(a,p.duration+p.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),yr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let s=t;const a=e.options;if(a&&(a.params||a.delay)&&(s=t.createSubContext(a),s.transformIntoNewTimeline(),null!=a.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=qo);const l=ye(a.delay);s.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>yr(this,l,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>n&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let s=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?ye(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),yr(this,l,d),s=Math.max(s,d.currentTimeline.currentTime),n.push(d.currentTimeline)}),n.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return ze(t.params?mi(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),s.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,s=t.currentAnimateTimings;!s&&n.hasCurrentStyleProperties()&&n.forwardFrame();const a=s&&s.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,s=t.currentTimeline.duration,a=n.duration,d=t.createSubContext().currentTimeline;d.easing=n.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*a),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(s+a),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,s=e.options||{},a=s.delay?ye(s.delay):0;a&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qo);let l=n;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((p,g)=>{t.currentQueryIndex=g;const y=t.createSubContext(e.options,p);a&&y.delayNextStep(a),p===t.element&&(f=y.currentTimeline),yr(this,e.animation,y),y.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,y.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,s=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let f=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":f=d-f;break;case"full":f=n.currentStaggerTime}const g=t.currentTimeline;f&&g.delayNextStep(f);const y=g.currentTime;yr(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=s.currentTime-y+(s.startTime-n.currentTimeline.startTime)}}const qo={};class Ir{constructor(e,t,n,s,a,l,d,f){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Ia(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let s=this.options;null!=n.duration&&(s.duration=ye(n.duration)),null!=n.delay&&(s.delay=ye(n.delay));const a=n.params;if(a){let l=s.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=mi(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(s=>{n[s]=t[s]})}}return e}createSubContext(e=null,t,n){const s=t||this.element,a=new Ir(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=qo,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},a=new Xo(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(a),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,s,a,l){let d=[];if(s&&d.push(this.element),e.length>0){e=(e=e.replace(Cc,"."+this._enterClassName)).replace(hl,"."+this._leaveClassName);let p=this._driver.query(this.element,e,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),d.push(...p)}return!a&&0==d.length&&l.push(function pn(c){return new B.vHH(3014,!1)}()),d}}class Ia{constructor(e,t,n,s){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ia(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Ge),this._currentKeyframe.set(t,Ge);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,s){t&&this._previousKeyframe.set("easing",t);const a=s&&s.params||{},l=function pl(c,e){const t=new Map;let n;return c.forEach(s=>{if("*"===s){n=n||e.keys();for(let a of n)t.set(a,Ge)}else gr(s,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of l){const p=mi(f,a,n);this._pendingStyles.set(d,p),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Ge),this._updateStyle(d,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const s=this._styleSummary.get(n);(!s||t.time>s.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((d,f)=>{const p=gr(d,new Map,this._backFill);p.forEach((g,y)=>{"!"===g?e.add(y):g===Ge&&t.add(y)}),n||p.set("offset",f/this.duration),s.push(p)});const a=e.size?ss(e.values()):[],l=t.size?ss(t.values()):[];if(n){const d=s[0],f=new Map(d);d.set("offset",0),f.set("offset",1),s=[d,f]}return Aa(this.element,s,a,l,this.duration,this.startTime,this.easing,!1)}}class Xo extends Ia{constructor(e,t,n,s,a,l,d=!1){super(e,t,l.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=n+t,d=t/l,f=gr(e[0]);f.set("offset",0),a.push(f);const p=gr(e[0]);p.set("offset",Ko(d)),a.push(p);const g=e.length-1;for(let y=1;y<=g;y++){let x=gr(e[y]);const M=x.get("offset");x.set("offset",Ko((t+M*n)/l)),a.push(x)}n=l,t=0,s="",e=a}return Aa(this.element,e,this.preStyleProps,this.postStyleProps,n,t,s,!0)}}function Ko(c,e=3){const t=Math.pow(10,e-1);return Math.round(c*t)/t}class Ra{}const Wh=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ic extends Ra{normalizePropertyName(e,t){return lr(e)}normalizeStyleValue(e,t,n,s){let a="";const l=n.toString().trim();if(Wh.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)a="px";else{const d=n.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&s.push(function xe(c,e){return new B.vHH(3005,!1)}())}return l+a}}function ml(c,e,t,n,s,a,l,d,f,p,g,y,x){return{type:0,element:c,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:a,toState:n,toStyles:l,timelines:d,queriedElements:f,preStyleProps:p,postStyleProps:g,totalTime:y,errors:x}}const vr={};class Zo{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,s){return function Jo(c,e,t,n,s){return c.some(a=>a(e,t,n,s))}(this.ast.matchers,e,t,n,s)}buildStyles(e,t,n){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,n):new Map}build(e,t,n,s,a,l,d,f,p,g){const y=[],x=this.ast.options&&this.ast.options.params||vr,T=this.buildStyles(n,d&&d.params||vr,y),E=f&&f.params||vr,D=this.buildStyles(s,E,y),N=new Set,F=new Map,z=new Map,k="void"===s,$={params:ad(E,x),delay:this.ast.options?.delay},q=g?[]:As(e,t,this.ast.animation,a,l,T,D,$,p,y);let ae=0;if(q.forEach(Q=>{ae=Math.max(Q.duration+Q.delay,ae)}),y.length)return ml(t,this._triggerName,n,s,k,T,D,[],[],F,z,ae,y);q.forEach(Q=>{const he=Q.element,ge=en(F,he,new Set);Q.preStyleProps.forEach(st=>ge.add(st));const Ye=en(z,he,new Set);Q.postStyleProps.forEach(st=>Ye.add(st)),he!==t&&N.add(he)});const U=ss(N.values());return ml(t,this._triggerName,n,s,k,T,D,q,U,F,z,ae)}}function ad(c,e){const t=Sn(e);for(const n in c)c.hasOwnProperty(n)&&null!=c[n]&&(t[n]=c[n]);return t}class gl{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,s=Sn(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!==l&&(s[a]=l)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,d)=>{l&&(l=mi(l,s,t));const f=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,f,l,t),n.set(f,l)})}),n}}class R{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new gl(s.style,s.options&&s.options.params||{},n))}),P(this.states,"true","1"),P(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Zo(e,s,this.states))}),this.fallbackTransition=function G(c,e,t){return new Zo(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,s){return this.transitionFactories.find(l=>l.match(e,t,n,s))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function P(c,e,t){c.has(e)?c.has(t)||c.set(t,c.get(e)):c.has(t)&&c.set(e,c.get(t))}const j=new $o;class ue{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],a=cl(this._driver,t,n,[]);if(n.length)throw function Dr(c){return new B.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,n){const s=e.element,a=ht(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(s,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const s=[],a=this._animations.get(e);let l;const d=new Map;if(a?(l=As(this._driver,t,a,Ms,is,new Map,new Map,n,j,s),l.forEach(g=>{const y=en(d,g.element,new Map);g.postStyleProps.forEach(x=>y.set(x,null))})):(s.push(function ns(){return new B.vHH(3300,!1)}()),l=[]),s.length)throw function mn(c){return new B.vHH(3504,!1)}();d.forEach((g,y)=>{g.forEach((x,M)=>{g.set(M,this._driver.computeStyle(y,M,Ge))})});const p=De(l.map(g=>{const y=d.get(g.element);return this._buildPlayer(g,new Map,y)}));return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function js(c){return new B.vHH(3301,!1)}();return t}listen(e,t,n,s){const a=gn(t,"","","");return ln(this._getPlayer(e),n,a,s),()=>{}}command(e,t,n,s){if("register"==n)return void this.register(e,s[0]);if("create"==n)return void this.create(e,t,s[0]||{});const a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const ke="ng-animate-queued",Vt="ng-animate-disabled",Rn=[],Hi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},si={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Et="__ng_removed";class ls{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function Gp(c){return c??null}(n?e.value:e),n){const a=Sn(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(s=>{null==n[s]&&(n[s]=t[s])})}}}const Hr="void",vo=new ls(Hr);class _o{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,cr(t,this._hostClassName)}listen(e,t,n,s){if(!this._triggers.has(t))throw function Di(c,e){return new B.vHH(3302,!1)}();if(null==n||0==n.length)throw function $s(c){return new B.vHH(3303,!1)}();if(!function Un(c){return"start"==c||"done"==c}(n))throw function ho(c,e){return new B.vHH(3400,!1)}();const a=en(this._elementListeners,e,[]),l={name:t,phase:n,callback:s};a.push(l);const d=en(this._engine.statesByElement,e,new Map);return d.has(t)||(cr(e,Yr),cr(e,Yr+"-"+t),d.set(t,vo)),()=>{this._engine.afterFlush(()=>{const f=a.indexOf(l);f>=0&&a.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Yi(c){return new B.vHH(3401,!1)}();return t}trigger(e,t,n,s=!0){const a=this._getTrigger(t),l=new cs(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(cr(e,Yr),cr(e,Yr+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const p=new ls(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&f&&p.absorbOptions(f.options),d.set(t,p),f||(f=vo),p.value!==Hr&&f.value===p.value){if(!function zy(c,e){const t=Object.keys(c),n=Object.keys(e);if(t.length!=n.length)return!1;for(let s=0;s<t.length;s++){const a=t[s];if(!e.hasOwnProperty(a)||c[a]!==e[a])return!1}return!0}(f.params,p.params)){const E=[],D=a.matchStyles(f.value,f.params,E),N=a.matchStyles(p.value,p.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{hn(e,D),er(e,N)})}return}const x=en(this._engine.playersByElement,e,[]);x.forEach(E=>{E.namespaceId==this.id&&E.triggerName==t&&E.queued&&E.destroy()});let M=a.matchTransition(f.value,p.value,e,p.params),T=!1;if(!M){if(!s)return;M=a.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:f,toState:p,player:l,isFallbackTransition:T}),T||(cr(e,ke),l.onStart(()=>{Is(e,ke)})),l.onDone(()=>{let E=this.players.indexOf(l);E>=0&&this.players.splice(E,1);const D=this._engine.playersByElement.get(e);if(D){let N=D.indexOf(l);N>=0&&D.splice(N,1)}}),this.players.push(l),x.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,fe,!0);n.forEach(s=>{if(s[Et])return;const a=this._engine.fetchNamespacesByElement(s);a.size?a.forEach(l=>l.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,n,s){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(a.forEach((f,p)=>{if(l.set(p,f.value),this._triggers.has(p)){const g=this.trigger(e,p,Hr,s);g&&d.push(g)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),n&&De(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const s=new Set;t.forEach(a=>{const l=a.name;if(s.has(l))return;s.add(l);const f=this._triggers.get(l).fallbackTransition,p=n.get(l)||vo,g=new ls(Hr),y=new cs(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:p,toState:g,player:y,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(n.totalAnimations){const a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)s=!0;else{let l=e;for(;l=l.parentNode;)if(n.statesByElement.get(l)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)n.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Et];(!a||a===Hi)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){cr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const s=n.player;if(s.destroyed)return;const a=n.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==n.triggerName){const f=gn(a,n.triggerName,n.fromState.value,n.toState.value);f._data=e,ln(n.player,d.phase,f,d.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(n)}),this._queue=[],t.sort((n,s)=>{const a=n.transition.ast.depCount,l=s.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(n.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class yl{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new _o(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,s=this.namespacesByHostElement;if(n.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){const f=s.get(d);if(f){const p=n.indexOf(f);n.splice(p+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||n.unshift(e)}else n.push(e);return s.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let s=this._namespaceLookup[e];s&&s.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(n);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let s of n.values())if(s.namespaceId){const a=this._fetchNamespace(s.namespaceId);a&&t.add(a)}return t}trigger(e,t,n,s){if(et(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,n,s),!0}return!1}insertNode(e,t,n,s){if(!et(t))return;const a=t[Et];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,n)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),cr(e,Vt)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Is(e,Vt))}removeNode(e,t,n,s){if(et(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),n){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,n,s,a){this.collectedLeaveElements.push(t),t[Et]={namespaceId:e,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,n,s,a){return et(t)?this._fetchNamespace(e).listen(t,n,s,a):()=>{}}_buildInstruction(e,t,n,s,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,s,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,fe,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ne,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return De(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Et];if(t&&t.setForRemoval){if(e[Et]=Hi,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Vt)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,s)=>this._balanceNamespaceList(n,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)cr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let s=0;s<n.length;s++)n[s]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?De(t).onDone(()=>{n.forEach(s=>s())}):n.forEach(s=>s())}}reportError(e){throw function Ys(c){return new B.vHH(3402,!1)}()}_flushAnimations(e,t){const n=new $o,s=[],a=new Map,l=[],d=new Map,f=new Map,p=new Map,g=new Set;this.disabledNodes.forEach(de=>{g.add(de);const Se=this.driver.query(de,".ng-animate-queued",!0);for(let Ee=0;Ee<Se.length;Ee++)g.add(Se[Ee])});const y=this.bodyNode,x=Array.from(this.statesByElement.keys()),M=Ti(x,this.collectedEnterElements),T=new Map;let E=0;M.forEach((de,Se)=>{const Ee=Ms+E++;T.set(Se,Ee),de.forEach(we=>cr(we,Ee))});const D=[],N=new Set,F=new Set;for(let de=0;de<this.collectedLeaveElements.length;de++){const Se=this.collectedLeaveElements[de],Ee=Se[Et];Ee&&Ee.setForRemoval&&(D.push(Se),N.add(Se),Ee.hasAnimation?this.driver.query(Se,".ng-star-inserted",!0).forEach(we=>N.add(we)):F.add(Se))}const z=new Map,k=Ti(x,Array.from(N));k.forEach((de,Se)=>{const Ee=is+E++;z.set(Se,Ee),de.forEach(we=>cr(we,Ee))}),e.push(()=>{M.forEach((de,Se)=>{const Ee=T.get(Se);de.forEach(we=>Is(we,Ee))}),k.forEach((de,Se)=>{const Ee=z.get(Se);de.forEach(we=>Is(we,Ee))}),D.forEach(de=>{this.processLeaveNode(de)})});const $=[],q=[];for(let de=this._namespaceList.length-1;de>=0;de--)this._namespaceList[de].drainQueuedTransitions(t).forEach(Ee=>{const we=Ee.player,Pe=Ee.element;if($.push(we),this.collectedEnterElements.length){const un=Pe[Et];if(un&&un.setForMove){if(un.previousTriggersValues&&un.previousTriggersValues.has(Ee.triggerName)){const an=un.previousTriggersValues.get(Ee.triggerName),rn=this.statesByElement.get(Ee.element);if(rn&&rn.has(Ee.triggerName)){const Bt=rn.get(Ee.triggerName);Bt.value=an,rn.set(Ee.triggerName,Bt)}}return void we.destroy()}}const yt=!y||!this.driver.containsElement(y,Pe),ot=z.get(Pe),wt=T.get(Pe),Dt=this._buildInstruction(Ee,n,wt,ot,yt);if(Dt.errors&&Dt.errors.length)return void q.push(Dt);if(yt)return we.onStart(()=>hn(Pe,Dt.fromStyles)),we.onDestroy(()=>er(Pe,Dt.toStyles)),void s.push(we);if(Ee.isFallbackTransition)return we.onStart(()=>hn(Pe,Dt.fromStyles)),we.onDestroy(()=>er(Pe,Dt.toStyles)),void s.push(we);const yn=[];Dt.timelines.forEach(un=>{un.stretchStartingKeyframe=!0,this.disabledNodes.has(un.element)||yn.push(un)}),Dt.timelines=yn,n.append(Pe,Dt.timelines),l.push({instruction:Dt,player:we,element:Pe}),Dt.queriedElements.forEach(un=>en(d,un,[]).push(we)),Dt.preStyleProps.forEach((un,an)=>{if(un.size){let rn=f.get(an);rn||f.set(an,rn=new Set),un.forEach((Bt,kn)=>rn.add(kn))}}),Dt.postStyleProps.forEach((un,an)=>{let rn=p.get(an);rn||p.set(an,rn=new Set),un.forEach((Bt,kn)=>rn.add(kn))})});if(q.length){const de=[];q.forEach(Se=>{de.push(function ws(c,e){return new B.vHH(3505,!1)}())}),$.forEach(Se=>Se.destroy()),this.reportError(de)}const ae=new Map,U=new Map;l.forEach(de=>{const Se=de.element;n.has(Se)&&(U.set(Se,Se),this._beforeAnimationBuild(de.player.namespaceId,de.instruction,ae))}),s.forEach(de=>{const Se=de.element;this._getPreviousPlayers(Se,!1,de.namespaceId,de.triggerName,null).forEach(we=>{en(ae,Se,[]).push(we),we.destroy()})});const Q=D.filter(de=>jh(de,f,p)),he=new Map;cd(he,this.driver,F,p,Ge).forEach(de=>{jh(de,f,p)&&Q.push(de)});const Ye=new Map;M.forEach((de,Se)=>{cd(Ye,this.driver,new Set(de),f,"!")}),Q.forEach(de=>{const Se=he.get(de),Ee=Ye.get(de);he.set(de,new Map([...Array.from(Se?.entries()??[]),...Array.from(Ee?.entries()??[])]))});const st=[],be=[],He={};l.forEach(de=>{const{element:Se,player:Ee,instruction:we}=de;if(n.has(Se)){if(g.has(Se))return Ee.onDestroy(()=>er(Se,we.toStyles)),Ee.disabled=!0,Ee.overrideTotalTime(we.totalTime),void s.push(Ee);let Pe=He;if(U.size>1){let ot=Se;const wt=[];for(;ot=ot.parentNode;){const Dt=U.get(ot);if(Dt){Pe=Dt;break}wt.push(ot)}wt.forEach(Dt=>U.set(Dt,Pe))}const yt=this._buildAnimation(Ee.namespaceId,we,ae,a,Ye,he);if(Ee.setRealPlayer(yt),Pe===He)st.push(Ee);else{const ot=this.playersByElement.get(Pe);ot&&ot.length&&(Ee.parentPlayer=De(ot)),s.push(Ee)}}else hn(Se,we.fromStyles),Ee.onDestroy(()=>er(Se,we.toStyles)),be.push(Ee),g.has(Se)&&s.push(Ee)}),be.forEach(de=>{const Se=a.get(de.element);if(Se&&Se.length){const Ee=De(Se);de.setRealPlayer(Ee)}}),s.forEach(de=>{de.parentPlayer?de.syncPlayerEvents(de.parentPlayer):de.destroy()});for(let de=0;de<D.length;de++){const Se=D[de],Ee=Se[Et];if(Is(Se,is),Ee&&Ee.hasAnimation)continue;let we=[];if(d.size){let yt=d.get(Se);yt&&yt.length&&we.push(...yt);let ot=this.driver.query(Se,ne,!0);for(let wt=0;wt<ot.length;wt++){let Dt=d.get(ot[wt]);Dt&&Dt.length&&we.push(...Dt)}}const Pe=we.filter(yt=>!yt.destroyed);Pe.length?Rs(this,Se,Pe):this.processLeaveNode(Se)}return D.length=0,st.forEach(de=>{this.players.push(de),de.onDone(()=>{de.destroy();const Se=this.players.indexOf(de);this.players.splice(Se,1)}),de.play()}),st}elementContainsData(e,t){let n=!1;const s=t[Et];return s&&s.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,s,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const f=!a||a==Hr;d.forEach(p=>{p.queued||!f&&p.triggerName!=s||l.push(p)})}}return(n||s)&&(l=l.filter(d=>!(n&&n!=d.namespaceId||s&&s!=d.triggerName))),l}_beforeAnimationBuild(e,t,n){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const p=f.element,g=p!==a,y=en(n,p,[]);this._getPreviousPlayers(p,g,l,d,t.toState).forEach(M=>{const T=M.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),M.destroy(),y.push(M)})}hn(a,t.fromStyles)}_buildAnimation(e,t,n,s,a,l){const d=t.triggerName,f=t.element,p=[],g=new Set,y=new Set,x=t.timelines.map(T=>{const E=T.element;g.add(E);const D=E[Et];if(D&&D.removedBeforeQueried)return new Ot(T.duration,T.delay);const N=E!==f,F=function ud(c){const e=[];return Pc(c,e),e}((n.get(E)||Rn).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===E),z=a.get(E),k=l.get(E),$=ht(0,this._normalizer,0,T.keyframes,z,k),q=this._buildPlayer(T,$,F);if(T.subTimeline&&s&&y.add(E),N){const ae=new cs(e,d,E);ae.setRealPlayer(q),p.push(ae)}return q});p.forEach(T=>{en(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>function Rc(c,e,t){let n=c.get(e);if(n){if(n.length){const s=n.indexOf(t);n.splice(s,1)}0==n.length&&c.delete(e)}return n}(this.playersByQueriedElement,T.element,T))}),g.forEach(T=>cr(T,le));const M=De(x);return M.onDestroy(()=>{g.forEach(T=>Is(T,le)),er(f,t.toStyles)}),y.forEach(T=>{en(s,T,[]).push(M)}),M}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Ot(e.duration,e.delay)}}class cs{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Ot,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(s=>ln(e,n,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){en(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function et(c){return c&&1===c.nodeType}function ld(c,e){const t=c.style.display;return c.style.display=e??"none",t}function cd(c,e,t,n,s){const a=[];t.forEach(f=>a.push(ld(f)));const l=[];n.forEach((f,p)=>{const g=new Map;f.forEach(y=>{const x=e.computeStyle(p,y,s);g.set(y,x),(!x||0==x.length)&&(p[Et]=si,l.push(p))}),c.set(p,g)});let d=0;return t.forEach(f=>ld(f,a[d++])),l}function Ti(c,e){const t=new Map;if(c.forEach(d=>t.set(d,[])),0==e.length)return t;const s=new Set(e),a=new Map;function l(d){if(!d)return 1;let f=a.get(d);if(f)return f;const p=d.parentNode;return f=t.has(p)?p:s.has(p)?1:l(p),a.set(d,f),f}return e.forEach(d=>{const f=l(d);1!==f&&t.get(f).push(d)}),t}function cr(c,e){c.classList?.add(e)}function Is(c,e){c.classList?.remove(e)}function Rs(c,e,t){De(t).onDone(()=>c.processLeaveNode(e))}function Pc(c,e){for(let t=0;t<c.length;t++){const n=c[t];n instanceof Le?Pc(n.players,e):e.push(n)}}function jh(c,e,t){const n=t.get(c);if(!n)return!1;let s=e.get(c);return s?n.forEach(a=>s.add(a)):e.set(c,n),t.delete(c),!0}class $h{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(s,a)=>{},this._transitionEngine=new yl(e,t,n),this._timelineEngine=new ue(e,t,n),this._transitionEngine.onRemovalComplete=(s,a)=>this.onRemovalComplete(s,a)}registerTrigger(e,t,n,s,a){const l=e+"-"+s;let d=this._triggerCache[l];if(!d){const f=[],g=cl(this._driver,a,f,[]);if(f.length)throw function ii(c,e){return new B.vHH(3404,!1)}();d=function Mi(c,e,t){return new R(c,e,t)}(s,g,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,s,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,s){this._transitionEngine.insertNode(e,t,n,s)}onRemove(e,t,n,s){this._transitionEngine.removeNode(e,t,s||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,s){if("@"==n.charAt(0)){const[a,l]=Ni(n);this._timelineEngine.command(a,t,l,s)}else this._transitionEngine.trigger(e,t,n,s)}listen(e,t,n,s,a){if("@"==n.charAt(0)){const[l,d]=Ni(n);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,n,s,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ur=(()=>{class c{constructor(t,n,s){this._element=t,this._startStyles=n,this._endStyles=s,this._state=0;let a=c.initialStylesByElement.get(t);a||c.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&er(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(er(this._element,this._initialStyles),this._endStyles&&(er(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(hn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hn(this._element,this._endStyles),this._endStyles=null),er(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function Rr(c){let e=null;return c.forEach((t,n)=>{(function Qo(c){return"display"===c||"position"===c})(n)&&(e=e||new Map,e.set(n,t))}),e}class ea{constructor(e,t,n,s){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,s)=>{"offset"!==s&&e.set(s,this._finished?n:ll(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class eo{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Tr(e,t)}getParentElement(e){return Qn(e)}query(e,t,n){return ol(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,s,a,l=[]){const f={duration:n,delay:s,fill:0==s?"both":"forwards"};a&&(f.easing=a);const p=new Map,g=l.filter(M=>M instanceof ea);(function al(c,e){return 0===c||0===e})(n,s)&&g.forEach(M=>{M.currentSnapshot.forEach((T,E)=>p.set(E,T))});let y=function Cr(c){return c.length?c[0]instanceof Map?c:c.map(e=>ci(e)):[]}(t).map(M=>gr(M));y=function ri(c,e,t){if(t.size&&e.length){let n=e[0],s=[];if(t.forEach((a,l)=>{n.has(l)||s.push(l),n.set(l,a)}),s.length)for(let a=1;a<e.length;a++){let l=e[a];s.forEach(d=>l.set(d,ll(c,d)))}}return e}(e,y,p);const x=function Lc(c,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=Rr(e[0]),e.length>1&&(n=Rr(e[e.length-1]))):e instanceof Map&&(t=Rr(e)),t||n?new ur(c,t,n):null}(e,y);return new ea(e,y,f,x)}}var ta=W(6895);let Yh=(()=>{class c extends Ae{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:B.ifc.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?it(t):t;return Oc(this._renderer,null,n,"register",[s]),new Wp(n,this._renderer)}}return c.\u0275fac=function(t){return new(t||c)(B.LFG(B.FYo),B.LFG(ta.K0))},c.\u0275prov=B.Yz7({token:c,factory:c.\u0275fac}),c})();class Wp extends class Te{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new jp(this._id,e,t||{},this._renderer)}}class jp{constructor(e,t,n,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Oc(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Oc(c,e,t,n,s){return c.setProperty(e,`@@${t}:${n}`,s)}const dd="@.disabled";let Nc=(()=>{class c{constructor(t,n,s){this.delegate=t,this.engine=n,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(a,l)=>{const d=l?.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,n){const a=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let g=this._rendererCache.get(a);return g||(g=new qh("",a,this.engine),this._rendererCache.set(a,g)),g}const l=n.id,d=n.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=g=>{Array.isArray(g)?g.forEach(f):this.engine.registerTrigger(l,d,t,g.name,g)};return n.data.animation.forEach(f),new Fc(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,s){t>=0&&t<this._microtaskId?this._zone.run(()=>n(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(t){return new(t||c)(B.LFG(B.FYo),B.LFG($h),B.LFG(B.R0b))},c.\u0275prov=B.Yz7({token:c,factory:c.\u0275fac}),c})();class qh{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,s=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,s){this.delegate.setAttribute(e,t,n,s)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,s){this.delegate.setStyle(e,t,n,s)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==dd?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Fc extends qh{constructor(e,t,n,s){super(t,n,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dd?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const s=function kc(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(e);let a=t.slice(1),l="";return"@"!=a.charAt(0)&&([a,l]=function Bc(c){const e=c.indexOf(".");return[c.substring(0,e),c.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,s,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,n,d)})}return this.delegate.listen(e,t,n)}}const Uc=[{provide:Ae,useClass:Yh},{provide:Ra,useFactory:function Xh(){return new Ic}},{provide:$h,useClass:(()=>{class c extends $h{constructor(t,n,s,a){super(t.body,n,s)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(t){return new(t||c)(B.LFG(ta.K0),B.LFG(po),B.LFG(Ra),B.LFG(B.z2F))},c.\u0275prov=B.Yz7({token:c,factory:c.\u0275fac}),c})()},{provide:B.FYo,useFactory:function Kh(c,e,t){return new Nc(c,e,t)},deps:[L.se,$h,B.R0b]}],hd=[{provide:po,useFactory:()=>new eo},{provide:B.QbO,useValue:"BrowserAnimations"},...Uc],_l=[{provide:po,useClass:Xs},{provide:B.QbO,useValue:"NoopAnimations"},...Uc];let _r=(()=>{class c{static withConfig(t){return{ngModule:c,providers:t.disableAnimations?_l:hd}}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=B.oAB({type:c}),c.\u0275inj=B.cJS({providers:hd,imports:[L.b2]}),c})();var Oa=W(7121),xl=W(2394),bl=W(655),Na=W(8505),wl=W(2722),na=W(7602),ia=W(9387),ra=W(6618),Fa=W(546);let bo=class extends((0,ra.v)(ia.K)){constructor(e,t,n){super(),this._router=e,this._cdRef=t,this.state=n,this.onRouteChange=s=>{this.state.activeMenuBtn=s,this.state.changesOnMenuButtons.next(),this._preventMultipleBackdrops(),this._router.navigateByUrl(`/(${s}-outlet:${s})`)},this._preventMultipleBackdrops=()=>{const s=document.getElementsByClassName("modal-backdrop");s.length>0&&s.item(0).remove()}}ngOnInit(){this.state.changesOnMenuButtons$.pipe((0,Na.b)(()=>this._cdRef.detectChanges()),(0,wl.R)(this.unsubscribe$)).subscribe()}};bo.\u0275fac=function(e){return new(e||bo)(B.Y36(Oa.F0),B.Y36(B.sBO),B.Y36(Fa.g))},bo.\u0275cmp=B.Xpm({type:bo,selectors:[["app-button"]],inputs:{title:"title",target:"target"},features:[B.qOj],decls:3,vars:2,consts:[[1,"btn-wrapper"],["type","button",1,"btn",3,"ngClass","click"]],template:function(e,t){1&e&&(B.TgZ(0,"div",0)(1,"button",1),B.NdJ("click",function(){return t.onRouteChange(t.target)}),B._uU(2),B.qZA()()),2&e&&(B.xp6(1),B.Q6J("ngClass",t.state.activeMenuBtn===t.target?"active":""),B.xp6(1),B.Oqu(t.title))},dependencies:[ta.mk],styles:[".btn-wrapper[_ngcontent-%COMP%]{padding-top:25px;display:flex;justify-content:center}.btn-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding-top:0;height:40px;width:80%;text-align:center;line-height:40px;color:#fff;display:block;font-size:1.1rem;cursor:pointer}.btn-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-color:#fff;border-top-left-radius:25px}.no-focus[_ngcontent-%COMP%]{border:none;outline:0}"],changeDetection:0}),bo=(0,bl.gn)([na.f],bo);var $p=W(3375),wo=W(2076),Ml=W(3900),Yp=W(9646);function Zh(c,e,t,n,s,a,l){try{var d=c[a](l),f=d.value}catch(p){return void t(p)}d.done?e(f):Promise.resolve(f).then(n,s)}const Xr=1e3,Pr=1001,zn=1003,qn=1006,Os=1008,w=1009,K=1014,re=1015,Ce=1016,zt=1020,qi=1023,Eo=1026,Kr=1027,_f=2300,Fl=2301,Qc=3e3,di=3001,to="srgb",Ns="srgb-linear";class Ul{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const a=s.indexOf(t);-1!==a&&s.splice(a,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const s=n.slice(0);for(let a=0,l=s.length;a<l;a++)s[a].call(this,e);e.target=null}}}const hr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gm=1234567;const Or=Math.PI/180,ha=180/Math.PI;function Zr(){const c=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(hr[255&c]+hr[c>>8&255]+hr[c>>16&255]+hr[c>>24&255]+"-"+hr[255&e]+hr[e>>8&255]+"-"+hr[e>>16&15|64]+hr[e>>24&255]+"-"+hr[63&t|128]+hr[t>>8&255]+"-"+hr[t>>16&255]+hr[t>>24&255]+hr[255&n]+hr[n>>8&255]+hr[n>>16&255]+hr[n>>24&255]).toLowerCase()}function Vi(c,e,t){return Math.max(e,Math.min(t,c))}function wf(c,e){return(c%e+e)%e}function Mf(c,e,t){return(1-t)*c+t*e}function Sf(c){return 0==(c&c-1)&&0!==c}function Dd(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function Ef(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}var Px=Object.freeze({__proto__:null,DEG2RAD:Or,RAD2DEG:ha,generateUUID:Zr,clamp:Vi,euclideanModulo:wf,mapLinear:function PS(c,e,t,n,s){return n+(c-e)*(s-n)/(t-e)},inverseLerp:function LS(c,e,t){return c!==e?(t-c)/(e-c):0},lerp:Mf,damp:function ym(c,e,t,n){return Mf(c,e,1-Math.exp(-t*n))},pingpong:function vm(c,e=1){return e-Math.abs(wf(c,2*e)-e)},smoothstep:function _m(c,e,t){return c<=e?0:c>=t?1:(c=(c-e)/(t-e))*c*(3-2*c)},smootherstep:function OS(c,e,t){return c<=e?0:c>=t?1:(c=(c-e)/(t-e))*c*c*(c*(6*c-15)+10)},randInt:function NS(c,e){return c+Math.floor(Math.random()*(e-c+1))},randFloat:function e0(c,e){return c+Math.random()*(e-c)},randFloatSpread:function Tx(c){return c*(.5-Math.random())},seededRandom:function Cx(c){void 0!==c&&(gm=c);let e=gm+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function Ax(c){return c*Or},radToDeg:function Ix(c){return c*ha},isPowerOfTwo:Sf,ceilPowerOfTwo:Dd,floorPowerOfTwo:Ef,setQuaternionFromProperEuler:function xm(c,e,t,n,s){const a=Math.cos,l=Math.sin,d=a(t/2),f=l(t/2),p=a((e+n)/2),g=l((e+n)/2),y=a((e-n)/2),x=l((e-n)/2),M=a((n-e)/2),T=l((n-e)/2);switch(s){case"XYX":c.set(d*g,f*y,f*x,d*p);break;case"YZY":c.set(f*x,d*g,f*y,d*p);break;case"ZXZ":c.set(f*y,f*x,d*g,d*p);break;case"XZX":c.set(d*g,f*T,f*M,d*p);break;case"YXY":c.set(f*M,d*g,f*T,d*p);break;case"ZYZ":c.set(f*T,f*M,d*g,d*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:function ir(c,e){switch(e.constructor){case Float32Array:return c;case Uint16Array:return Math.round(65535*c);case Uint8Array:return Math.round(255*c);case Int16Array:return Math.round(32767*c);case Int8Array:return Math.round(127*c);default:throw new Error("Invalid component type.")}},denormalize:function Rx(c,e){switch(e.constructor){case Float32Array:return c;case Uint16Array:return c/65535;case Uint8Array:return c/255;case Int16Array:return Math.max(c/32767,-1);case Int8Array:return Math.max(c/127,-1);default:throw new Error("Invalid component type.")}}});class Ke{constructor(e=0,t=0){Ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*n-l*s+e.x,this.y=a*s+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vr{constructor(){Vr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,s,a,l,d,f,p){const g=this.elements;return g[0]=e,g[1]=s,g[2]=d,g[3]=t,g[4]=a,g[5]=f,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,l=n[0],d=n[3],f=n[6],p=n[1],g=n[4],y=n[7],x=n[2],M=n[5],T=n[8],E=s[0],D=s[3],N=s[6],F=s[1],z=s[4],k=s[7],$=s[2],q=s[5],ae=s[8];return a[0]=l*E+d*F+f*$,a[3]=l*D+d*z+f*q,a[6]=l*N+d*k+f*ae,a[1]=p*E+g*F+y*$,a[4]=p*D+g*z+y*q,a[7]=p*N+g*k+y*ae,a[2]=x*E+M*F+T*$,a[5]=x*D+M*z+T*q,a[8]=x*N+M*k+T*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],d=e[5],f=e[6],p=e[7],g=e[8];return t*l*g-t*d*p-n*a*g+n*d*f+s*a*p-s*l*f}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],d=e[5],f=e[6],p=e[7],g=e[8],y=g*l-d*p,x=d*f-g*a,M=p*a-l*f,T=t*y+n*x+s*M;if(0===T)return this.set(0,0,0,0,0,0,0,0,0);const E=1/T;return e[0]=y*E,e[1]=(s*p-g*n)*E,e[2]=(d*n-s*l)*E,e[3]=x*E,e[4]=(g*t-s*f)*E,e[5]=(s*a-d*t)*E,e[6]=M*E,e[7]=(n*f-p*t)*E,e[8]=(l*t-n*a)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,a,l,d){const f=Math.cos(a),p=Math.sin(a);return this.set(n*f,n*p,-n*(f*l+p*d)+l+e,-s*p,s*f,-s*(-p*l+f*d)+d+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),s=this.elements,a=s[0],l=s[3],d=s[6],f=s[1],p=s[4],g=s[7];return s[0]=t*a+n*f,s[3]=t*l+n*p,s[6]=t*d+n*g,s[1]=-n*a+t*f,s[4]=-n*l+t*p,s[7]=-n*d+t*g,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function bm(c){for(let e=c.length-1;e>=0;--e)if(c[e]>65535)return!0;return!1}function Td(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function zl(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function Df(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const t0={[to]:{[Ns]:zl},[Ns]:{[to]:Df}},Do={legacyMode:!0,get workingColorSpace(){return Ns},set workingColorSpace(c){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(c,e,t){if(this.legacyMode||e===t||!e||!t)return c;if(t0[e]&&void 0!==t0[e][t]){const n=t0[e][t];return c.r=n(c.r),c.g=n(c.g),c.b=n(c.b),c}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(c,e){return this.convert(c,this.workingColorSpace,e)},toWorkingColorSpace:function(c,e){return this.convert(c,e,this.workingColorSpace)}},tu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ki={r:0,g:0,b:0},Fs={h:0,s:0,l:0},Cd={h:0,s:0,l:0};function Tf(c,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?c+6*(e-c)*t:t<.5?e:t<2/3?c+6*(e-c)*(2/3-t):c}function Cf(c,e){return e.r=c.r,e.g=c.g,e.b=c.b,e}let Hl,kt=(()=>{class c{constructor(t,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===s?this.set(t):this.setRGB(t,n,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=to){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Do.toWorkingColorSpace(this,n),this}setRGB(t,n,s,a=Ns){return this.r=t,this.g=n,this.b=s,Do.toWorkingColorSpace(this,a),this}setHSL(t,n,s,a=Ns){if(t=wf(t,1),n=Vi(n,0,1),s=Vi(s,0,1),0===n)this.r=this.g=this.b=s;else{const l=s<=.5?s*(1+n):s+n-s*n,d=2*s-l;this.r=Tf(d,l,t+1/3),this.g=Tf(d,l,t),this.b=Tf(d,l,t-1/3)}return Do.toWorkingColorSpace(this,a),this}setStyle(t,n=to){function s(l){void 0!==l&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let l;const f=a[2];switch(a[1]){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,Do.toWorkingColorSpace(this,n),s(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,Do.toWorkingColorSpace(this,n),s(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f)){const p=parseFloat(l[1])/360,g=parseInt(l[2],10)/100,y=parseInt(l[3],10)/100;return s(l[4]),this.setHSL(p,g,y,n)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=a[1],d=l.length;if(3===d)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,Do.toWorkingColorSpace(this,n),this;if(6===d)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,Do.toWorkingColorSpace(this,n),this}return t&&t.length>0?this.setColorName(t,n):this}setColorName(t,n=to){const s=tu[t.toLowerCase()];return void 0!==s?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=zl(t.r),this.g=zl(t.g),this.b=zl(t.b),this}copyLinearToSRGB(t){return this.r=Df(t.r),this.g=Df(t.g),this.b=Df(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=to){return Do.fromWorkingColorSpace(Cf(this,Ki),t),Vi(255*Ki.r,0,255)<<16^Vi(255*Ki.g,0,255)<<8^Vi(255*Ki.b,0,255)<<0}getHexString(t=to){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=Ns){Do.fromWorkingColorSpace(Cf(this,Ki),n);const s=Ki.r,a=Ki.g,l=Ki.b,d=Math.max(s,a,l),f=Math.min(s,a,l);let p,g;const y=(f+d)/2;if(f===d)p=0,g=0;else{const x=d-f;switch(g=y<=.5?x/(d+f):x/(2-d-f),d){case s:p=(a-l)/x+(a<l?6:0);break;case a:p=(l-s)/x+2;break;case l:p=(s-a)/x+4}p/=6}return t.h=p,t.s=g,t.l=y,t}getRGB(t,n=Ns){return Do.fromWorkingColorSpace(Cf(this,Ki),n),t.r=Ki.r,t.g=Ki.g,t.b=Ki.b,t}getStyle(t=to){return Do.fromWorkingColorSpace(Cf(this,Ki),t),t!==to?`color(${t} ${Ki.r} ${Ki.g} ${Ki.b})`:`rgb(${255*Ki.r|0},${255*Ki.g|0},${255*Ki.b|0})`}offsetHSL(t,n,s){return this.getHSL(Fs),Fs.h+=t,Fs.s+=n,Fs.l+=s,this.setHSL(Fs.h,Fs.s,Fs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,s){return this.r=t.r+(n.r-t.r)*s,this.g=t.g+(n.g-t.g)*s,this.b=t.b+(n.b-t.b)*s,this}lerpHSL(t,n){this.getHSL(Fs),t.getHSL(Cd);const s=Mf(Fs.h,Cd.h,n),a=Mf(Fs.s,Cd.s,n),l=Mf(Fs.l,Cd.l,n);return this.setHSL(s,a,l),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return c.NAMES=tu,c})();class Af{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Hl&&(Hl=Td("canvas")),Hl.width=e.width,Hl.height=e.height;const n=Hl.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Hl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Td("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),a=s.data;for(let l=0;l<a.length;l++)a[l]=255*zl(a[l]/255);return n.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*zl(t[n]/255)):zl(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Ad{constructor(e=null){this.isSource=!0,this.uuid=Zr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(null!==s){let a;if(Array.isArray(s)){a=[];for(let l=0,d=s.length;l<d;l++)a.push(wm(s[l].isDataTexture?s[l].image:s[l]))}else a=wm(s);n.url=a}return t||(e.images[this.uuid]=n),n}}function wm(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?Af.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Mm=0,ks=(()=>{class c extends Ul{constructor(t=c.DEFAULT_IMAGE,n=c.DEFAULT_MAPPING,s=Pr,a=Pr,l=qn,d=Os,f=qi,p=w,g=1,y=Qc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mm++}),this.uuid=Zr(),this.name="",this.source=new Ad(t),this.mipmaps=[],this.mapping=n,this.wrapS=s,this.wrapT=a,this.magFilter=l,this.minFilter=d,this.anisotropy=g,this.format=f,this.internalFormat=null,this.type=p,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=y,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),n||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Xr:t.x=t.x-Math.floor(t.x);break;case Pr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Xr:t.y=t.y-Math.floor(t.y);break;case Pr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c})();class hi{constructor(e=0,t=0,n=0,s=1){hi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*s+l[12]*a,this.y=l[1]*t+l[5]*n+l[9]*s+l[13]*a,this.z=l[2]*t+l[6]*n+l[10]*s+l[14]*a,this.w=l[3]*t+l[7]*n+l[11]*s+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,a;const f=e.elements,p=f[0],g=f[4],y=f[8],x=f[1],M=f[5],T=f[9],E=f[2],D=f[6],N=f[10];if(Math.abs(g-x)<.01&&Math.abs(y-E)<.01&&Math.abs(T-D)<.01){if(Math.abs(g+x)<.1&&Math.abs(y+E)<.1&&Math.abs(T+D)<.1&&Math.abs(p+M+N-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const z=(p+1)/2,k=(M+1)/2,$=(N+1)/2,q=(g+x)/4,ae=(y+E)/4,U=(T+D)/4;return z>k&&z>$?z<.01?(n=0,s=.707106781,a=.707106781):(n=Math.sqrt(z),s=q/n,a=ae/n):k>$?k<.01?(n=.707106781,s=0,a=.707106781):(s=Math.sqrt(k),n=q/s,a=U/s):$<.01?(n=.707106781,s=.707106781,a=0):(a=Math.sqrt($),n=ae/a,s=U/a),this.set(n,s,a,t),this}let F=Math.sqrt((D-T)*(D-T)+(y-E)*(y-E)+(x-g)*(x-g));return Math.abs(F)<.001&&(F=1),this.x=(D-T)/F,this.y=(y-E)/F,this.z=(x-g)/F,this.w=Math.acos((p+M+N-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ms extends Ul{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hi(0,0,e,t),this.scissorTest=!1,this.viewport=new hi(0,0,e,t),this.texture=new ks({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:qn,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ad(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sm extends ks{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=zn,this.minFilter=zn,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Id extends ks{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=zn,this.minFilter=zn,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fr{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,a,l,d){let f=n[s+0],p=n[s+1],g=n[s+2],y=n[s+3];const x=a[l+0],M=a[l+1],T=a[l+2],E=a[l+3];if(0===d)return e[t+0]=f,e[t+1]=p,e[t+2]=g,void(e[t+3]=y);if(1===d)return e[t+0]=x,e[t+1]=M,e[t+2]=T,void(e[t+3]=E);if(y!==E||f!==x||p!==M||g!==T){let D=1-d;const N=f*x+p*M+g*T+y*E,F=N>=0?1:-1,z=1-N*N;if(z>Number.EPSILON){const $=Math.sqrt(z),q=Math.atan2($,N*F);D=Math.sin(D*q)/$,d=Math.sin(d*q)/$}const k=d*F;if(f=f*D+x*k,p=p*D+M*k,g=g*D+T*k,y=y*D+E*k,D===1-d){const $=1/Math.sqrt(f*f+p*p+g*g+y*y);f*=$,p*=$,g*=$,y*=$}}e[t]=f,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,s,a,l){const d=n[s],f=n[s+1],p=n[s+2],g=n[s+3],y=a[l],x=a[l+1],M=a[l+2],T=a[l+3];return e[t]=d*T+g*y+f*M-p*x,e[t+1]=f*T+g*x+p*y-d*M,e[t+2]=p*T+g*M+d*x-f*y,e[t+3]=g*T-d*y-f*x-p*M,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,s=e._y,a=e._z,l=e._order,d=Math.cos,f=Math.sin,p=d(n/2),g=d(s/2),y=d(a/2),x=f(n/2),M=f(s/2),T=f(a/2);switch(l){case"XYZ":this._x=x*g*y+p*M*T,this._y=p*M*y-x*g*T,this._z=p*g*T+x*M*y,this._w=p*g*y-x*M*T;break;case"YXZ":this._x=x*g*y+p*M*T,this._y=p*M*y-x*g*T,this._z=p*g*T-x*M*y,this._w=p*g*y+x*M*T;break;case"ZXY":this._x=x*g*y-p*M*T,this._y=p*M*y+x*g*T,this._z=p*g*T+x*M*y,this._w=p*g*y-x*M*T;break;case"ZYX":this._x=x*g*y-p*M*T,this._y=p*M*y+x*g*T,this._z=p*g*T-x*M*y,this._w=p*g*y+x*M*T;break;case"YZX":this._x=x*g*y+p*M*T,this._y=p*M*y+x*g*T,this._z=p*g*T-x*M*y,this._w=p*g*y-x*M*T;break;case"XZY":this._x=x*g*y-p*M*T,this._y=p*M*y-x*g*T,this._z=p*g*T+x*M*y,this._w=p*g*y+x*M*T;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],a=t[8],l=t[1],d=t[5],f=t[9],p=t[2],g=t[6],y=t[10],x=n+d+y;if(x>0){const M=.5/Math.sqrt(x+1);this._w=.25/M,this._x=(g-f)*M,this._y=(a-p)*M,this._z=(l-s)*M}else if(n>d&&n>y){const M=2*Math.sqrt(1+n-d-y);this._w=(g-f)/M,this._x=.25*M,this._y=(s+l)/M,this._z=(a+p)/M}else if(d>y){const M=2*Math.sqrt(1+d-n-y);this._w=(a-p)/M,this._x=(s+l)/M,this._y=.25*M,this._z=(f+g)/M}else{const M=2*Math.sqrt(1+y-n-d);this._w=(l-s)/M,this._x=(a+p)/M,this._y=(f+g)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,a=e._z,l=e._w,d=t._x,f=t._y,p=t._z,g=t._w;return this._x=n*g+l*d+s*p-a*f,this._y=s*g+l*f+a*d-n*p,this._z=a*g+l*p+n*f-s*d,this._w=l*g-n*d-s*f-a*p,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,s=this._y,a=this._z,l=this._w;let d=l*e._w+n*e._x+s*e._y+a*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=l,this._x=n,this._y=s,this._z=a,this;const f=1-d*d;if(f<=Number.EPSILON){const M=1-t;return this._w=M*l+t*this._w,this._x=M*n+t*this._x,this._y=M*s+t*this._y,this._z=M*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(f),g=Math.atan2(p,d),y=Math.sin((1-t)*g)/p,x=Math.sin(t*g)/p;return this._w=l*y+this._w*x,this._x=n*y+this._x*x,this._y=s*y+this._y*x,this._z=a*y+this._z*x,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),s=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(s),n*Math.sin(a),n*Math.cos(a),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,n=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Rf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Rf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*s,this.y=a[1]*t+a[4]*n+a[7]*s,this.z=a[2]*t+a[5]*n+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=e.elements,l=1/(a[3]*t+a[7]*n+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*s+a[12])*l,this.y=(a[1]*t+a[5]*n+a[9]*s+a[13])*l,this.z=(a[2]*t+a[6]*n+a[10]*s+a[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,a=e.x,l=e.y,d=e.z,f=e.w,p=f*t+l*s-d*n,g=f*n+d*t-a*s,y=f*s+a*n-l*t,x=-a*t-l*n-d*s;return this.x=p*f+x*-a+g*-d-y*-l,this.y=g*f+x*-l+y*-a-p*-d,this.z=y*f+x*-d+p*-l-g*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s,this.y=a[1]*t+a[5]*n+a[9]*s,this.z=a[2]*t+a[6]*n+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,a=e.z,l=t.x,d=t.y,f=t.z;return this.x=s*f-a*d,this.y=a*l-n*f,this.z=n*d-s*l,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return If.copy(this).projectOnVector(e),this.sub(If)}reflect(e){return this.sub(If.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const If=new Z,Rf=new fr;class Vl{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,s=1/0,a=-1/0,l=-1/0,d=-1/0;for(let f=0,p=e.length;f<p;f+=3){const g=e[f],y=e[f+1],x=e[f+2];g<t&&(t=g),y<n&&(n=y),x<s&&(s=x),g>a&&(a=g),y>l&&(l=y),x>d&&(d=x)}return this.min.set(t,n,s),this.max.set(a,l,d),this}setFromBufferAttribute(e){let t=1/0,n=1/0,s=1/0,a=-1/0,l=-1/0,d=-1/0;for(let f=0,p=e.count;f<p;f++){const g=e.getX(f),y=e.getY(f),x=e.getZ(f);g<t&&(t=g),y<n&&(n=y),x<s&&(s=x),g>a&&(a=g),y>l&&(l=y),x>d&&(d=x)}return this.min.set(t,n,s),this.max.set(a,l,d),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ga.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const a=n.attributes.position;for(let l=0,d=a.count;l<d;l++)Ga.fromBufferAttribute(a,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Ga)}else null===n.boundingBox&&n.computeBoundingBox(),Wa.copy(n.boundingBox),Wa.applyMatrix4(e.matrixWorld),this.union(Wa);const s=e.children;for(let a=0,l=s.length;a<l;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ga),Ga.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(su),Pf.subVectors(this.max,su),nu.subVectors(e.a,su),iu.subVectors(e.b,su),ru.subVectors(e.c,su),ja.subVectors(iu,nu),To.subVectors(ru,iu),Gl.subVectors(nu,ru);let t=[0,-ja.z,ja.y,0,-To.z,To.y,0,-Gl.z,Gl.y,ja.z,0,-ja.x,To.z,0,-To.x,Gl.z,0,-Gl.x,-ja.y,ja.x,0,-To.y,To.x,0,-Gl.y,Gl.x,0];return!(!Em(t,nu,iu,ru,Pf)||(t=[1,0,0,0,1,0,0,0,1],!Em(t,nu,iu,ru,Pf)))&&(Rd.crossVectors(ja,To),t=[Rd.x,Rd.y,Rd.z],Em(t,nu,iu,ru,Pf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ga.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ga).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fa)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fa=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],Ga=new Z,Wa=new Vl,nu=new Z,iu=new Z,ru=new Z,ja=new Z,To=new Z,Gl=new Z,su=new Z,Pf=new Z,Rd=new Z,ou=new Z;function Em(c,e,t,n,s){for(let a=0,l=c.length-3;a<=l;a+=3){ou.fromArray(c,a);const d=s.x*Math.abs(ou.x)+s.y*Math.abs(ou.y)+s.z*Math.abs(ou.z),f=e.dot(ou),p=t.dot(ou),g=n.dot(ou);if(Math.max(-Math.max(f,p,g),Math.min(f,p,g))>d)return!1}return!0}const Pd=new Vl,s0=new Z,pa=new Z,Wl=new Z;class jl{constructor(e=new Z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Pd.setFromPoints(e).getCenter(n);let s=0;for(let a=0,l=e.length;a<l;a++)s=Math.max(s,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Wl.subVectors(e,this.center);const t=Wl.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=.5*(n-this.radius);this.center.add(Wl.multiplyScalar(s/n)),this.radius+=s}return this}union(e){return!0===this.center.equals(e.center)?pa.set(0,0,1).multiplyScalar(e.radius):pa.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(s0.copy(e.center).add(pa)),this.expandByPoint(s0.copy(e.center).sub(pa)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $a=new Z,Lf=new Z,Of=new Z,Ya=new Z,Dm=new Z,Ld=new Z,Tm=new Z;class au{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$a)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$a.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($a.copy(this.direction).multiplyScalar(t).add(this.origin),$a.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){Lf.copy(e).add(t).multiplyScalar(.5),Of.copy(t).sub(e).normalize(),Ya.copy(this.origin).sub(Lf);const a=.5*e.distanceTo(t),l=-this.direction.dot(Of),d=Ya.dot(this.direction),f=-Ya.dot(Of),p=Ya.lengthSq(),g=Math.abs(1-l*l);let y,x,M,T;if(g>0)if(y=l*f-d,x=l*d-f,T=a*g,y>=0)if(x>=-T)if(x<=T){const E=1/g;y*=E,x*=E,M=y*(y+l*x+2*d)+x*(l*y+x+2*f)+p}else x=a,y=Math.max(0,-(l*x+d)),M=-y*y+x*(x+2*f)+p;else x=-a,y=Math.max(0,-(l*x+d)),M=-y*y+x*(x+2*f)+p;else x<=-T?(y=Math.max(0,-(-l*a+d)),x=y>0?-a:Math.min(Math.max(-a,-f),a),M=-y*y+x*(x+2*f)+p):x<=T?(y=0,x=Math.min(Math.max(-a,-f),a),M=x*(x+2*f)+p):(y=Math.max(0,-(l*a+d)),x=y>0?a:Math.min(Math.max(-a,-f),a),M=-y*y+x*(x+2*f)+p);else x=l>0?-a:a,y=Math.max(0,-(l*x+d)),M=-y*y+x*(x+2*f)+p;return n&&n.copy(this.direction).multiplyScalar(y).add(this.origin),s&&s.copy(Of).multiplyScalar(x).add(Lf),M}intersectSphere(e,t){$a.subVectors(e.center,this.origin);const n=$a.dot(this.direction),s=$a.dot($a)-n*n,a=e.radius*e.radius;if(s>a)return null;const l=Math.sqrt(a-s),d=n-l,f=n+l;return d<0&&f<0?null:this.at(d<0?f:d,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,a,l,d,f;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,x=this.origin;return p>=0?(n=(e.min.x-x.x)*p,s=(e.max.x-x.x)*p):(n=(e.max.x-x.x)*p,s=(e.min.x-x.x)*p),g>=0?(a=(e.min.y-x.y)*g,l=(e.max.y-x.y)*g):(a=(e.max.y-x.y)*g,l=(e.min.y-x.y)*g),n>l||a>s||((a>n||n!=n)&&(n=a),(l<s||s!=s)&&(s=l),y>=0?(d=(e.min.z-x.z)*y,f=(e.max.z-x.z)*y):(d=(e.max.z-x.z)*y,f=(e.min.z-x.z)*y),n>f||d>s)||((d>n||n!=n)&&(n=d),(f<s||s!=s)&&(s=f),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return null!==this.intersectBox(e,$a)}intersectTriangle(e,t,n,s,a){Dm.subVectors(t,e),Ld.subVectors(n,e),Tm.crossVectors(Dm,Ld);let d,l=this.direction.dot(Tm);if(l>0){if(s)return null;d=1}else{if(!(l<0))return null;d=-1,l=-l}Ya.subVectors(this.origin,e);const f=d*this.direction.dot(Ld.crossVectors(Ya,Ld));if(f<0)return null;const p=d*this.direction.dot(Dm.cross(Ya));if(p<0||f+p>l)return null;const g=-d*Ya.dot(Tm);return g<0?null:this.at(g/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class On{constructor(){On.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,s,a,l,d,f,p,g,y,x,M,T,E,D){const N=this.elements;return N[0]=e,N[4]=t,N[8]=n,N[12]=s,N[1]=a,N[5]=l,N[9]=d,N[13]=f,N[2]=p,N[6]=g,N[10]=y,N[14]=x,N[3]=M,N[7]=T,N[11]=E,N[15]=D,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new On).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/lu.setFromMatrixColumn(e,0).length(),a=1/lu.setFromMatrixColumn(e,1).length(),l=1/lu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,a=e.z,l=Math.cos(n),d=Math.sin(n),f=Math.cos(s),p=Math.sin(s),g=Math.cos(a),y=Math.sin(a);if("XYZ"===e.order){const x=l*g,M=l*y,T=d*g,E=d*y;t[0]=f*g,t[4]=-f*y,t[8]=p,t[1]=M+T*p,t[5]=x-E*p,t[9]=-d*f,t[2]=E-x*p,t[6]=T+M*p,t[10]=l*f}else if("YXZ"===e.order){const x=f*g,M=f*y,T=p*g,E=p*y;t[0]=x+E*d,t[4]=T*d-M,t[8]=l*p,t[1]=l*y,t[5]=l*g,t[9]=-d,t[2]=M*d-T,t[6]=E+x*d,t[10]=l*f}else if("ZXY"===e.order){const x=f*g,M=f*y,T=p*g,E=p*y;t[0]=x-E*d,t[4]=-l*y,t[8]=T+M*d,t[1]=M+T*d,t[5]=l*g,t[9]=E-x*d,t[2]=-l*p,t[6]=d,t[10]=l*f}else if("ZYX"===e.order){const x=l*g,M=l*y,T=d*g,E=d*y;t[0]=f*g,t[4]=T*p-M,t[8]=x*p+E,t[1]=f*y,t[5]=E*p+x,t[9]=M*p-T,t[2]=-p,t[6]=d*f,t[10]=l*f}else if("YZX"===e.order){const x=l*f,M=l*p,T=d*f,E=d*p;t[0]=f*g,t[4]=E-x*y,t[8]=T*y+M,t[1]=y,t[5]=l*g,t[9]=-d*g,t[2]=-p*g,t[6]=M*y+T,t[10]=x-E*y}else if("XZY"===e.order){const x=l*f,M=l*p,T=d*f,E=d*p;t[0]=f*g,t[4]=-y,t[8]=p*g,t[1]=x*y+E,t[5]=l*g,t[9]=M*y-T,t[2]=T*y-M,t[6]=d*g,t[10]=E*y+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kS,e,BS)}lookAt(e,t,n){const s=this.elements;return Bs.subVectors(e,t),0===Bs.lengthSq()&&(Bs.z=1),Bs.normalize(),Co.crossVectors(n,Bs),0===Co.lengthSq()&&(1===Math.abs(n.z)?Bs.x+=1e-4:Bs.z+=1e-4,Bs.normalize(),Co.crossVectors(n,Bs)),Co.normalize(),Cm.crossVectors(Bs,Co),s[0]=Co.x,s[4]=Cm.x,s[8]=Bs.x,s[1]=Co.y,s[5]=Cm.y,s[9]=Bs.y,s[2]=Co.z,s[6]=Cm.z,s[10]=Bs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,l=n[0],d=n[4],f=n[8],p=n[12],g=n[1],y=n[5],x=n[9],M=n[13],T=n[2],E=n[6],D=n[10],N=n[14],F=n[3],z=n[7],k=n[11],$=n[15],q=s[0],ae=s[4],U=s[8],Q=s[12],he=s[1],ge=s[5],Ye=s[9],st=s[13],be=s[2],He=s[6],de=s[10],Se=s[14],Ee=s[3],we=s[7],Pe=s[11],yt=s[15];return a[0]=l*q+d*he+f*be+p*Ee,a[4]=l*ae+d*ge+f*He+p*we,a[8]=l*U+d*Ye+f*de+p*Pe,a[12]=l*Q+d*st+f*Se+p*yt,a[1]=g*q+y*he+x*be+M*Ee,a[5]=g*ae+y*ge+x*He+M*we,a[9]=g*U+y*Ye+x*de+M*Pe,a[13]=g*Q+y*st+x*Se+M*yt,a[2]=T*q+E*he+D*be+N*Ee,a[6]=T*ae+E*ge+D*He+N*we,a[10]=T*U+E*Ye+D*de+N*Pe,a[14]=T*Q+E*st+D*Se+N*yt,a[3]=F*q+z*he+k*be+$*Ee,a[7]=F*ae+z*ge+k*He+$*we,a[11]=F*U+z*Ye+k*de+$*Pe,a[15]=F*Q+z*st+k*Se+$*yt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],a=e[12],l=e[1],d=e[5],f=e[9],p=e[13],g=e[2],y=e[6],x=e[10],M=e[14];return e[3]*(+a*f*y-s*p*y-a*d*x+n*p*x+s*d*M-n*f*M)+e[7]*(+t*f*M-t*p*x+a*l*x-s*l*M+s*p*g-a*f*g)+e[11]*(+t*p*y-t*d*M-a*l*y+n*l*M+a*d*g-n*p*g)+e[15]*(-s*d*g-t*f*y+t*d*x+s*l*y-n*l*x+n*f*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],d=e[5],f=e[6],p=e[7],g=e[8],y=e[9],x=e[10],M=e[11],T=e[12],E=e[13],D=e[14],N=e[15],F=y*D*p-E*x*p+E*f*M-d*D*M-y*f*N+d*x*N,z=T*x*p-g*D*p-T*f*M+l*D*M+g*f*N-l*x*N,k=g*E*p-T*y*p+T*d*M-l*E*M-g*d*N+l*y*N,$=T*y*f-g*E*f-T*d*x+l*E*x+g*d*D-l*y*D,q=t*F+n*z+s*k+a*$;if(0===q)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ae=1/q;return e[0]=F*ae,e[1]=(E*x*a-y*D*a-E*s*M+n*D*M+y*s*N-n*x*N)*ae,e[2]=(d*D*a-E*f*a+E*s*p-n*D*p-d*s*N+n*f*N)*ae,e[3]=(y*f*a-d*x*a-y*s*p+n*x*p+d*s*M-n*f*M)*ae,e[4]=z*ae,e[5]=(g*D*a-T*x*a+T*s*M-t*D*M-g*s*N+t*x*N)*ae,e[6]=(T*f*a-l*D*a-T*s*p+t*D*p+l*s*N-t*f*N)*ae,e[7]=(l*x*a-g*f*a+g*s*p-t*x*p-l*s*M+t*f*M)*ae,e[8]=k*ae,e[9]=(T*y*a-g*E*a-T*n*M+t*E*M+g*n*N-t*y*N)*ae,e[10]=(l*E*a-T*d*a+T*n*p-t*E*p-l*n*N+t*d*N)*ae,e[11]=(g*d*a-l*y*a-g*n*p+t*y*p+l*n*M-t*d*M)*ae,e[12]=$*ae,e[13]=(g*E*s-T*y*s+T*n*x-t*E*x-g*n*D+t*y*D)*ae,e[14]=(T*d*s-l*E*s-T*n*f+t*E*f+l*n*D-t*d*D)*ae,e[15]=(l*y*s-g*d*s+g*n*f-t*y*f-l*n*x+t*d*x)*ae,this}scale(e){const t=this.elements,n=e.x,s=e.y,a=e.z;return t[0]*=n,t[4]*=s,t[8]*=a,t[1]*=n,t[5]*=s,t[9]*=a,t[2]*=n,t[6]*=s,t[10]*=a,t[3]*=n,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),a=1-n,l=e.x,d=e.y,f=e.z,p=a*l,g=a*d;return this.set(p*l+n,p*d-s*f,p*f+s*d,0,p*d+s*f,g*d+n,g*f-s*l,0,p*f-s*d,g*f+s*l,a*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,a,l){return this.set(1,n,a,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,a=t._x,l=t._y,d=t._z,f=t._w,p=a+a,g=l+l,y=d+d,x=a*p,M=a*g,T=a*y,E=l*g,D=l*y,N=d*y,F=f*p,z=f*g,k=f*y,$=n.x,q=n.y,ae=n.z;return s[0]=(1-(E+N))*$,s[1]=(M+k)*$,s[2]=(T-z)*$,s[3]=0,s[4]=(M-k)*q,s[5]=(1-(x+N))*q,s[6]=(D+F)*q,s[7]=0,s[8]=(T+z)*ae,s[9]=(D-F)*ae,s[10]=(1-(x+E))*ae,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let a=lu.set(s[0],s[1],s[2]).length();const l=lu.set(s[4],s[5],s[6]).length(),d=lu.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],gs.copy(this);const p=1/a,g=1/l,y=1/d;return gs.elements[0]*=p,gs.elements[1]*=p,gs.elements[2]*=p,gs.elements[4]*=g,gs.elements[5]*=g,gs.elements[6]*=g,gs.elements[8]*=y,gs.elements[9]*=y,gs.elements[10]*=y,t.setFromRotationMatrix(gs),n.x=a,n.y=l,n.z=d,this}makePerspective(e,t,n,s,a,l){const d=this.elements,p=2*a/(n-s),g=(t+e)/(t-e),y=(n+s)/(n-s),x=-(l+a)/(l-a),M=-2*l*a/(l-a);return d[0]=2*a/(t-e),d[4]=0,d[8]=g,d[12]=0,d[1]=0,d[5]=p,d[9]=y,d[13]=0,d[2]=0,d[6]=0,d[10]=x,d[14]=M,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,n,s,a,l){const d=this.elements,f=1/(t-e),p=1/(n-s),g=1/(l-a),y=(t+e)*f,x=(n+s)*p,M=(l+a)*g;return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-y,d[1]=0,d[5]=2*p,d[9]=0,d[13]=-x,d[2]=0,d[6]=0,d[10]=-2*g,d[14]=-M,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const lu=new Z,gs=new On,kS=new Z(0,0,0),BS=new Z(1,1,1),Co=new Z,Cm=new Z,Bs=new Z,Ox=new On,Nx=new fr;let US=(()=>{class c{constructor(t=0,n=0,s=0,a=c.DefaultOrder){this.isEuler=!0,this._x=t,this._y=n,this._z=s,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,s,a=this._order){return this._x=t,this._y=n,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,s=!0){const a=t.elements,l=a[0],d=a[4],f=a[8],p=a[1],g=a[5],y=a[9],x=a[2],M=a[6],T=a[10];switch(n){case"XYZ":this._y=Math.asin(Vi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-y,T),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(M,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Vi(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(f,T),this._z=Math.atan2(p,g)):(this._y=Math.atan2(-x,l),this._z=0);break;case"ZXY":this._x=Math.asin(Vi(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-x,T),this._z=Math.atan2(-d,g)):(this._y=0,this._z=Math.atan2(p,l));break;case"ZYX":this._y=Math.asin(-Vi(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(M,T),this._z=Math.atan2(p,l)):(this._x=0,this._z=Math.atan2(-d,g));break;case"YZX":this._z=Math.asin(Vi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-y,g),this._y=Math.atan2(-x,l)):(this._x=0,this._y=Math.atan2(f,T));break;case"XZY":this._z=Math.asin(-Vi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(M,g),this._y=Math.atan2(f,l)):(this._x=Math.atan2(-y,T),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,n,s){return Ox.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ox,n,s)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return Nx.setFromEuler(this),this.setFromQuaternion(Nx,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return c.DefaultOrder="XYZ",c.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],c})();class Am{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let o0=0;const Nf=new Z,$l=new fr,Ao=new On,Od=new Z,Yl=new Z,Fx=new Z,Im=new fr,cu=new Z(1,0,0),a0=new Z(0,1,0),l0=new Z(0,0,1),kx={type:"added"},Rm={type:"removed"};let Mr=(()=>{class c extends Ul{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:o0++}),this.uuid=Zr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=c.DefaultUp.clone();const t=new Z,n=new US,s=new fr,a=new Z(1,1,1);n._onChange(function l(){s.setFromEuler(n,!1)}),s._onChange(function d(){n.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new On},normalMatrix:{value:new Vr}}),this.matrix=new On,this.matrixWorld=new On,this.matrixAutoUpdate=c.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Am,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return $l.setFromAxisAngle(t,n),this.quaternion.multiply($l),this}rotateOnWorldAxis(t,n){return $l.setFromAxisAngle(t,n),this.quaternion.premultiply($l),this}rotateX(t){return this.rotateOnAxis(cu,t)}rotateY(t){return this.rotateOnAxis(a0,t)}rotateZ(t){return this.rotateOnAxis(l0,t)}translateOnAxis(t,n){return Nf.copy(t).applyQuaternion(this.quaternion),this.position.add(Nf.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(cu,t)}translateY(t){return this.translateOnAxis(a0,t)}translateZ(t){return this.translateOnAxis(l0,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ao.copy(this.matrixWorld).invert())}lookAt(t,n,s){t.isVector3?Od.copy(t):Od.set(t,n,s);const a=this.parent;this.updateWorldMatrix(!0,!1),Yl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ao.lookAt(Yl,Od,this.up):Ao.lookAt(Od,Yl,this.up),this.quaternion.setFromRotationMatrix(Ao),a&&(Ao.extractRotation(a.matrixWorld),$l.setFromRotationMatrix(Ao),this.quaternion.premultiply($l.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(kx)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Rm)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(Rm)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ao.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ao.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ao),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let s=0,a=this.children.length;s<a;s++){const d=this.children[s].getObjectByProperty(t,n);if(void 0!==d)return d}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yl,t,Fx),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yl,Im,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let s=0,a=n.length;s<a;s++)n[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let s=0,a=n.length;s<a;s++)n[s].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let s=0,a=n.length;s<a;s++)n[s].updateMatrixWorld(t)}updateWorldMatrix(t,n){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const a=this.children;for(let l=0,d=a.length;l<d;l++)a[l].updateWorldMatrix(!1,!0)}}toJSON(t){const n=void 0===t||"string"==typeof t,s={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};function l(f,p){return void 0===f[p.uuid]&&(f[p.uuid]=p.toJSON(t)),p.uuid}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=l(t.geometries,this.geometry);const f=this.geometry.parameters;if(void 0!==f&&void 0!==f.shapes){const p=f.shapes;if(Array.isArray(p))for(let g=0,y=p.length;g<y;g++)l(t.shapes,p[g]);else l(t.shapes,p)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(l(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const f=[];for(let p=0,g=this.material.length;p<g;p++)f.push(l(t.materials,this.material[p]));a.material=f}else a.material=l(t.materials,this.material);if(this.children.length>0){a.children=[];for(let f=0;f<this.children.length;f++)a.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let f=0;f<this.animations.length;f++)a.animations.push(l(t.animations,this.animations[f]))}if(n){const f=d(t.geometries),p=d(t.materials),g=d(t.textures),y=d(t.images),x=d(t.shapes),M=d(t.skeletons),T=d(t.animations),E=d(t.nodes);f.length>0&&(s.geometries=f),p.length>0&&(s.materials=p),g.length>0&&(s.textures=g),y.length>0&&(s.images=y),x.length>0&&(s.shapes=x),M.length>0&&(s.skeletons=M),T.length>0&&(s.animations=T),E.length>0&&(s.nodes=E)}return s.object=a,s;function d(f){const p=[];for(const g in f){const y=f[g];delete y.metadata,p.push(y)}return p}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let s=0;s<t.children.length;s++)this.add(t.children[s].clone());return this}}return c.DefaultUp=new Z(0,1,0),c.DefaultMatrixAutoUpdate=!0,c})();const no=new Z,ma=new Z,Pm=new Z,io=new Z,uu=new Z,du=new Z,c0=new Z,Ff=new Z,Lm=new Z,Om=new Z;class Pi{constructor(e=new Z,t=new Z,n=new Z){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),no.subVectors(e,t),s.cross(no);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,n,s,a){no.subVectors(s,t),ma.subVectors(n,t),Pm.subVectors(e,t);const l=no.dot(no),d=no.dot(ma),f=no.dot(Pm),p=ma.dot(ma),g=ma.dot(Pm),y=l*p-d*d;if(0===y)return a.set(-2,-1,-1);const x=1/y,M=(p*f-d*g)*x,T=(l*g-d*f)*x;return a.set(1-M-T,T,M)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,io),io.x>=0&&io.y>=0&&io.x+io.y<=1}static getUV(e,t,n,s,a,l,d,f){return this.getBarycoord(e,t,n,s,io),f.set(0,0),f.addScaledVector(a,io.x),f.addScaledVector(l,io.y),f.addScaledVector(d,io.z),f}static isFrontFacing(e,t,n,s){return no.subVectors(n,t),ma.subVectors(e,t),no.cross(ma).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return no.subVectors(this.c,this.b),ma.subVectors(this.a,this.b),.5*no.cross(ma).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Pi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Pi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,s,a){return Pi.getUV(e,this.a,this.b,this.c,t,n,s,a)}containsPoint(e){return Pi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Pi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,a=this.c;let l,d;uu.subVectors(s,n),du.subVectors(a,n),Ff.subVectors(e,n);const f=uu.dot(Ff),p=du.dot(Ff);if(f<=0&&p<=0)return t.copy(n);Lm.subVectors(e,s);const g=uu.dot(Lm),y=du.dot(Lm);if(g>=0&&y<=g)return t.copy(s);const x=f*y-g*p;if(x<=0&&f>=0&&g<=0)return l=f/(f-g),t.copy(n).addScaledVector(uu,l);Om.subVectors(e,a);const M=uu.dot(Om),T=du.dot(Om);if(T>=0&&M<=T)return t.copy(a);const E=M*p-f*T;if(E<=0&&p>=0&&T<=0)return d=p/(p-T),t.copy(n).addScaledVector(du,d);const D=g*T-M*y;if(D<=0&&y-g>=0&&M-T>=0)return c0.subVectors(a,s),d=(y-g)/(y-g+(M-T)),t.copy(s).addScaledVector(c0,d);const N=1/(D+E+x);return l=E*N,d=x*N,t.copy(n).addScaledVector(uu,l).addScaledVector(du,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Nm=0;class Us extends Ul{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Nm++}),this.uuid=Zr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(a){const l=[];for(const d in a){const f=a[d];delete f.metadata,l.push(f)}return l}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const a=s(e.textures),l=s(e.images);a.length>0&&(n.textures=a),l.length>0&&(n.images=l)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const s=t.length;n=new Array(s);for(let a=0;a!==s;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Jr extends Us{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Kn=new Z,qa=new Ke;class Gi{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];void 0===l&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new kt),t[n++]=l.r,t[n++]=l.g,t[n++]=l.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Ke),t[n++]=l.x,t[n++]=l.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Z),t[n++]=l.x,t[n++]=l.y,t[n++]=l.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let s=0,a=e.length;s<a;s++){let l=e[s];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new hi),t[n++]=l.x,t[n++]=l.y,t[n++]=l.z,t[n++]=l.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)qa.fromBufferAttribute(this,t),qa.applyMatrix3(e),this.setXY(t,qa.x,qa.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix3(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix4(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Kn.fromBufferAttribute(this,t),Kn.applyNormalMatrix(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Kn.fromBufferAttribute(this,t),Kn.transformDirection(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,a){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class Fm extends Gi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class km extends Gi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class tn extends Gi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let u0=0;const zs=new On,Bm=new Mr,ro=new Z,Zi=new Vl,Nd=new Vl,xr=new Z;class jn extends Ul{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:u0++}),this.uuid=Zr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(bm(e)?km:Fm)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const a=(new Vr).getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return zs.makeRotationFromQuaternion(e),this.applyMatrix4(zs),this}rotateX(e){return zs.makeRotationX(e),this.applyMatrix4(zs),this}rotateY(e){return zs.makeRotationY(e),this.applyMatrix4(zs),this}rotateZ(e){return zs.makeRotationZ(e),this.applyMatrix4(zs),this}translate(e,t,n){return zs.makeTranslation(e,t,n),this.applyMatrix4(zs),this}scale(e,t,n){return zs.makeScale(e,t,n),this.applyMatrix4(zs),this}lookAt(e){return Bm.lookAt(e),Bm.updateMatrix(),this.applyMatrix4(Bm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ro).negate(),this.translate(ro.x,ro.y,ro.z),this}setFromPoints(e){const t=[];for(let n=0,s=e.length;n<s;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new tn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Vl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++)Zi.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new jl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Z,1/0);if(e){const n=this.boundingSphere.center;if(Zi.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++)Nd.setFromBufferAttribute(t[a]),this.morphTargetsRelative?(xr.addVectors(Zi.min,Nd.min),Zi.expandByPoint(xr),xr.addVectors(Zi.max,Nd.max),Zi.expandByPoint(xr)):(Zi.expandByPoint(Nd.min),Zi.expandByPoint(Nd.max));Zi.getCenter(n);let s=0;for(let a=0,l=e.count;a<l;a++)xr.fromBufferAttribute(e,a),s=Math.max(s,n.distanceToSquared(xr));if(t)for(let a=0,l=t.length;a<l;a++){const d=t[a],f=this.morphTargetsRelative;for(let p=0,g=d.count;p<g;p++)xr.fromBufferAttribute(d,p),f&&(ro.fromBufferAttribute(e,p),xr.add(ro)),s=Math.max(s,n.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,s=t.position.array,a=t.normal.array,l=t.uv.array,d=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gi(new Float32Array(4*d),4));const f=this.getAttribute("tangent").array,p=[],g=[];for(let he=0;he<d;he++)p[he]=new Z,g[he]=new Z;const y=new Z,x=new Z,M=new Z,T=new Ke,E=new Ke,D=new Ke,N=new Z,F=new Z;function z(he,ge,Ye){y.fromArray(s,3*he),x.fromArray(s,3*ge),M.fromArray(s,3*Ye),T.fromArray(l,2*he),E.fromArray(l,2*ge),D.fromArray(l,2*Ye),x.sub(y),M.sub(y),E.sub(T),D.sub(T);const st=1/(E.x*D.y-D.x*E.y);!isFinite(st)||(N.copy(x).multiplyScalar(D.y).addScaledVector(M,-E.y).multiplyScalar(st),F.copy(M).multiplyScalar(E.x).addScaledVector(x,-D.x).multiplyScalar(st),p[he].add(N),p[ge].add(N),p[Ye].add(N),g[he].add(F),g[ge].add(F),g[Ye].add(F))}let k=this.groups;0===k.length&&(k=[{start:0,count:n.length}]);for(let he=0,ge=k.length;he<ge;++he){const Ye=k[he],st=Ye.start;for(let He=st,de=st+Ye.count;He<de;He+=3)z(n[He+0],n[He+1],n[He+2])}const $=new Z,q=new Z,ae=new Z,U=new Z;function Q(he){ae.fromArray(a,3*he),U.copy(ae);const ge=p[he];$.copy(ge),$.sub(ae.multiplyScalar(ae.dot(ge))).normalize(),q.crossVectors(U,ge);const st=q.dot(g[he])<0?-1:1;f[4*he]=$.x,f[4*he+1]=$.y,f[4*he+2]=$.z,f[4*he+3]=st}for(let he=0,ge=k.length;he<ge;++he){const Ye=k[he],st=Ye.start;for(let He=st,de=st+Ye.count;He<de;He+=3)Q(n[He+0]),Q(n[He+1]),Q(n[He+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Gi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let x=0,M=n.count;x<M;x++)n.setXYZ(x,0,0,0);const s=new Z,a=new Z,l=new Z,d=new Z,f=new Z,p=new Z,g=new Z,y=new Z;if(e)for(let x=0,M=e.count;x<M;x+=3){const T=e.getX(x+0),E=e.getX(x+1),D=e.getX(x+2);s.fromBufferAttribute(t,T),a.fromBufferAttribute(t,E),l.fromBufferAttribute(t,D),g.subVectors(l,a),y.subVectors(s,a),g.cross(y),d.fromBufferAttribute(n,T),f.fromBufferAttribute(n,E),p.fromBufferAttribute(n,D),d.add(g),f.add(g),p.add(g),n.setXYZ(T,d.x,d.y,d.z),n.setXYZ(E,f.x,f.y,f.z),n.setXYZ(D,p.x,p.y,p.z)}else for(let x=0,M=t.count;x<M;x+=3)s.fromBufferAttribute(t,x+0),a.fromBufferAttribute(t,x+1),l.fromBufferAttribute(t,x+2),g.subVectors(l,a),y.subVectors(s,a),g.cross(y),n.setXYZ(x+0,g.x,g.y,g.z),n.setXYZ(x+1,g.x,g.y,g.z),n.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const s in n){if(void 0===e.attributes[s])continue;const l=n[s].array,d=e.attributes[s],f=d.array,p=d.itemSize*t,g=Math.min(f.length,l.length-p);for(let y=0,x=p;y<g;y++,x++)l[x]=f[y]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(d,f){const p=d.array,g=d.itemSize,y=d.normalized,x=new p.constructor(f.length*g);let M=0,T=0;for(let E=0,D=f.length;E<D;E++){M=d.isInterleavedBufferAttribute?f[E]*d.data.stride+d.offset:f[E]*g;for(let N=0;N<g;N++)x[T++]=p[M++]}return new Gi(x,g,y)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jn,n=this.index.array,s=this.attributes;for(const d in s){const p=e(s[d],n);t.setAttribute(d,p)}const a=this.morphAttributes;for(const d in a){const f=[],p=a[d];for(let g=0,y=p.length;g<y;g++){const M=e(p[g],n);f.push(M)}t.morphAttributes[d]=f}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let d=0,f=l.length;d<f;d++){const p=l[d];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const f=this.parameters;for(const p in f)void 0!==f[p]&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n)e.data.attributes[f]=n[f].toJSON(e.data);const s={};let a=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],g=[];for(let y=0,x=p.length;y<x;y++)g.push(p[y].toJSON(e.data));g.length>0&&(s[f]=g,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const s=e.attributes;for(const p in s)this.setAttribute(p,s[p].clone(t));const a=e.morphAttributes;for(const p in a){const g=[],y=a[p];for(let x=0,M=y.length;x<M;x++)g.push(y[x].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());const f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ux=new On,ql=new au,d0=new jl,Sr=new Z,Io=new Z,Ro=new Z,Um=new Z,kf=new Z,zm=new Z,Xa=new Z,Bf=new Z,Fd=new Z,hu=new Ke,fu=new Ke,kd=new Ke,h0=new Z,ga=new Z;class Er extends Mr{constructor(e=new jn,t=new Jr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const d=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}raycast(e,t){const n=this.geometry,s=this.material,a=this.matrixWorld;if(void 0===s||(null===n.boundingSphere&&n.computeBoundingSphere(),d0.copy(n.boundingSphere),d0.applyMatrix4(a),!1===e.ray.intersectsSphere(d0))||(Ux.copy(a).invert(),ql.copy(e.ray).applyMatrix4(Ux),null!==n.boundingBox&&!1===ql.intersectsBox(n.boundingBox)))return;let l;const d=n.index,f=n.attributes.position,p=n.morphAttributes.position,g=n.morphTargetsRelative,y=n.attributes.uv,x=n.attributes.uv2,M=n.groups,T=n.drawRange;if(null!==d)if(Array.isArray(s))for(let E=0,D=M.length;E<D;E++){const N=M[E],F=s[N.materialIndex];for(let $=Math.max(N.start,T.start),q=Math.min(d.count,Math.min(N.start+N.count,T.start+T.count));$<q;$+=3){const ae=d.getX($),U=d.getX($+1),Q=d.getX($+2);l=Uf(this,F,e,ql,f,p,g,y,x,ae,U,Q),l&&(l.faceIndex=Math.floor($/3),l.face.materialIndex=N.materialIndex,t.push(l))}}else for(let N=Math.max(0,T.start),F=Math.min(d.count,T.start+T.count);N<F;N+=3){const z=d.getX(N),k=d.getX(N+1),$=d.getX(N+2);l=Uf(this,s,e,ql,f,p,g,y,x,z,k,$),l&&(l.faceIndex=Math.floor(N/3),t.push(l))}else if(void 0!==f)if(Array.isArray(s))for(let E=0,D=M.length;E<D;E++){const N=M[E],F=s[N.materialIndex];for(let $=Math.max(N.start,T.start),q=Math.min(f.count,Math.min(N.start+N.count,T.start+T.count));$<q;$+=3)l=Uf(this,F,e,ql,f,p,g,y,x,$,$+1,$+2),l&&(l.faceIndex=Math.floor($/3),l.face.materialIndex=N.materialIndex,t.push(l))}else for(let N=Math.max(0,T.start),F=Math.min(f.count,T.start+T.count);N<F;N+=3)l=Uf(this,s,e,ql,f,p,g,y,x,N,N+1,N+2),l&&(l.faceIndex=Math.floor(N/3),t.push(l))}}function Uf(c,e,t,n,s,a,l,d,f,p,g,y){Sr.fromBufferAttribute(s,p),Io.fromBufferAttribute(s,g),Ro.fromBufferAttribute(s,y);const x=c.morphTargetInfluences;if(a&&x){Xa.set(0,0,0),Bf.set(0,0,0),Fd.set(0,0,0);for(let T=0,E=a.length;T<E;T++){const D=x[T],N=a[T];0!==D&&(Um.fromBufferAttribute(N,p),kf.fromBufferAttribute(N,g),zm.fromBufferAttribute(N,y),l?(Xa.addScaledVector(Um,D),Bf.addScaledVector(kf,D),Fd.addScaledVector(zm,D)):(Xa.addScaledVector(Um.sub(Sr),D),Bf.addScaledVector(kf.sub(Io),D),Fd.addScaledVector(zm.sub(Ro),D)))}Sr.add(Xa),Io.add(Bf),Ro.add(Fd)}c.isSkinnedMesh&&(c.boneTransform(p,Sr),c.boneTransform(g,Io),c.boneTransform(y,Ro));const M=function f0(c,e,t,n,s,a,l,d){let f;if(f=1===e.side?n.intersectTriangle(l,a,s,!0,d):n.intersectTriangle(s,a,l,2!==e.side,d),null===f)return null;ga.copy(d),ga.applyMatrix4(c.matrixWorld);const p=t.ray.origin.distanceTo(ga);return p<t.near||p>t.far?null:{distance:p,point:ga.clone(),object:c}}(c,e,t,n,Sr,Io,Ro,h0);if(M){d&&(hu.fromBufferAttribute(d,p),fu.fromBufferAttribute(d,g),kd.fromBufferAttribute(d,y),M.uv=Pi.getUV(h0,Sr,Io,Ro,hu,fu,kd,new Ke)),f&&(hu.fromBufferAttribute(f,p),fu.fromBufferAttribute(f,g),kd.fromBufferAttribute(f,y),M.uv2=Pi.getUV(h0,Sr,Io,Ro,hu,fu,kd,new Ke));const T={a:p,b:g,c:y,normal:new Z,materialIndex:0};Pi.getNormal(Sr,Io,Ro,T.normal),M.face=T}return M}class ya extends jn{constructor(e=1,t=1,n=1,s=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:a,depthSegments:l};const d=this;s=Math.floor(s),a=Math.floor(a),l=Math.floor(l);const f=[],p=[],g=[],y=[];let x=0,M=0;function T(E,D,N,F,z,k,$,q,ae,U,Q){const he=k/ae,ge=$/U,Ye=k/2,st=$/2,be=q/2,He=ae+1,de=U+1;let Se=0,Ee=0;const we=new Z;for(let Pe=0;Pe<de;Pe++){const yt=Pe*ge-st;for(let ot=0;ot<He;ot++)we[E]=(ot*he-Ye)*F,we[D]=yt*z,we[N]=be,p.push(we.x,we.y,we.z),we[E]=0,we[D]=0,we[N]=q>0?1:-1,g.push(we.x,we.y,we.z),y.push(ot/ae),y.push(1-Pe/U),Se+=1}for(let Pe=0;Pe<U;Pe++)for(let yt=0;yt<ae;yt++){const wt=x+yt+He*(Pe+1),Dt=x+(yt+1)+He*(Pe+1),yn=x+(yt+1)+He*Pe;f.push(x+yt+He*Pe,wt,yn),f.push(wt,Dt,yn),Ee+=6}d.addGroup(M,Ee,Q),M+=Ee,x+=Se}T("z","y","x",-1,-1,n,t,e,l,a,0),T("z","y","x",1,-1,n,t,-e,l,a,1),T("x","z","y",1,1,e,n,t,s,l,2),T("x","z","y",1,-1,e,n,-t,s,l,3),T("x","y","z",1,-1,e,t,n,s,a,4),T("x","y","z",-1,-1,e,t,-n,s,a,5),this.setIndex(f),this.setAttribute("position",new tn(p,3)),this.setAttribute("normal",new tn(g,3)),this.setAttribute("uv",new tn(y,2))}static fromJSON(e){return new ya(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pu(c){const e={};for(const t in c){e[t]={};for(const n in c[t]){const s=c[t][n];e[t][n]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return e}function Nr(c){const e={};for(let t=0;t<c.length;t++){const n=pu(c[t]);for(const s in n)e[s]=n[s]}return e}const Hx={clone:pu,merge:Nr};class va extends Us{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pu(e.uniforms),this.uniformsGroups=function zx(c){const e=[];for(let t=0;t<c.length;t++)e.push(c[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;t.uniforms[s]=l&&l.isTexture?{type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?{type:"c",value:l.getHex()}:l&&l.isVector2?{type:"v2",value:l.toArray()}:l&&l.isVector3?{type:"v3",value:l.toArray()}:l&&l.isVector4?{type:"v4",value:l.toArray()}:l&&l.isMatrix3?{type:"m3",value:l.toArray()}:l&&l.isMatrix4?{type:"m4",value:l.toArray()}:{value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const s in this.extensions)!0===this.extensions[s]&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Bd extends Mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new On,this.projectionMatrix=new On,this.projectionMatrixInverse=new On}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class pr extends Bd{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ha*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Or*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ha*Math.atan(Math.tan(.5*Or*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,s,a,l){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Or*this.fov)/this.zoom,n=2*t,s=this.aspect*n,a=-.5*s;const l=this.view;if(null!==this.view&&this.view.enabled){const f=l.fullWidth,p=l.fullHeight;a+=l.offsetX*s/f,t-=l.offsetY*n/p,s*=l.width/f,n*=l.height/p}const d=this.filmOffset;0!==d&&(a+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Wx extends Mr{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const s=new pr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Z(1,0,0)),this.add(s);const a=new pr(90,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Z(-1,0,0)),this.add(a);const l=new pr(90,1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Z(0,1,0)),this.add(l);const d=new pr(90,1,e,t);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(new Z(0,-1,0)),this.add(d);const f=new pr(90,1,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Z(0,0,1)),this.add(f);const p=new pr(90,1,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new Z(0,0,-1)),this.add(p)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[s,a,l,d,f,p]=this.children,g=e.getRenderTarget(),y=e.toneMapping,x=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,s),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,l),e.setRenderTarget(n,3),e.render(t,d),e.setRenderTarget(n,4),e.render(t,f),n.texture.generateMipmaps=M,e.setRenderTarget(n,5),e.render(t,p),e.setRenderTarget(g),e.toneMapping=y,e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class Ud extends ks{constructor(e,t,n,s,a,l,d,f,p,g){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,s,a,l,d,f,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class p0 extends ms{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new Ud([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:qn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new ya(5,5,5),a=new va({name:"CubemapFromEquirect",uniforms:pu(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});a.uniforms.tEquirect.value=t;const l=new Er(s,a),d=t.minFilter;return t.minFilter===Os&&(t.minFilter=qn),new Wx(1,10,this).update(e,l),t.minFilter=d,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,s){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,s);e.setRenderTarget(a)}}const _a=new Z,m0=new Z,g0=new Vr;class Xl{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=_a.subVectors(n,t).cross(m0.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(_a),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||g0.getNormalMatrix(e),s=this.coplanarPoint(_a).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const zd=new jl,Kl=new Z;class Hm{constructor(e=new Xl,t=new Xl,n=new Xl,s=new Xl,a=new Xl,l=new Xl){this.planes=[e,t,n,s,a,l]}set(e,t,n,s,a,l){const d=this.planes;return d[0].copy(e),d[1].copy(t),d[2].copy(n),d[3].copy(s),d[4].copy(a),d[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,s=n[0],a=n[1],l=n[2],d=n[3],f=n[4],p=n[5],g=n[6],y=n[7],x=n[8],M=n[9],T=n[10],E=n[11],D=n[12],N=n[13],F=n[14],z=n[15];return t[0].setComponents(d-s,y-f,E-x,z-D).normalize(),t[1].setComponents(d+s,y+f,E+x,z+D).normalize(),t[2].setComponents(d+a,y+p,E+M,z+N).normalize(),t[3].setComponents(d-a,y-p,E-M,z-N).normalize(),t[4].setComponents(d-l,y-g,E-T,z-F).normalize(),t[5].setComponents(d+l,y+g,E+T,z+F).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),zd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(zd)}intersectsSprite(e){return zd.center.set(0,0,0),zd.radius=.7071067811865476,zd.applyMatrix4(e.matrixWorld),this.intersectsSphere(zd)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(Kl.x=s.normal.x>0?e.max.x:e.min.x,Kl.y=s.normal.y>0?e.max.y:e.min.y,Kl.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Kl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vm(){let c=null,e=!1,t=null,n=null;function s(a,l){t(a,l),n=c.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(n=c.requestAnimationFrame(s),e=!0)},stop:function(){c.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){c=a}}}function y0(c,e){const t=e.isWebGL2,n=new WeakMap;return{get:function l(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function d(p){p.isInterleavedBufferAttribute&&(p=p.data);const g=n.get(p);g&&(c.deleteBuffer(g.buffer),n.delete(p))},update:function f(p,g){if(p.isGLBufferAttribute){const x=n.get(p);return void((!x||x.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const y=n.get(p);void 0===y?n.set(p,function s(p,g){const y=p.array,x=p.usage,M=c.createBuffer();let T;if(c.bindBuffer(g,M),c.bufferData(g,y,x),p.onUploadCallback(),y instanceof Float32Array)T=5126;else if(y instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");T=5131}else T=5123;else if(y instanceof Int16Array)T=5122;else if(y instanceof Uint32Array)T=5125;else if(y instanceof Int32Array)T=5124;else if(y instanceof Int8Array)T=5120;else if(y instanceof Uint8Array)T=5121;else{if(!(y instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);T=5121}return{buffer:M,type:T,bytesPerElement:y.BYTES_PER_ELEMENT,version:p.version}}(p,g)):y.version<p.version&&(function a(p,g,y){const x=g.array,M=g.updateRange;c.bindBuffer(y,p),-1===M.count?c.bufferSubData(y,0,x):(t?c.bufferSubData(y,M.offset*x.BYTES_PER_ELEMENT,x,M.offset,M.count):c.bufferSubData(y,M.offset*x.BYTES_PER_ELEMENT,x.subarray(M.offset,M.offset+M.count)),M.count=-1)}(y.buffer,p,g),y.version=p.version)}}}class gu extends jn{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const a=e/2,l=t/2,d=Math.floor(n),f=Math.floor(s),p=d+1,g=f+1,y=e/d,x=t/f,M=[],T=[],E=[],D=[];for(let N=0;N<g;N++){const F=N*x-l;for(let z=0;z<p;z++)T.push(z*y-a,-F,0),E.push(0,0,1),D.push(z/d),D.push(1-N/f)}for(let N=0;N<f;N++)for(let F=0;F<d;F++){const k=F+p*(N+1),$=F+1+p*(N+1),q=F+1+p*N;M.push(F+p*N,k,q),M.push(k,$,q)}this.setIndex(M),this.setAttribute("position",new tn(T,3)),this.setAttribute("normal",new tn(E,3)),this.setAttribute("uv",new tn(D,2))}static fromJSON(e){return new gu(e.width,e.height,e.widthSegments,e.heightSegments)}}const $n={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ft={common:{diffuse:{value:new kt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vr},uv2Transform:{value:new Vr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Vr}},sprite:{diffuse:{value:new kt(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Vr}}},Gr={basic:{uniforms:Nr([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.fog]),vertexShader:$n.meshbasic_vert,fragmentShader:$n.meshbasic_frag},lambert:{uniforms:Nr([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.fog,Ft.lights,{emissive:{value:new kt(0)}}]),vertexShader:$n.meshlambert_vert,fragmentShader:$n.meshlambert_frag},phong:{uniforms:Nr([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:$n.meshphong_vert,fragmentShader:$n.meshphong_frag},standard:{uniforms:Nr([Ft.common,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.roughnessmap,Ft.metalnessmap,Ft.fog,Ft.lights,{emissive:{value:new kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag},toon:{uniforms:Nr([Ft.common,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.gradientmap,Ft.fog,Ft.lights,{emissive:{value:new kt(0)}}]),vertexShader:$n.meshtoon_vert,fragmentShader:$n.meshtoon_frag},matcap:{uniforms:Nr([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,{matcap:{value:null}}]),vertexShader:$n.meshmatcap_vert,fragmentShader:$n.meshmatcap_frag},points:{uniforms:Nr([Ft.points,Ft.fog]),vertexShader:$n.points_vert,fragmentShader:$n.points_frag},dashed:{uniforms:Nr([Ft.common,Ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$n.linedashed_vert,fragmentShader:$n.linedashed_frag},depth:{uniforms:Nr([Ft.common,Ft.displacementmap]),vertexShader:$n.depth_vert,fragmentShader:$n.depth_frag},normal:{uniforms:Nr([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,{opacity:{value:1}}]),vertexShader:$n.meshnormal_vert,fragmentShader:$n.meshnormal_frag},sprite:{uniforms:Nr([Ft.sprite,Ft.fog]),vertexShader:$n.sprite_vert,fragmentShader:$n.sprite_frag},background:{uniforms:{uvTransform:{value:new Vr},t2D:{value:null}},vertexShader:$n.background_vert,fragmentShader:$n.background_frag},cube:{uniforms:Nr([Ft.envmap,{opacity:{value:1}}]),vertexShader:$n.cube_vert,fragmentShader:$n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$n.equirect_vert,fragmentShader:$n.equirect_frag},distanceRGBA:{uniforms:Nr([Ft.common,Ft.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$n.distanceRGBA_vert,fragmentShader:$n.distanceRGBA_frag},shadow:{uniforms:Nr([Ft.lights,Ft.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:$n.shadow_vert,fragmentShader:$n.shadow_frag}};function ig(c,e,t,n,s,a){const l=new kt(0);let f,p,d=!0===s?0:1,g=null,y=0,x=null;function T(E,D){t.buffers.color.setClear(E.r,E.g,E.b,D,a)}return{getClearColor:function(){return l},setClearColor:function(E,D=1){l.set(E),d=D,T(l,d)},getClearAlpha:function(){return d},setClearAlpha:function(E){d=E,T(l,d)},render:function M(E,D){let N=!1,F=!0===D.isScene?D.background:null;F&&F.isTexture&&(F=e.get(F));const z=c.xr,k=z.getSession&&z.getSession();k&&"additive"===k.environmentBlendMode&&(F=null),null===F?T(l,d):F&&F.isColor&&(T(F,1),N=!0),(c.autoClear||N)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),F&&(F.isCubeTexture||306===F.mapping)?(void 0===p&&(p=new Er(new ya(1,1,1),new va({name:"BackgroundCubeMaterial",uniforms:pu(Gr.cube.uniforms),vertexShader:Gr.cube.vertexShader,fragmentShader:Gr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function($,q,ae){this.matrixWorld.copyPosition(ae.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(p)),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&!1===F.isRenderTargetTexture?-1:1,(g!==F||y!==F.version||x!==c.toneMapping)&&(p.material.needsUpdate=!0,g=F,y=F.version,x=c.toneMapping),p.layers.enableAll(),E.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(void 0===f&&(f=new Er(new gu(2,2),new va({name:"BackgroundMaterial",uniforms:pu(Gr.background.uniforms),vertexShader:Gr.background.vertexShader,fragmentShader:Gr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(f)),f.material.uniforms.t2D.value=F,!0===F.matrixAutoUpdate&&F.updateMatrix(),f.material.uniforms.uvTransform.value.copy(F.matrix),(g!==F||y!==F.version||x!==c.toneMapping)&&(f.material.needsUpdate=!0,g=F,y=F.version,x=c.toneMapping),f.layers.enableAll(),E.unshift(f,f.geometry,f.material,0,0,null))}}}function _u(c,e,t,n){const s=c.getParameter(34921),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),l=n.isWebGL2||null!==a,d={},f=D(null);let p=f,g=!1;function M(be){return n.isWebGL2?c.bindVertexArray(be):a.bindVertexArrayOES(be)}function T(be){return n.isWebGL2?c.deleteVertexArray(be):a.deleteVertexArrayOES(be)}function D(be){const He=[],de=[],Se=[];for(let Ee=0;Ee<s;Ee++)He[Ee]=0,de[Ee]=0,Se[Ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:He,enabledAttributes:de,attributeDivisors:Se,object:be,attributes:{},index:null}}function z(){const be=p.newAttributes;for(let He=0,de=be.length;He<de;He++)be[He]=0}function k(be){$(be,0)}function $(be,He){const Se=p.enabledAttributes,Ee=p.attributeDivisors;p.newAttributes[be]=1,0===Se[be]&&(c.enableVertexAttribArray(be),Se[be]=1),Ee[be]!==He&&((n.isWebGL2?c:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](be,He),Ee[be]=He)}function q(){const be=p.newAttributes,He=p.enabledAttributes;for(let de=0,Se=He.length;de<Se;de++)He[de]!==be[de]&&(c.disableVertexAttribArray(de),He[de]=0)}function ae(be,He,de,Se,Ee,we){!0!==n.isWebGL2||5124!==de&&5125!==de?c.vertexAttribPointer(be,He,de,Se,Ee,we):c.vertexAttribIPointer(be,He,de,Ee,we)}function Ye(){st(),g=!0,p!==f&&(p=f,M(p.object))}function st(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:function y(be,He,de,Se,Ee){let we=!1;if(l){const Pe=function E(be,He,de){const Se=!0===de.wireframe;let Ee=d[be.id];void 0===Ee&&(Ee={},d[be.id]=Ee);let we=Ee[He.id];void 0===we&&(we={},Ee[He.id]=we);let Pe=we[Se];return void 0===Pe&&(Pe=D(function x(){return n.isWebGL2?c.createVertexArray():a.createVertexArrayOES()}()),we[Se]=Pe),Pe}(Se,de,He);p!==Pe&&(p=Pe,M(p.object)),we=function N(be,He,de,Se){const Ee=p.attributes,we=He.attributes;let Pe=0;const yt=de.getAttributes();for(const ot in yt)if(yt[ot].location>=0){const Dt=Ee[ot];let yn=we[ot];if(void 0===yn&&("instanceMatrix"===ot&&be.instanceMatrix&&(yn=be.instanceMatrix),"instanceColor"===ot&&be.instanceColor&&(yn=be.instanceColor)),void 0===Dt||Dt.attribute!==yn||yn&&Dt.data!==yn.data)return!0;Pe++}return p.attributesNum!==Pe||p.index!==Se}(be,Se,de,Ee),we&&function F(be,He,de,Se){const Ee={},we=He.attributes;let Pe=0;const yt=de.getAttributes();for(const ot in yt)if(yt[ot].location>=0){let Dt=we[ot];void 0===Dt&&("instanceMatrix"===ot&&be.instanceMatrix&&(Dt=be.instanceMatrix),"instanceColor"===ot&&be.instanceColor&&(Dt=be.instanceColor));const yn={};yn.attribute=Dt,Dt&&Dt.data&&(yn.data=Dt.data),Ee[ot]=yn,Pe++}p.attributes=Ee,p.attributesNum=Pe,p.index=Se}(be,Se,de,Ee)}else{const Pe=!0===He.wireframe;(p.geometry!==Se.id||p.program!==de.id||p.wireframe!==Pe)&&(p.geometry=Se.id,p.program=de.id,p.wireframe=Pe,we=!0)}null!==Ee&&t.update(Ee,34963),(we||g)&&(g=!1,function U(be,He,de,Se){if(!1===n.isWebGL2&&(be.isInstancedMesh||Se.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;z();const Ee=Se.attributes,we=de.getAttributes(),Pe=He.defaultAttributeValues;for(const yt in we){const ot=we[yt];if(ot.location>=0){let wt=Ee[yt];if(void 0===wt&&("instanceMatrix"===yt&&be.instanceMatrix&&(wt=be.instanceMatrix),"instanceColor"===yt&&be.instanceColor&&(wt=be.instanceColor)),void 0!==wt){const Dt=wt.normalized,yn=wt.itemSize,tt=t.get(wt);if(void 0===tt)continue;const un=tt.buffer,an=tt.type,rn=tt.bytesPerElement;if(wt.isInterleavedBufferAttribute){const Bt=wt.data,kn=Bt.stride,lt=wt.offset;if(Bt.isInstancedInterleavedBuffer){for(let nt=0;nt<ot.locationSize;nt++)$(ot.location+nt,Bt.meshPerAttribute);!0!==be.isInstancedMesh&&void 0===Se._maxInstanceCount&&(Se._maxInstanceCount=Bt.meshPerAttribute*Bt.count)}else for(let nt=0;nt<ot.locationSize;nt++)k(ot.location+nt);c.bindBuffer(34962,un);for(let nt=0;nt<ot.locationSize;nt++)ae(ot.location+nt,yn/ot.locationSize,an,Dt,kn*rn,(lt+yn/ot.locationSize*nt)*rn)}else{if(wt.isInstancedBufferAttribute){for(let Bt=0;Bt<ot.locationSize;Bt++)$(ot.location+Bt,wt.meshPerAttribute);!0!==be.isInstancedMesh&&void 0===Se._maxInstanceCount&&(Se._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let Bt=0;Bt<ot.locationSize;Bt++)k(ot.location+Bt);c.bindBuffer(34962,un);for(let Bt=0;Bt<ot.locationSize;Bt++)ae(ot.location+Bt,yn/ot.locationSize,an,Dt,yn*rn,yn/ot.locationSize*Bt*rn)}}else if(void 0!==Pe){const Dt=Pe[yt];if(void 0!==Dt)switch(Dt.length){case 2:c.vertexAttrib2fv(ot.location,Dt);break;case 3:c.vertexAttrib3fv(ot.location,Dt);break;case 4:c.vertexAttrib4fv(ot.location,Dt);break;default:c.vertexAttrib1fv(ot.location,Dt)}}}}q()}(be,He,de,Se),null!==Ee&&c.bindBuffer(34963,t.get(Ee).buffer))},reset:Ye,resetDefaultState:st,dispose:function Q(){Ye();for(const be in d){const He=d[be];for(const de in He){const Se=He[de];for(const Ee in Se)T(Se[Ee].object),delete Se[Ee];delete He[de]}delete d[be]}},releaseStatesOfGeometry:function he(be){if(void 0===d[be.id])return;const He=d[be.id];for(const de in He){const Se=He[de];for(const Ee in Se)T(Se[Ee].object),delete Se[Ee];delete He[de]}delete d[be.id]},releaseStatesOfProgram:function ge(be){for(const He in d){const de=d[He];if(void 0===de[be.id])continue;const Se=de[be.id];for(const Ee in Se)T(Se[Ee].object),delete Se[Ee];delete de[be.id]}},initAttributes:z,enableAttribute:k,disableUnusedAttributes:q}}function $f(c,e,t,n){const s=n.isWebGL2;let a;this.setMode=function l(p){a=p},this.render=function d(p,g){c.drawArrays(a,p,g),t.update(g,a,1)},this.renderInstances=function f(p,g,y){if(0===y)return;let x,M;if(s)x=c,M="drawArraysInstanced";else if(x=e.get("ANGLE_instanced_arrays"),M="drawArraysInstancedANGLE",null===x)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");x[M](a,p,g,y),t.update(g,a,y)}}function Vd(c,e,t){let n;function a(ae){if("highp"===ae){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ae="mediump"}return"mediump"===ae&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&c instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&c instanceof WebGL2ComputeRenderingContext;let d=void 0!==t.precision?t.precision:"highp";const f=a(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);const p=l||e.has("WEBGL_draw_buffers"),g=!0===t.logarithmicDepthBuffer,y=c.getParameter(34930),x=c.getParameter(35660),M=c.getParameter(3379),T=c.getParameter(34076),E=c.getParameter(34921),D=c.getParameter(36347),N=c.getParameter(36348),F=c.getParameter(36349),z=x>0,k=l||e.has("OES_texture_float");return{isWebGL2:l,drawBuffers:p,getMaxAnisotropy:function s(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const ae=e.get("EXT_texture_filter_anisotropic");n=c.getParameter(ae.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:a,precision:d,logarithmicDepthBuffer:g,maxTextures:y,maxVertexTextures:x,maxTextureSize:M,maxCubemapSize:T,maxAttributes:E,maxVertexUniforms:D,maxVaryings:N,maxFragmentUniforms:F,vertexTextures:z,floatFragmentTextures:k,floatVertexTextures:z&&k,maxSamples:l?c.getParameter(36183):0}}function Ob(c){const e=this;let t=null,n=0,s=!1,a=!1;const l=new Xl,d=new Vr,f={value:null,needsUpdate:!1};function p(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(y,x,M,T){const E=null!==y?y.length:0;let D=null;if(0!==E){if(D=f.value,!0!==T||null===D){const N=M+4*E,F=x.matrixWorldInverse;d.getNormalMatrix(F),(null===D||D.length<N)&&(D=new Float32Array(N));for(let z=0,k=M;z!==E;++z,k+=4)l.copy(y[z]).applyMatrix4(F,d),l.normal.toArray(D,k),D[k+3]=l.constant}f.value=D,f.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,D}this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x,M){const T=0!==y.length||x||0!==n||s;return s=x,t=g(y,M,0),n=y.length,T},this.beginShadows=function(){a=!0,g(null)},this.endShadows=function(){a=!1,p()},this.setState=function(y,x,M){const T=y.clippingPlanes,E=y.clipIntersection,D=y.clipShadows,N=c.get(y);if(!s||null===T||0===T.length||a&&!D)a?g(null):p();else{const F=a?0:n,z=4*F;let k=N.clippingState||null;f.value=k,k=g(T,x,z,M);for(let $=0;$!==z;++$)k[$]=t[$];N.clippingState=k,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=F}}}function J0(c){let e=new WeakMap;function t(l,d){return 303===d?l.mapping=301:304===d&&(l.mapping=302),l}function s(l){const d=l.target;d.removeEventListener("dispose",s);const f=e.get(d);void 0!==f&&(e.delete(d),f.dispose())}return{get:function n(l){if(l&&l.isTexture&&!1===l.isRenderTargetTexture){const d=l.mapping;if(303===d||304===d){if(e.has(l))return t(e.get(l).texture,l.mapping);{const f=l.image;if(f&&f.height>0){const p=new p0(f.height/2);return p.fromEquirectangularTexture(c,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}return null}}}return l},dispose:function a(){e=new WeakMap}}}Gr.physical={uniforms:Nr([Gr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new kt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new kt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new kt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag};class Gd extends Bd{constructor(e=-1,t=1,n=1,s=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,a,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=n-e,l=n+e,d=s+t,f=s-t;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,l=a+p*this.view.width,d-=g*this.view.offsetY,f=d-g*this.view.height}this.projectionMatrix.makeOrthographic(a,l,d,f,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Yf=[.125,.215,.35,.446,.526,.582],Wd=new Gd,Q0=new kt;let ev=null;const ec=(1+Math.sqrt(5))/2,tc=1/ec,tv=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,ec,tc),new Z(0,ec,-tc),new Z(tc,0,ec),new Z(-tc,0,ec),new Z(ec,tc,0),new Z(-ec,tc,0)];class rg{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100){ev=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,s,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Nb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=sv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ev),e.scissorTest=!1,Fr(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),ev=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:Ce,format:qi,encoding:Qc,depthBuffer:!1},s=iv(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=iv(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function nv(c){const e=[],t=[],n=[];let s=c;const a=c-4+1+Yf.length;for(let l=0;l<a;l++){const d=Math.pow(2,s);t.push(d);let f=1/d;l>c-4?f=Yf[l-c+4-1]:0===l&&(f=0),n.push(f);const p=1/(d-2),g=-p,y=1+p,x=[g,g,y,g,y,y,g,g,y,y,g,y],M=6,T=6,E=3,D=2,N=1,F=new Float32Array(E*T*M),z=new Float32Array(D*T*M),k=new Float32Array(N*T*M);for(let q=0;q<M;q++){const ae=q%3*2/3-1,U=q>2?0:-1;F.set([ae,U,0,ae+2/3,U,0,ae+2/3,U+1,0,ae,U,0,ae+2/3,U+1,0,ae,U+1,0],E*T*q),z.set(x,D*T*q),k.set([q,q,q,q,q,q],N*T*q)}const $=new jn;$.setAttribute("position",new Gi(F,E)),$.setAttribute("uv",new Gi(z,D)),$.setAttribute("faceIndex",new Gi(k,N)),e.push($),s>4&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(a)),this._blurMaterial=function rv(c,e,t){const n=new Float32Array(20),s=new Z(0,1,0);return new va({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(a,e,t)}return s}_compileMaterial(e){const t=new Er(this._lodPlanes[0],e);this._renderer.compile(t,Wd)}_sceneToCubeUV(e,t,n,s){const d=new pr(90,1,t,n),f=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,x=g.toneMapping;g.getClearColor(Q0),g.toneMapping=0,g.autoClear=!1;const M=new Jr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),T=new Er(new ya,M);let E=!1;const D=e.background;D?D.isColor&&(M.color.copy(D),e.background=null,E=!0):(M.color.copy(Q0),E=!0);for(let N=0;N<6;N++){const F=N%3;0===F?(d.up.set(0,f[N],0),d.lookAt(p[N],0,0)):1===F?(d.up.set(0,0,f[N]),d.lookAt(0,p[N],0)):(d.up.set(0,f[N],0),d.lookAt(0,0,p[N]));const z=this._cubeSize;Fr(s,F*z,N>2?z:0,z,z),g.setRenderTarget(s),E&&g.render(T,d),g.render(e,d)}T.geometry.dispose(),T.material.dispose(),g.toneMapping=x,g.autoClear=y,e.background=D}_textureToCubeUV(e,t){const n=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=Nb()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=sv());const a=s?this._cubemapMaterial:this._equirectMaterial,l=new Er(this._lodPlanes[0],a);a.uniforms.envMap.value=e;const f=this._cubeSize;Fr(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(l,Wd)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,a,tv[(s-1)%tv.length])}t.autoClear=n}_blur(e,t,n,s,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,s,"latitudinal",a),this._halfBlur(l,e,n,n,s,"longitudinal",a)}_halfBlur(e,t,n,s,a,l,d){const f=this._renderer,p=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");const y=new Er(this._lodPlanes[s],p),x=p.uniforms,M=this._sizeLods[n]-1,T=isFinite(a)?Math.PI/(2*M):2*Math.PI/39,E=a/T,D=isFinite(a)?1+Math.floor(3*E):20;D>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${D} samples when the maximum is set to 20`);const N=[];let F=0;for(let ae=0;ae<20;++ae){const U=ae/E,Q=Math.exp(-U*U/2);N.push(Q),0===ae?F+=Q:ae<D&&(F+=2*Q)}for(let ae=0;ae<N.length;ae++)N[ae]=N[ae]/F;x.envMap.value=e.texture,x.samples.value=D,x.weights.value=N,x.latitudinal.value="latitudinal"===l,d&&(x.poleAxis.value=d);const{_lodMax:z}=this;x.dTheta.value=T,x.mipInt.value=z-n;const k=this._sizeLods[s];Fr(t,3*k*(s>z-4?s-z+4:0),4*(this._cubeSize-k),3*k,2*k),f.setRenderTarget(t),f.render(y,Wd)}}function iv(c,e,t){const n=new ms(c,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Fr(c,e,t,n,s){c.viewport.set(e,t,n,s),c.scissor.set(e,t,n,s)}function sv(){return new va({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Nb(){return new va({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function og(c){let e=new WeakMap,t=null;function a(d){const f=d.target;f.removeEventListener("dispose",a);const p=e.get(f);void 0!==p&&(e.delete(f),p.dispose())}return{get:function n(d){if(d&&d.isTexture){const f=d.mapping,p=303===f||304===f,g=301===f||302===f;if(p||g){if(d.isRenderTargetTexture&&!0===d.needsPMREMUpdate){d.needsPMREMUpdate=!1;let y=e.get(d);return null===t&&(t=new rg(c)),y=p?t.fromEquirectangular(d,y):t.fromCubemap(d,y),e.set(d,y),y.texture}if(e.has(d))return e.get(d).texture;{const y=d.image;if(p&&y&&y.height>0||g&&y&&function s(d){let f=0;for(let g=0;g<6;g++)void 0!==d[g]&&f++;return 6===f}(y)){null===t&&(t=new rg(c));const x=p?t.fromEquirectangular(d):t.fromCubemap(d);return e.set(d,x),d.addEventListener("dispose",a),x.texture}return null}}}return d},dispose:function l(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function ov(c){const e={};function t(n){if(void 0!==e[n])return e[n];let s;switch(n){case"WEBGL_depth_texture":s=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=c.getExtension(n)}return e[n]=s,s}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const s=t(n);return null===s&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function Fb(c,e,t,n){const s={},a=new WeakMap;function l(y){const x=y.target;null!==x.index&&e.remove(x.index);for(const T in x.attributes)e.remove(x.attributes[T]);x.removeEventListener("dispose",l),delete s[x.id];const M=a.get(x);M&&(e.remove(M),a.delete(x)),n.releaseStatesOfGeometry(x),!0===x.isInstancedBufferGeometry&&delete x._maxInstanceCount,t.memory.geometries--}function p(y){const x=[],M=y.index,T=y.attributes.position;let E=0;if(null!==M){const F=M.array;E=M.version;for(let z=0,k=F.length;z<k;z+=3){const $=F[z+0],q=F[z+1],ae=F[z+2];x.push($,q,q,ae,ae,$)}}else{E=T.version;for(let z=0,k=T.array.length/3-1;z<k;z+=3){const $=z+0,q=z+1,ae=z+2;x.push($,q,q,ae,ae,$)}}const D=new(bm(x)?km:Fm)(x,1);D.version=E;const N=a.get(y);N&&e.remove(N),a.set(y,D)}return{get:function d(y,x){return!0===s[x.id]||(x.addEventListener("dispose",l),s[x.id]=!0,t.memory.geometries++),x},update:function f(y){const x=y.attributes;for(const T in x)e.update(x[T],34962);const M=y.morphAttributes;for(const T in M){const E=M[T];for(let D=0,N=E.length;D<N;D++)e.update(E[D],34962)}},getWireframeAttribute:function g(y){const x=a.get(y);if(x){const M=y.index;null!==M&&x.version<M.version&&p(y)}else p(y);return a.get(y)}}}function kb(c,e,t,n){const s=n.isWebGL2;let a,d,f;this.setMode=function l(x){a=x},this.setIndex=function p(x){d=x.type,f=x.bytesPerElement},this.render=function g(x,M){c.drawElements(a,M,d,x*f),t.update(M,a,1)},this.renderInstances=function y(x,M,T){if(0===T)return;let E,D;if(s)E=c,D="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),D="drawElementsInstancedANGLE",null===E)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[D](a,M,d,x*f,T),t.update(M,a,T)}}function Bb(c){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(a,l,d){switch(t.calls++,l){case 4:t.triangles+=d*(a/3);break;case 1:t.lines+=d*(a/2);break;case 3:t.lines+=d*(a-1);break;case 2:t.lines+=d*a;break;case 0:t.points+=d*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l)}}}}function av(c,e){return c[0]-e[0]}function Ub(c,e){return Math.abs(e[1])-Math.abs(c[1])}function qf(c,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Uint8Array?t=255:n instanceof Uint16Array?t=65535:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),c.divideScalar(t)}function zb(c,e,t){const n={},s=new Float32Array(8),a=new WeakMap,l=new hi,d=[];for(let p=0;p<8;p++)d[p]=[p,0];return{update:function f(p,g,y,x){const M=p.morphTargetInfluences;if(!0===e.isWebGL2){const T=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,E=void 0!==T?T.length:0;let D=a.get(g);if(void 0===D||D.count!==E){let He=function(){st.dispose(),a.delete(g),g.removeEventListener("dispose",He)};void 0!==D&&D.texture.dispose();const z=void 0!==g.morphAttributes.position,k=void 0!==g.morphAttributes.normal,$=void 0!==g.morphAttributes.color,q=g.morphAttributes.position||[],ae=g.morphAttributes.normal||[],U=g.morphAttributes.color||[];let Q=0;!0===z&&(Q=1),!0===k&&(Q=2),!0===$&&(Q=3);let he=g.attributes.position.count*Q,ge=1;he>e.maxTextureSize&&(ge=Math.ceil(he/e.maxTextureSize),he=e.maxTextureSize);const Ye=new Float32Array(he*ge*4*E),st=new Sm(Ye,he,ge,E);st.type=re,st.needsUpdate=!0;const be=4*Q;for(let de=0;de<E;de++){const Se=q[de],Ee=ae[de],we=U[de],Pe=he*ge*4*de;for(let yt=0;yt<Se.count;yt++){const ot=yt*be;!0===z&&(l.fromBufferAttribute(Se,yt),!0===Se.normalized&&qf(l,Se),Ye[Pe+ot+0]=l.x,Ye[Pe+ot+1]=l.y,Ye[Pe+ot+2]=l.z,Ye[Pe+ot+3]=0),!0===k&&(l.fromBufferAttribute(Ee,yt),!0===Ee.normalized&&qf(l,Ee),Ye[Pe+ot+4]=l.x,Ye[Pe+ot+5]=l.y,Ye[Pe+ot+6]=l.z,Ye[Pe+ot+7]=0),!0===$&&(l.fromBufferAttribute(we,yt),!0===we.normalized&&qf(l,we),Ye[Pe+ot+8]=l.x,Ye[Pe+ot+9]=l.y,Ye[Pe+ot+10]=l.z,Ye[Pe+ot+11]=4===we.itemSize?l.w:1)}}D={count:E,texture:st,size:new Ke(he,ge)},a.set(g,D),g.addEventListener("dispose",He)}let N=0;for(let z=0;z<M.length;z++)N+=M[z];const F=g.morphTargetsRelative?1:1-N;x.getUniforms().setValue(c,"morphTargetBaseInfluence",F),x.getUniforms().setValue(c,"morphTargetInfluences",M),x.getUniforms().setValue(c,"morphTargetsTexture",D.texture,t),x.getUniforms().setValue(c,"morphTargetsTextureSize",D.size)}else{const T=void 0===M?0:M.length;let E=n[g.id];if(void 0===E||E.length!==T){E=[];for(let k=0;k<T;k++)E[k]=[k,0];n[g.id]=E}for(let k=0;k<T;k++){const $=E[k];$[0]=k,$[1]=M[k]}E.sort(Ub);for(let k=0;k<8;k++)k<T&&E[k][1]?(d[k][0]=E[k][0],d[k][1]=E[k][1]):(d[k][0]=Number.MAX_SAFE_INTEGER,d[k][1]=0);d.sort(av);const D=g.morphAttributes.position,N=g.morphAttributes.normal;let F=0;for(let k=0;k<8;k++){const $=d[k],q=$[0],ae=$[1];q!==Number.MAX_SAFE_INTEGER&&ae?(D&&g.getAttribute("morphTarget"+k)!==D[q]&&g.setAttribute("morphTarget"+k,D[q]),N&&g.getAttribute("morphNormal"+k)!==N[q]&&g.setAttribute("morphNormal"+k,N[q]),s[k]=ae,F+=ae):(D&&!0===g.hasAttribute("morphTarget"+k)&&g.deleteAttribute("morphTarget"+k),N&&!0===g.hasAttribute("morphNormal"+k)&&g.deleteAttribute("morphNormal"+k),s[k]=0)}const z=g.morphTargetsRelative?1:1-F;x.getUniforms().setValue(c,"morphTargetBaseInfluence",z),x.getUniforms().setValue(c,"morphTargetInfluences",s)}}}}function Hb(c,e,t,n){let s=new WeakMap;function d(f){const p=f.target;p.removeEventListener("dispose",d),t.remove(p.instanceMatrix),null!==p.instanceColor&&t.remove(p.instanceColor)}return{update:function a(f){const p=n.render.frame,y=e.get(f,f.geometry);return s.get(y)!==p&&(e.update(y),s.set(y,p)),f.isInstancedMesh&&(!1===f.hasEventListener("dispose",d)&&f.addEventListener("dispose",d),t.update(f.instanceMatrix,34962),null!==f.instanceColor&&t.update(f.instanceColor,34962)),y},dispose:function l(){s=new WeakMap}}}const ag=new ks,lg=new Sm,lv=new Id,ao=new Ud,Xf=[],cv=[],uv=new Float32Array(16),Vb=new Float32Array(9),cg=new Float32Array(4);function xu(c,e,t){const n=c[0];if(n<=0||n>0)return c;const s=e*t;let a=Xf[s];if(void 0===a&&(a=new Float32Array(s),Xf[s]=a),0!==e){n.toArray(a,0);for(let l=1,d=0;l!==e;++l)d+=t,c[l].toArray(a,d)}return a}function Wr(c,e){if(c.length!==e.length)return!1;for(let t=0,n=c.length;t<n;t++)if(c[t]!==e[t])return!1;return!0}function jr(c,e){for(let t=0,n=e.length;t<n;t++)c[t]=e[t]}function bu(c,e){let t=cv[e];void 0===t&&(t=new Int32Array(e),cv[e]=t);for(let n=0;n!==e;++n)t[n]=c.allocateTextureUnit();return t}function Gb(c,e){const t=this.cache;t[0]!==e&&(c.uniform1f(this.addr,e),t[0]=e)}function Wb(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(c.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wr(t,e))return;c.uniform2fv(this.addr,e),jr(t,e)}}function Kf(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(c.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(c.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wr(t,e))return;c.uniform3fv(this.addr,e),jr(t,e)}}function ug(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(c.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wr(t,e))return;c.uniform4fv(this.addr,e),jr(t,e)}}function jb(c,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;c.uniformMatrix2fv(this.addr,!1,e),jr(t,e)}else{if(Wr(t,n))return;cg.set(n),c.uniformMatrix2fv(this.addr,!1,cg),jr(t,n)}}function dv(c,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;c.uniformMatrix3fv(this.addr,!1,e),jr(t,e)}else{if(Wr(t,n))return;Vb.set(n),c.uniformMatrix3fv(this.addr,!1,Vb),jr(t,n)}}function dg(c,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;c.uniformMatrix4fv(this.addr,!1,e),jr(t,e)}else{if(Wr(t,n))return;uv.set(n),c.uniformMatrix4fv(this.addr,!1,uv),jr(t,n)}}function hv(c,e){const t=this.cache;t[0]!==e&&(c.uniform1i(this.addr,e),t[0]=e)}function uE(c,e){const t=this.cache;Wr(t,e)||(c.uniform2iv(this.addr,e),jr(t,e))}function dE(c,e){const t=this.cache;Wr(t,e)||(c.uniform3iv(this.addr,e),jr(t,e))}function hg(c,e){const t=this.cache;Wr(t,e)||(c.uniform4iv(this.addr,e),jr(t,e))}function hE(c,e){const t=this.cache;t[0]!==e&&(c.uniform1ui(this.addr,e),t[0]=e)}function $b(c,e){const t=this.cache;Wr(t,e)||(c.uniform2uiv(this.addr,e),jr(t,e))}function fv(c,e){const t=this.cache;Wr(t,e)||(c.uniform3uiv(this.addr,e),jr(t,e))}function pv(c,e){const t=this.cache;Wr(t,e)||(c.uniform4uiv(this.addr,e),jr(t,e))}function mv(c,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(c.uniform1i(this.addr,s),n[0]=s),t.setTexture2D(e||ag,s)}function gv(c,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(c.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||lv,s)}function fg(c,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(c.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||ao,s)}function ba(c,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(c.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||lg,s)}function Jf(c,e){c.uniform1fv(this.addr,e)}function jd(c,e){const t=xu(e,this.size,2);c.uniform2fv(this.addr,t)}function Yb(c,e){const t=xu(e,this.size,3);c.uniform3fv(this.addr,t)}function pg(c,e){const t=xu(e,this.size,4);c.uniform4fv(this.addr,t)}function yv(c,e){const t=xu(e,this.size,4);c.uniformMatrix2fv(this.addr,!1,t)}function qb(c,e){const t=xu(e,this.size,9);c.uniformMatrix3fv(this.addr,!1,t)}function Xb(c,e){const t=xu(e,this.size,16);c.uniformMatrix4fv(this.addr,!1,t)}function $d(c,e){c.uniform1iv(this.addr,e)}function Kb(c,e){c.uniform2iv(this.addr,e)}function fE(c,e){c.uniform3iv(this.addr,e)}function Zb(c,e){c.uniform4iv(this.addr,e)}function pE(c,e){c.uniform1uiv(this.addr,e)}function Jb(c,e){c.uniform2uiv(this.addr,e)}function Qb(c,e){c.uniform3uiv(this.addr,e)}function ew(c,e){c.uniform4uiv(this.addr,e)}function tw(c,e,t){const n=e.length,s=bu(t,n);c.uniform1iv(this.addr,s);for(let a=0;a!==n;++a)t.setTexture2D(e[a]||ag,s[a])}function mE(c,e,t){const n=e.length,s=bu(t,n);c.uniform1iv(this.addr,s);for(let a=0;a!==n;++a)t.setTexture3D(e[a]||lv,s[a])}function vv(c,e,t){const n=e.length,s=bu(t,n);c.uniform1iv(this.addr,s);for(let a=0;a!==n;++a)t.setTextureCube(e[a]||ao,s[a])}function mg(c,e,t){const n=e.length,s=bu(t,n);c.uniform1iv(this.addr,s);for(let a=0;a!==n;++a)t.setTexture2DArray(e[a]||lg,s[a])}class gg{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function Zf(c){switch(c){case 5126:return Gb;case 35664:return Wb;case 35665:return Kf;case 35666:return ug;case 35674:return jb;case 35675:return dv;case 35676:return dg;case 5124:case 35670:return hv;case 35667:case 35671:return uE;case 35668:case 35672:return dE;case 35669:case 35673:return hg;case 5125:return hE;case 36294:return $b;case 36295:return fv;case 36296:return pv;case 35678:case 36198:case 36298:case 36306:case 35682:return mv;case 35679:case 36299:case 36307:return gv;case 35680:case 36300:case 36308:case 36293:return fg;case 36289:case 36303:case 36311:case 36292:return ba}}(t.type)}}class iw{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function nw(c){switch(c){case 5126:return Jf;case 35664:return jd;case 35665:return Yb;case 35666:return pg;case 35674:return yv;case 35675:return qb;case 35676:return Xb;case 5124:case 35670:return $d;case 35667:case 35671:return Kb;case 35668:case 35672:return fE;case 35669:case 35673:return Zb;case 5125:return pE;case 36294:return Jb;case 36295:return Qb;case 36296:return ew;case 35678:case 36198:case 36298:case 36306:case 35682:return tw;case 35679:case 36299:case 36307:return mE;case 35680:case 36300:case 36308:case 36293:return vv;case 36289:case 36303:case 36311:case 36292:return mg}}(t.type)}}class rw{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let a=0,l=s.length;a!==l;++a){const d=s[a];d.setValue(e,t[d.id],n)}}}const yg=/(\w+)(\])?(\[|\.)?/g;function _v(c,e){c.seq.push(e),c.map[e.id]=e}function sw(c,e,t){const n=c.name,s=n.length;for(yg.lastIndex=0;;){const a=yg.exec(n),l=yg.lastIndex;let d=a[1];const p=a[3];if("]"===a[2]&&(d|=0),void 0===p||"["===p&&l+2===s){_v(t,void 0===p?new gg(d,c,e):new iw(d,c,e));break}{let y=t.map[d];void 0===y&&(y=new rw(d),_v(t,y)),t=y}}}class Qf{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let s=0;s<n;++s){const a=e.getActiveUniform(t,s);sw(a,e.getUniformLocation(t,a.name),this)}}setValue(e,t,n,s){const a=this.map[t];void 0!==a&&a.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];void 0!==s&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let a=0,l=t.length;a!==l;++a){const d=t[a],f=n[d.id];!1!==f.needsUpdate&&d.setValue(e,f.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,a=e.length;s!==a;++s){const l=e[s];l.id in t&&n.push(l)}return n}}function Yd(c,e,t){const n=c.createShader(e);return c.shaderSource(n,t),c.compileShader(n),n}let nc=0;function xv(c,e,t){const n=c.getShaderParameter(e,35713),s=c.getShaderInfoLog(e).trim();if(n&&""===s)return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const l=parseInt(a[1]);return t.toUpperCase()+"\n\n"+s+"\n\n"+function gE(c,e){const t=c.split("\n"),n=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=s;l<a;l++){const d=l+1;n.push(`${d===e?">":" "} ${d}: ${t[l]}`)}return n.join("\n")}(c.getShaderSource(e),l)}return s}function ow(c,e){const t=function qd(c){switch(c){case Qc:return["Linear","( value )"];case di:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(e);return"vec4 "+c+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function vg(c,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+c+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rr(c){return""!==c}function Qa(c,e){return c.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kd(c,e){return c.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hs=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zd(c){return c.replace(Hs,wu)}function wu(c,e){const t=$n[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Zd(t)}const Mu=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Su=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ic(c){return c.replace(Su,rc).replace(Mu,Eu)}function Eu(c,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),rc(0,e,t,n)}function rc(c,e,t,n){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function sc(c){let e="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?e+="\n#define HIGH_PRECISION":"mediump"===c.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(e+="\n#define LOW_PRECISION"),e}function Sv(c,e,t,n){const s=c.getContext(),a=t.defines;let l=t.vertexShader,d=t.fragmentShader;const f=function Du(c){let e="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),p=function Tu(c){let e="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),g=function bv(c){let e="ENVMAP_MODE_REFLECTION";return c.envMap&&302===c.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),y=function wv(c){let e="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),x=function Mv(c){const e=c.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),M=t.isWebGL2?"":function aw(c){return[c.extensionDerivatives||c.envMapCubeUVHeight||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rr).join("\n")}(t),T=function Po(c){const e=[];for(const t in c){const n=c[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(a),E=s.createProgram();let D,N,F=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(D=[T].filter(rr).join("\n"),D.length>0&&(D+="\n"),N=[M,T].filter(rr).join("\n"),N.length>0&&(N+="\n")):(D=[sc(t),"#define SHADER_NAME "+t.shaderName,T,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rr).join("\n"),N=[M,sc(t),"#define SHADER_NAME "+t.shaderName,T,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?$n.tonemapping_pars_fragment:"",0!==t.toneMapping?vg("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$n.encodings_pars_fragment,ow("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(rr).join("\n")),l=Zd(l),l=Qa(l,t),l=Kd(l,t),d=Zd(d),d=Qa(d,t),d=Kd(d,t),l=ic(l),d=ic(d),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(F="#version 300 es\n",D=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+D,N=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+N);const k=F+N+d,$=Yd(s,35633,F+D+l),q=Yd(s,35632,k);if(s.attachShader(E,$),s.attachShader(E,q),void 0!==t.index0AttributeName?s.bindAttribLocation(E,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E),c.debug.checkShaderErrors){const Q=s.getProgramInfoLog(E).trim(),he=s.getShaderInfoLog($).trim(),ge=s.getShaderInfoLog(q).trim();let Ye=!0,st=!0;if(!1===s.getProgramParameter(E,35714)){Ye=!1;const be=xv(s,$,"vertex"),He=xv(s,q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(E,35715)+"\n\nProgram Info Log: "+Q+"\n"+be+"\n"+He)}else""!==Q?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(""===he||""===ge)&&(st=!1);st&&(this.diagnostics={runnable:Ye,programLog:Q,vertexShader:{log:he,prefix:D},fragmentShader:{log:ge,prefix:N}})}let ae,U;return s.deleteShader($),s.deleteShader(q),this.getUniforms=function(){return void 0===ae&&(ae=new Qf(s,E)),ae},this.getAttributes=function(){return void 0===U&&(U=function Xd(c,e){const t={},n=c.getProgramParameter(e,35721);for(let s=0;s<n;s++){const a=c.getActiveAttrib(e,s),l=a.name;let d=1;35674===a.type&&(d=2),35675===a.type&&(d=3),35676===a.type&&(d=4),t[l]={type:a.type,location:c.getAttribLocation(e,l),locationSize:d}}return t}(s,E)),U},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(E),this.program=void 0},this.name=t.shaderName,this.id=nc++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=$,this.fragmentShader=q,this}let Ev=0;class Dv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,s=this._getShaderStage(e.vertexShader),a=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return!1===l.has(s)&&(l.add(s),s.usedTimes++),!1===l.has(a)&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new Tv(e);t.set(e,n)}return t.get(e)}}class Tv{constructor(e){this.id=Ev++,this.code=e,this.usedTimes=0}}function Cv(c,e,t,n,s,a,l){const d=new Am,f=new Dv,p=[],g=s.isWebGL2,y=s.logarithmicDepthBuffer,x=s.vertexTextures;let M=s.precision;const T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function E(U,Q,he,ge,Ye){const st=ge.fog,be=Ye.geometry,de=(U.isMeshStandardMaterial?t:e).get(U.envMap||(U.isMeshStandardMaterial?ge.environment:null)),Se=de&&306===de.mapping?de.image.height:null,Ee=T[U.type];null!==U.precision&&(M=s.getMaxPrecision(U.precision),M!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",M,"instead."));const we=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Pe=void 0!==we?we.length:0;let ot,wt,Dt,yn,yt=0;if(void 0!==be.morphAttributes.position&&(yt=1),void 0!==be.morphAttributes.normal&&(yt=2),void 0!==be.morphAttributes.color&&(yt=3),Ee){const kn=Gr[Ee];ot=kn.vertexShader,wt=kn.fragmentShader}else ot=U.vertexShader,wt=U.fragmentShader,f.update(U),Dt=f.getVertexShaderID(U),yn=f.getFragmentShaderID(U);const tt=c.getRenderTarget(),an=U.clearcoat>0,rn=U.iridescence>0;return{isWebGL2:g,shaderID:Ee,shaderName:U.type,vertexShader:ot,fragmentShader:wt,defines:U.defines,customVertexShaderID:Dt,customFragmentShaderID:yn,isRawShaderMaterial:!0===U.isRawShaderMaterial,glslVersion:U.glslVersion,precision:M,instancing:!0===Ye.isInstancedMesh,instancingColor:!0===Ye.isInstancedMesh&&null!==Ye.instanceColor,supportsVertexTextures:x,outputEncoding:null===tt?c.outputEncoding:!0===tt.isXRRenderTarget?tt.texture.encoding:Qc,map:!!U.map,matcap:!!U.matcap,envMap:!!de,envMapMode:de&&de.mapping,envMapCubeUVHeight:Se,lightMap:!!U.lightMap,aoMap:!!U.aoMap,emissiveMap:!!U.emissiveMap,bumpMap:!!U.bumpMap,normalMap:!!U.normalMap,objectSpaceNormalMap:1===U.normalMapType,tangentSpaceNormalMap:0===U.normalMapType,decodeVideoTexture:!!U.map&&!0===U.map.isVideoTexture&&U.map.encoding===di,clearcoat:an,clearcoatMap:an&&!!U.clearcoatMap,clearcoatRoughnessMap:an&&!!U.clearcoatRoughnessMap,clearcoatNormalMap:an&&!!U.clearcoatNormalMap,iridescence:rn,iridescenceMap:rn&&!!U.iridescenceMap,iridescenceThicknessMap:rn&&!!U.iridescenceThicknessMap,displacementMap:!!U.displacementMap,roughnessMap:!!U.roughnessMap,metalnessMap:!!U.metalnessMap,specularMap:!!U.specularMap,specularIntensityMap:!!U.specularIntensityMap,specularColorMap:!!U.specularColorMap,opaque:!1===U.transparent&&1===U.blending,alphaMap:!!U.alphaMap,alphaTest:U.alphaTest>0,gradientMap:!!U.gradientMap,sheen:U.sheen>0,sheenColorMap:!!U.sheenColorMap,sheenRoughnessMap:!!U.sheenRoughnessMap,transmission:U.transmission>0,transmissionMap:!!U.transmissionMap,thicknessMap:!!U.thicknessMap,combine:U.combine,vertexTangents:!!U.normalMap&&!!be.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:!0===U.vertexColors&&!!be.attributes.color&&4===be.attributes.color.itemSize,vertexUvs:!!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatMap||U.clearcoatRoughnessMap||U.clearcoatNormalMap||U.iridescenceMap||U.iridescenceThicknessMap||U.displacementMap||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularColorMap||U.sheenColorMap||U.sheenRoughnessMap),uvsVertexOnly:!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatNormalMap||U.iridescenceMap||U.iridescenceThicknessMap||U.transmission>0||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularColorMap||U.sheen>0||U.sheenColorMap||U.sheenRoughnessMap||!U.displacementMap),fog:!!st,useFog:!0===U.fog,fogExp2:st&&st.isFogExp2,flatShading:!!U.flatShading,sizeAttenuation:U.sizeAttenuation,logarithmicDepthBuffer:y,skinning:!0===Ye.isSkinnedMesh,morphTargets:void 0!==be.morphAttributes.position,morphNormals:void 0!==be.morphAttributes.normal,morphColors:void 0!==be.morphAttributes.color,morphTargetsCount:Pe,morphTextureStride:yt,numDirLights:Q.directional.length,numPointLights:Q.point.length,numSpotLights:Q.spot.length,numRectAreaLights:Q.rectArea.length,numHemiLights:Q.hemi.length,numDirLightShadows:Q.directionalShadowMap.length,numPointLightShadows:Q.pointShadowMap.length,numSpotLightShadows:Q.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:U.dithering,shadowMapEnabled:c.shadowMap.enabled&&he.length>0,shadowMapType:c.shadowMap.type,toneMapping:U.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:2===U.side,flipSided:1===U.side,useDepthPacking:!!U.depthPacking,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:U.extensions&&U.extensions.derivatives,extensionFragDepth:U.extensions&&U.extensions.fragDepth,extensionDrawBuffers:U.extensions&&U.extensions.drawBuffers,extensionShaderTextureLOD:U.extensions&&U.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||n.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}},getProgramCacheKey:function D(U){const Q=[];if(U.shaderID?Q.push(U.shaderID):(Q.push(U.customVertexShaderID),Q.push(U.customFragmentShaderID)),void 0!==U.defines)for(const he in U.defines)Q.push(he),Q.push(U.defines[he]);return!1===U.isRawShaderMaterial&&(function N(U,Q){U.push(Q.precision),U.push(Q.outputEncoding),U.push(Q.envMapMode),U.push(Q.envMapCubeUVHeight),U.push(Q.combine),U.push(Q.vertexUvs),U.push(Q.fogExp2),U.push(Q.sizeAttenuation),U.push(Q.morphTargetsCount),U.push(Q.morphAttributeCount),U.push(Q.numDirLights),U.push(Q.numPointLights),U.push(Q.numSpotLights),U.push(Q.numHemiLights),U.push(Q.numRectAreaLights),U.push(Q.numDirLightShadows),U.push(Q.numPointLightShadows),U.push(Q.numSpotLightShadows),U.push(Q.shadowMapType),U.push(Q.toneMapping),U.push(Q.numClippingPlanes),U.push(Q.numClipIntersection),U.push(Q.depthPacking)}(Q,U),function F(U,Q){d.disableAll(),Q.isWebGL2&&d.enable(0),Q.supportsVertexTextures&&d.enable(1),Q.instancing&&d.enable(2),Q.instancingColor&&d.enable(3),Q.map&&d.enable(4),Q.matcap&&d.enable(5),Q.envMap&&d.enable(6),Q.lightMap&&d.enable(7),Q.aoMap&&d.enable(8),Q.emissiveMap&&d.enable(9),Q.bumpMap&&d.enable(10),Q.normalMap&&d.enable(11),Q.objectSpaceNormalMap&&d.enable(12),Q.tangentSpaceNormalMap&&d.enable(13),Q.clearcoat&&d.enable(14),Q.clearcoatMap&&d.enable(15),Q.clearcoatRoughnessMap&&d.enable(16),Q.clearcoatNormalMap&&d.enable(17),Q.iridescence&&d.enable(18),Q.iridescenceMap&&d.enable(19),Q.iridescenceThicknessMap&&d.enable(20),Q.displacementMap&&d.enable(21),Q.specularMap&&d.enable(22),Q.roughnessMap&&d.enable(23),Q.metalnessMap&&d.enable(24),Q.gradientMap&&d.enable(25),Q.alphaMap&&d.enable(26),Q.alphaTest&&d.enable(27),Q.vertexColors&&d.enable(28),Q.vertexAlphas&&d.enable(29),Q.vertexUvs&&d.enable(30),Q.vertexTangents&&d.enable(31),Q.uvsVertexOnly&&d.enable(32),Q.fog&&d.enable(33),U.push(d.mask),d.disableAll(),Q.useFog&&d.enable(0),Q.flatShading&&d.enable(1),Q.logarithmicDepthBuffer&&d.enable(2),Q.skinning&&d.enable(3),Q.morphTargets&&d.enable(4),Q.morphNormals&&d.enable(5),Q.morphColors&&d.enable(6),Q.premultipliedAlpha&&d.enable(7),Q.shadowMapEnabled&&d.enable(8),Q.physicallyCorrectLights&&d.enable(9),Q.doubleSided&&d.enable(10),Q.flipSided&&d.enable(11),Q.useDepthPacking&&d.enable(12),Q.dithering&&d.enable(13),Q.specularIntensityMap&&d.enable(14),Q.specularColorMap&&d.enable(15),Q.transmission&&d.enable(16),Q.transmissionMap&&d.enable(17),Q.thicknessMap&&d.enable(18),Q.sheen&&d.enable(19),Q.sheenColorMap&&d.enable(20),Q.sheenRoughnessMap&&d.enable(21),Q.decodeVideoTexture&&d.enable(22),Q.opaque&&d.enable(23),U.push(d.mask)}(Q,U),Q.push(c.outputEncoding)),Q.push(U.customProgramCacheKey),Q.join()},getUniforms:function z(U){const Q=T[U.type];let he;return he=Q?Hx.clone(Gr[Q].uniforms):U.uniforms,he},acquireProgram:function k(U,Q){let he;for(let ge=0,Ye=p.length;ge<Ye;ge++){const st=p[ge];if(st.cacheKey===Q){he=st,++he.usedTimes;break}}return void 0===he&&(he=new Sv(c,Q,U,a),p.push(he)),he},releaseProgram:function $(U){if(0==--U.usedTimes){const Q=p.indexOf(U);p[Q]=p[p.length-1],p.pop(),U.destroy()}},releaseShaderCache:function q(U){f.remove(U)},programs:p,dispose:function ae(){f.dispose()}}}function Av(){let c=new WeakMap;return{get:function e(a){let l=c.get(a);return void 0===l&&(l={},c.set(a,l)),l},remove:function t(a){c.delete(a)},update:function n(a,l,d){c.get(a)[l]=d},dispose:function s(){c=new WeakMap}}}function lw(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.material.id!==e.material.id?c.material.id-e.material.id:c.z!==e.z?c.z-e.z:c.id-e.id}function Iv(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.z!==e.z?e.z-c.z:c.id-e.id}function Rv(){const c=[];let e=0;const t=[],n=[],s=[];function l(y,x,M,T,E,D){let N=c[e];return void 0===N?(N={id:y.id,object:y,geometry:x,material:M,groupOrder:T,renderOrder:y.renderOrder,z:E,group:D},c[e]=N):(N.id=y.id,N.object=y,N.geometry=x,N.material=M,N.groupOrder=T,N.renderOrder=y.renderOrder,N.z=E,N.group=D),e++,N}return{opaque:t,transmissive:n,transparent:s,init:function a(){e=0,t.length=0,n.length=0,s.length=0},push:function d(y,x,M,T,E,D){const N=l(y,x,M,T,E,D);M.transmission>0?n.push(N):!0===M.transparent?s.push(N):t.push(N)},unshift:function f(y,x,M,T,E,D){const N=l(y,x,M,T,E,D);M.transmission>0?n.unshift(N):!0===M.transparent?s.unshift(N):t.unshift(N)},finish:function g(){for(let y=e,x=c.length;y<x;y++){const M=c[y];if(null===M.id)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}},sort:function p(y,x){t.length>1&&t.sort(y||lw),n.length>1&&n.sort(x||Iv),s.length>1&&s.sort(x||Iv)}}}function Pv(){let c=new WeakMap;return{get:function e(n,s){let a;return!1===c.has(n)?(a=new Rv,c.set(n,[a])):s>=c.get(n).length?(a=new Rv,c.get(n).push(a)):a=c.get(n)[s],a},dispose:function t(){c=new WeakMap}}}function cw(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new kt};break;case"SpotLight":t={position:new Z,direction:new Z,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new kt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":t={color:new kt,position:new Z,halfWidth:new Z,halfHeight:new Z}}return c[e.id]=t,t}}}let _g=0;function xg(c,e){return(e.castShadow?1:0)-(c.castShadow?1:0)}function dw(c,e){const t=new cw,n=function uw(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3}}return c[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let g=0;g<9;g++)s.probe.push(new Z);const a=new Z,l=new On,d=new On;return{setup:function f(g,y){let x=0,M=0,T=0;for(let Q=0;Q<9;Q++)s.probe[Q].set(0,0,0);let E=0,D=0,N=0,F=0,z=0,k=0,$=0,q=0;g.sort(xg);const ae=!0!==y?Math.PI:1;for(let Q=0,he=g.length;Q<he;Q++){const ge=g[Q],Ye=ge.color,st=ge.intensity,be=ge.distance,He=ge.shadow&&ge.shadow.map?ge.shadow.map.texture:null;if(ge.isAmbientLight)x+=Ye.r*st*ae,M+=Ye.g*st*ae,T+=Ye.b*st*ae;else if(ge.isLightProbe)for(let de=0;de<9;de++)s.probe[de].addScaledVector(ge.sh.coefficients[de],st);else if(ge.isDirectionalLight){const de=t.get(ge);if(de.color.copy(ge.color).multiplyScalar(ge.intensity*ae),ge.castShadow){const Se=ge.shadow,Ee=n.get(ge);Ee.shadowBias=Se.bias,Ee.shadowNormalBias=Se.normalBias,Ee.shadowRadius=Se.radius,Ee.shadowMapSize=Se.mapSize,s.directionalShadow[E]=Ee,s.directionalShadowMap[E]=He,s.directionalShadowMatrix[E]=ge.shadow.matrix,k++}s.directional[E]=de,E++}else if(ge.isSpotLight){const de=t.get(ge);if(de.position.setFromMatrixPosition(ge.matrixWorld),de.color.copy(Ye).multiplyScalar(st*ae),de.distance=be,de.coneCos=Math.cos(ge.angle),de.penumbraCos=Math.cos(ge.angle*(1-ge.penumbra)),de.decay=ge.decay,ge.castShadow){const Se=ge.shadow,Ee=n.get(ge);Ee.shadowBias=Se.bias,Ee.shadowNormalBias=Se.normalBias,Ee.shadowRadius=Se.radius,Ee.shadowMapSize=Se.mapSize,s.spotShadow[N]=Ee,s.spotShadowMap[N]=He,s.spotShadowMatrix[N]=ge.shadow.matrix,q++}s.spot[N]=de,N++}else if(ge.isRectAreaLight){const de=t.get(ge);de.color.copy(Ye).multiplyScalar(st),de.halfWidth.set(.5*ge.width,0,0),de.halfHeight.set(0,.5*ge.height,0),s.rectArea[F]=de,F++}else if(ge.isPointLight){const de=t.get(ge);if(de.color.copy(ge.color).multiplyScalar(ge.intensity*ae),de.distance=ge.distance,de.decay=ge.decay,ge.castShadow){const Se=ge.shadow,Ee=n.get(ge);Ee.shadowBias=Se.bias,Ee.shadowNormalBias=Se.normalBias,Ee.shadowRadius=Se.radius,Ee.shadowMapSize=Se.mapSize,Ee.shadowCameraNear=Se.camera.near,Ee.shadowCameraFar=Se.camera.far,s.pointShadow[D]=Ee,s.pointShadowMap[D]=He,s.pointShadowMatrix[D]=ge.shadow.matrix,$++}s.point[D]=de,D++}else if(ge.isHemisphereLight){const de=t.get(ge);de.skyColor.copy(ge.color).multiplyScalar(st*ae),de.groundColor.copy(ge.groundColor).multiplyScalar(st*ae),s.hemi[z]=de,z++}}F>0&&(e.isWebGL2||!0===c.has("OES_texture_float_linear")?(s.rectAreaLTC1=Ft.LTC_FLOAT_1,s.rectAreaLTC2=Ft.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=Ft.LTC_HALF_1,s.rectAreaLTC2=Ft.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=x,s.ambient[1]=M,s.ambient[2]=T;const U=s.hash;(U.directionalLength!==E||U.pointLength!==D||U.spotLength!==N||U.rectAreaLength!==F||U.hemiLength!==z||U.numDirectionalShadows!==k||U.numPointShadows!==$||U.numSpotShadows!==q)&&(s.directional.length=E,s.spot.length=N,s.rectArea.length=F,s.point.length=D,s.hemi.length=z,s.directionalShadow.length=k,s.directionalShadowMap.length=k,s.pointShadow.length=$,s.pointShadowMap.length=$,s.spotShadow.length=q,s.spotShadowMap.length=q,s.directionalShadowMatrix.length=k,s.pointShadowMatrix.length=$,s.spotShadowMatrix.length=q,U.directionalLength=E,U.pointLength=D,U.spotLength=N,U.rectAreaLength=F,U.hemiLength=z,U.numDirectionalShadows=k,U.numPointShadows=$,U.numSpotShadows=q,s.version=_g++)},setupView:function p(g,y){let x=0,M=0,T=0,E=0,D=0;const N=y.matrixWorldInverse;for(let F=0,z=g.length;F<z;F++){const k=g[F];if(k.isDirectionalLight){const $=s.directional[x];$.direction.setFromMatrixPosition(k.matrixWorld),a.setFromMatrixPosition(k.target.matrixWorld),$.direction.sub(a),$.direction.transformDirection(N),x++}else if(k.isSpotLight){const $=s.spot[T];$.position.setFromMatrixPosition(k.matrixWorld),$.position.applyMatrix4(N),$.direction.setFromMatrixPosition(k.matrixWorld),a.setFromMatrixPosition(k.target.matrixWorld),$.direction.sub(a),$.direction.transformDirection(N),T++}else if(k.isRectAreaLight){const $=s.rectArea[E];$.position.setFromMatrixPosition(k.matrixWorld),$.position.applyMatrix4(N),d.identity(),l.copy(k.matrixWorld),l.premultiply(N),d.extractRotation(l),$.halfWidth.set(.5*k.width,0,0),$.halfHeight.set(0,.5*k.height,0),$.halfWidth.applyMatrix4(d),$.halfHeight.applyMatrix4(d),E++}else if(k.isPointLight){const $=s.point[M];$.position.setFromMatrixPosition(k.matrixWorld),$.position.applyMatrix4(N),M++}else if(k.isHemisphereLight){const $=s.hemi[D];$.direction.setFromMatrixPosition(k.matrixWorld),$.direction.transformDirection(N),D++}}},state:s}}function Jd(c,e){const t=new dw(c,e),n=[],s=[];return{init:function a(){n.length=0,s.length=0},state:{lightsArray:n,shadowsArray:s,lights:t},setupLights:function f(y){t.setup(n,y)},setupLightsView:function p(y){t.setupView(n,y)},pushLight:function l(y){n.push(y)},pushShadow:function d(y){s.push(y)}}}function ep(c,e){let t=new WeakMap;return{get:function n(a,l=0){let d;return!1===t.has(a)?(d=new Jd(c,e),t.set(a,[d])):l>=t.get(a).length?(d=new Jd(c,e),t.get(a).push(d)):d=t.get(a)[l],d},dispose:function s(){t=new WeakMap}}}class tp extends Us{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lv extends Us{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Ov(c,e,t){let n=new Hm;const s=new Ke,a=new Ke,l=new hi,d=new tp({depthPacking:3201}),f=new Lv,p={},g=t.maxTextureSize,y={0:1,1:0,2:2},x=new va({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),M=x.clone();M.defines.HORIZONTAL_PASS=1;const T=new jn;T.setAttribute("position",new Gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Er(T,x),D=this;function N(k,$){const q=e.update(E);x.defines.VSM_SAMPLES!==k.blurSamples&&(x.defines.VSM_SAMPLES=k.blurSamples,M.defines.VSM_SAMPLES=k.blurSamples,x.needsUpdate=!0,M.needsUpdate=!0),null===k.mapPass&&(k.mapPass=new ms(s.x,s.y)),x.uniforms.shadow_pass.value=k.map.texture,x.uniforms.resolution.value=k.mapSize,x.uniforms.radius.value=k.radius,c.setRenderTarget(k.mapPass),c.clear(),c.renderBufferDirect($,null,q,x,E,null),M.uniforms.shadow_pass.value=k.mapPass.texture,M.uniforms.resolution.value=k.mapSize,M.uniforms.radius.value=k.radius,c.setRenderTarget(k.map),c.clear(),c.renderBufferDirect($,null,q,M,E,null)}function F(k,$,q,ae,U,Q){let he=null;const ge=!0===q.isPointLight?k.customDistanceMaterial:k.customDepthMaterial;if(he=void 0!==ge?ge:!0===q.isPointLight?f:d,c.localClippingEnabled&&!0===$.clipShadows&&Array.isArray($.clippingPlanes)&&0!==$.clippingPlanes.length||$.displacementMap&&0!==$.displacementScale||$.alphaMap&&$.alphaTest>0){const Ye=he.uuid,st=$.uuid;let be=p[Ye];void 0===be&&(be={},p[Ye]=be);let He=be[st];void 0===He&&(He=he.clone(),be[st]=He),he=He}return he.visible=$.visible,he.wireframe=$.wireframe,he.side=3===Q?null!==$.shadowSide?$.shadowSide:$.side:null!==$.shadowSide?$.shadowSide:y[$.side],he.alphaMap=$.alphaMap,he.alphaTest=$.alphaTest,he.clipShadows=$.clipShadows,he.clippingPlanes=$.clippingPlanes,he.clipIntersection=$.clipIntersection,he.displacementMap=$.displacementMap,he.displacementScale=$.displacementScale,he.displacementBias=$.displacementBias,he.wireframeLinewidth=$.wireframeLinewidth,he.linewidth=$.linewidth,!0===q.isPointLight&&!0===he.isMeshDistanceMaterial&&(he.referencePosition.setFromMatrixPosition(q.matrixWorld),he.nearDistance=ae,he.farDistance=U),he}function z(k,$,q,ae,U){if(!1===k.visible)return;if(k.layers.test($.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&3===U)&&(!k.frustumCulled||n.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,k.matrixWorld);const ge=e.update(k),Ye=k.material;if(Array.isArray(Ye)){const st=ge.groups;for(let be=0,He=st.length;be<He;be++){const de=st[be],Se=Ye[de.materialIndex];if(Se&&Se.visible){const Ee=F(k,Se,ae,q.near,q.far,U);c.renderBufferDirect(q,null,ge,Ee,k,de)}}}else if(Ye.visible){const st=F(k,Ye,ae,q.near,q.far,U);c.renderBufferDirect(q,null,ge,st,k,null)}}const he=k.children;for(let ge=0,Ye=he.length;ge<Ye;ge++)z(he[ge],$,q,ae,U)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(k,$,q){if(!1===D.enabled||!1===D.autoUpdate&&!1===D.needsUpdate||0===k.length)return;const ae=c.getRenderTarget(),U=c.getActiveCubeFace(),Q=c.getActiveMipmapLevel(),he=c.state;he.setBlending(0),he.buffers.color.setClear(1,1,1,1),he.buffers.depth.setTest(!0),he.setScissorTest(!1);for(let ge=0,Ye=k.length;ge<Ye;ge++){const st=k[ge],be=st.shadow;if(void 0===be){console.warn("THREE.WebGLShadowMap:",st,"has no shadow.");continue}if(!1===be.autoUpdate&&!1===be.needsUpdate)continue;s.copy(be.mapSize);const He=be.getFrameExtents();s.multiply(He),a.copy(be.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(a.x=Math.floor(g/He.x),s.x=a.x*He.x,be.mapSize.x=a.x),s.y>g&&(a.y=Math.floor(g/He.y),s.y=a.y*He.y,be.mapSize.y=a.y)),null===be.map&&(be.map=new ms(s.x,s.y,3!==this.type?{minFilter:zn,magFilter:zn}:{}),be.map.texture.name=st.name+".shadowMap",be.camera.updateProjectionMatrix()),c.setRenderTarget(be.map),c.clear();const de=be.getViewportCount();for(let Se=0;Se<de;Se++){const Ee=be.getViewport(Se);l.set(a.x*Ee.x,a.y*Ee.y,a.x*Ee.z,a.y*Ee.w),he.viewport(l),be.updateMatrices(st,Se),n=be.getFrustum(),z($,q,be.camera,st,this.type)}!0!==be.isPointLightShadow&&3===this.type&&N(be,q),be.needsUpdate=!1}D.needsUpdate=!1,c.setRenderTarget(ae,U,Q)}}function Nv(c,e,t){const n=t.isWebGL2,d=new function s(){let pe=!1;const Gt=new hi;let qe=null;const Qt=new hi(0,0,0,0);return{setMask:function(Kt){qe!==Kt&&!pe&&(c.colorMask(Kt,Kt,Kt,Kt),qe=Kt)},setLocked:function(Kt){pe=Kt},setClear:function(Kt,fi,Br,mr,ed){!0===ed&&(Kt*=mr,fi*=mr,Br*=mr),Gt.set(Kt,fi,Br,mr),!1===Qt.equals(Gt)&&(c.clearColor(Kt,fi,Br,mr),Qt.copy(Gt))},reset:function(){pe=!1,qe=null,Qt.set(-1,0,0,0)}}},f=new function a(){let pe=!1,Gt=null,qe=null,Qt=null;return{setTest:function(Kt){Kt?un(2929):an(2929)},setMask:function(Kt){Gt!==Kt&&!pe&&(c.depthMask(Kt),Gt=Kt)},setFunc:function(Kt){if(qe!==Kt){if(Kt)switch(Kt){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);qe=Kt}},setLocked:function(Kt){pe=Kt},setClear:function(Kt){Qt!==Kt&&(c.clearDepth(Kt),Qt=Kt)},reset:function(){pe=!1,Gt=null,qe=null,Qt=null}}},p=new function l(){let pe=!1,Gt=null,qe=null,Qt=null,Kt=null,fi=null,Br=null,mr=null,ed=null;return{setTest:function(sr){pe||(sr?un(2960):an(2960))},setMask:function(sr){Gt!==sr&&!pe&&(c.stencilMask(sr),Gt=sr)},setFunc:function(sr,Dc,Ho){(qe!==sr||Qt!==Dc||Kt!==Ho)&&(c.stencilFunc(sr,Dc,Ho),qe=sr,Qt=Dc,Kt=Ho)},setOp:function(sr,Dc,Ho){(fi!==sr||Br!==Dc||mr!==Ho)&&(c.stencilOp(sr,Dc,Ho),fi=sr,Br=Dc,mr=Ho)},setLocked:function(sr){pe=sr},setClear:function(sr){ed!==sr&&(c.clearStencil(sr),ed=sr)},reset:function(){pe=!1,Gt=null,qe=null,Qt=null,Kt=null,fi=null,Br=null,mr=null,ed=null}}},g=new WeakMap,y=new WeakMap;let x={},M={},T=new WeakMap,E=[],D=null,N=!1,F=null,z=null,k=null,$=null,q=null,ae=null,U=null,Q=!1,he=null,ge=null,Ye=null,st=null,be=null;const He=c.getParameter(35661);let de=!1,Se=0;const Ee=c.getParameter(7938);-1!==Ee.indexOf("WebGL")?(Se=parseFloat(/^WebGL (\d)/.exec(Ee)[1]),de=Se>=1):-1!==Ee.indexOf("OpenGL ES")&&(Se=parseFloat(/^OpenGL ES (\d)/.exec(Ee)[1]),de=Se>=2);let we=null,Pe={};const yt=c.getParameter(3088),ot=c.getParameter(2978),wt=(new hi).fromArray(yt),Dt=(new hi).fromArray(ot);function yn(pe,Gt,qe){const Qt=new Uint8Array(4),Kt=c.createTexture();c.bindTexture(pe,Kt),c.texParameteri(pe,10241,9728),c.texParameteri(pe,10240,9728);for(let fi=0;fi<qe;fi++)c.texImage2D(Gt+fi,0,6408,1,1,0,6408,5121,Qt);return Kt}const tt={};function un(pe){!0!==x[pe]&&(c.enable(pe),x[pe]=!0)}function an(pe){!1!==x[pe]&&(c.disable(pe),x[pe]=!1)}tt[3553]=yn(3553,3553,1),tt[34067]=yn(34067,34069,6),d.setClear(0,0,0,1),f.setClear(1),p.setClear(0),un(2929),f.setFunc(3),Ht(!1),Fn(1),un(2884),Ct(0);const lt={100:32774,101:32778,102:32779};if(n)lt[103]=32775,lt[104]=32776;else{const pe=e.get("EXT_blend_minmax");null!==pe&&(lt[103]=pe.MIN_EXT,lt[104]=pe.MAX_EXT)}const nt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ct(pe,Gt,qe,Qt,Kt,fi,Br,mr){if(0!==pe){if(!1===N&&(un(3042),N=!0),5===pe)Kt=Kt||Gt,fi=fi||qe,Br=Br||Qt,(Gt!==z||Kt!==q)&&(c.blendEquationSeparate(lt[Gt],lt[Kt]),z=Gt,q=Kt),(qe!==k||Qt!==$||fi!==ae||Br!==U)&&(c.blendFuncSeparate(nt[qe],nt[Qt],nt[fi],nt[Br]),k=qe,$=Qt,ae=fi,U=Br),F=pe,Q=null;else if(pe!==F||mr!==Q){if((100!==z||100!==q)&&(c.blendEquation(32774),z=100,q=100),mr)switch(pe){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe)}else switch(pe){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe)}k=null,$=null,ae=null,U=null,F=pe,Q=mr}}else!0===N&&(an(3042),N=!1)}function Ht(pe){he!==pe&&(c.frontFace(pe?2304:2305),he=pe)}function Fn(pe){0!==pe?(un(2884),pe!==ge&&c.cullFace(1===pe?1029:2===pe?1028:1032)):an(2884),ge=pe}function vn(pe,Gt,qe){pe?(un(32823),(st!==Gt||be!==qe)&&(c.polygonOffset(Gt,qe),st=Gt,be=qe)):an(32823)}function yi(pe){void 0===pe&&(pe=33984+He-1),we!==pe&&(c.activeTexture(pe),we=pe)}return{buffers:{color:d,depth:f,stencil:p},enable:un,disable:an,bindFramebuffer:function rn(pe,Gt){return M[pe]!==Gt&&(c.bindFramebuffer(pe,Gt),M[pe]=Gt,n&&(36009===pe&&(M[36160]=Gt),36160===pe&&(M[36009]=Gt)),!0)},drawBuffers:function Bt(pe,Gt){let qe=E,Qt=!1;if(pe)if(qe=T.get(Gt),void 0===qe&&(qe=[],T.set(Gt,qe)),pe.isWebGLMultipleRenderTargets){const Kt=pe.texture;if(qe.length!==Kt.length||36064!==qe[0]){for(let fi=0,Br=Kt.length;fi<Br;fi++)qe[fi]=36064+fi;qe.length=Kt.length,Qt=!0}}else 36064!==qe[0]&&(qe[0]=36064,Qt=!0);else 1029!==qe[0]&&(qe[0]=1029,Qt=!0);Qt&&(t.isWebGL2?c.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))},useProgram:function kn(pe){return D!==pe&&(c.useProgram(pe),D=pe,!0)},setBlending:Ct,setMaterial:function nn(pe,Gt){2===pe.side?an(2884):un(2884);let qe=1===pe.side;Gt&&(qe=!qe),Ht(qe),1===pe.blending&&!1===pe.transparent?Ct(0):Ct(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.premultipliedAlpha),f.setFunc(pe.depthFunc),f.setTest(pe.depthTest),f.setMask(pe.depthWrite),d.setMask(pe.colorWrite);const Qt=pe.stencilWrite;p.setTest(Qt),Qt&&(p.setMask(pe.stencilWriteMask),p.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),p.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),vn(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),!0===pe.alphaToCoverage?un(32926):an(32926)},setFlipSided:Ht,setCullFace:Fn,setLineWidth:function wn(pe){pe!==Ye&&(de&&c.lineWidth(pe),Ye=pe)},setPolygonOffset:vn,setScissorTest:function Ii(pe){pe?un(3089):an(3089)},activeTexture:yi,bindTexture:function se(pe,Gt){null===we&&yi();let qe=Pe[we];void 0===qe&&(qe={type:void 0,texture:void 0},Pe[we]=qe),(qe.type!==pe||qe.texture!==Gt)&&(c.bindTexture(pe,Gt||tt[pe]),qe.type=pe,qe.texture=Gt)},unbindTexture:function J(){const pe=Pe[we];void 0!==pe&&void 0!==pe.type&&(c.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)},compressedTexImage2D:function Ue(){try{c.compressedTexImage2D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texImage2D:function pt(){try{c.texImage2D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texImage3D:function It(){try{c.texImage3D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},updateUBOMapping:function In(pe,Gt){let qe=y.get(Gt);void 0===qe&&(qe=new WeakMap,y.set(Gt,qe));let Qt=qe.get(pe);void 0===Qt&&(Qt=c.getUniformBlockIndex(Gt,pe.name),qe.set(pe,Qt))},uniformBlockBinding:function ni(pe,Gt){const Qt=y.get(Gt).get(pe);g.get(pe)!==Qt&&(c.uniformBlockBinding(Gt,Qt,pe.__bindingPointIndex),g.set(pe,Qt))},texStorage2D:function En(){try{c.texStorage2D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texStorage3D:function ee(){try{c.texStorage3D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texSubImage2D:function xt(){try{c.texSubImage2D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texSubImage3D:function At(){try{c.texSubImage3D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},compressedTexSubImage2D:function $t(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},scissor:function qt(pe){!1===wt.equals(pe)&&(c.scissor(pe.x,pe.y,pe.z,pe.w),wt.copy(pe))},viewport:function Yt(pe){!1===Dt.equals(pe)&&(c.viewport(pe.x,pe.y,pe.z,pe.w),Dt.copy(pe))},reset:function ji(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===n&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),x={},we=null,Pe={},M={},T=new WeakMap,E=[],D=null,N=!1,F=null,z=null,k=null,$=null,q=null,ae=null,U=null,Q=!1,he=null,ge=null,Ye=null,st=null,be=null,wt.set(0,0,c.canvas.width,c.canvas.height),Dt.set(0,0,c.canvas.width,c.canvas.height),d.reset(),f.reset(),p.reset()}}}function Mg(c,e,t,n,s,a,l){const d=s.isWebGL2,f=s.maxTextures,p=s.maxCubemapSize,g=s.maxTextureSize,y=s.maxSamples,x=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,M=/OculusBrowser/g.test(navigator.userAgent),T=new WeakMap;let E;const D=new WeakMap;let N=!1;try{N=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function F(se,J){return N?new OffscreenCanvas(se,J):Td("canvas")}function z(se,J,Ue,xt){let At=1;if((se.width>xt||se.height>xt)&&(At=xt/Math.max(se.width,se.height)),At<1||!0===J){if(typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&se instanceof ImageBitmap){const $t=J?Ef:Math.floor,En=$t(At*se.width),ee=$t(At*se.height);void 0===E&&(E=F(En,ee));const pt=Ue?F(En,ee):E;return pt.width=En,pt.height=ee,pt.getContext("2d").drawImage(se,0,0,En,ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+En+"x"+ee+")."),pt}return"data"in se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),se}return se}function k(se){return Sf(se.width)&&Sf(se.height)}function q(se,J){return se.generateMipmaps&&J&&se.minFilter!==zn&&se.minFilter!==qn}function ae(se){c.generateMipmap(se)}function U(se,J,Ue,xt,At=!1){if(!1===d)return J;if(null!==se){if(void 0!==c[se])return c[se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+se+"'")}let $t=J;return 6403===J&&(5126===Ue&&($t=33326),5131===Ue&&($t=33325),5121===Ue&&($t=33321)),33319===J&&(5126===Ue&&($t=33328),5131===Ue&&($t=33327),5121===Ue&&($t=33323)),6408===J&&(5126===Ue&&($t=34836),5131===Ue&&($t=34842),5121===Ue&&($t=xt===di&&!1===At?35907:32856),32819===Ue&&($t=32854),32820===Ue&&($t=32855)),(33325===$t||33326===$t||33327===$t||33328===$t||34842===$t||34836===$t)&&e.get("EXT_color_buffer_float"),$t}function Q(se,J,Ue){return!0===q(se,Ue)||se.isFramebufferTexture&&se.minFilter!==zn&&se.minFilter!==qn?Math.log2(Math.max(J.width,J.height))+1:void 0!==se.mipmaps&&se.mipmaps.length>0?se.mipmaps.length:se.isCompressedTexture&&Array.isArray(se.image)?J.mipmaps.length:1}function he(se){return se===zn||1004===se||1005===se?9728:9729}function ge(se){const J=se.target;J.removeEventListener("dispose",ge),function st(se){const J=n.get(se);if(void 0===J.__webglInit)return;const Ue=se.source,xt=D.get(Ue);if(xt){const At=xt[J.__cacheKey];At.usedTimes--,0===At.usedTimes&&be(se),0===Object.keys(xt).length&&D.delete(Ue)}n.remove(se)}(J),J.isVideoTexture&&T.delete(J)}function Ye(se){const J=se.target;J.removeEventListener("dispose",Ye),function He(se){const J=se.texture,Ue=n.get(se),xt=n.get(J);if(void 0!==xt.__webglTexture&&(c.deleteTexture(xt.__webglTexture),l.memory.textures--),se.depthTexture&&se.depthTexture.dispose(),se.isWebGLCubeRenderTarget)for(let At=0;At<6;At++)c.deleteFramebuffer(Ue.__webglFramebuffer[At]),Ue.__webglDepthbuffer&&c.deleteRenderbuffer(Ue.__webglDepthbuffer[At]);else{if(c.deleteFramebuffer(Ue.__webglFramebuffer),Ue.__webglDepthbuffer&&c.deleteRenderbuffer(Ue.__webglDepthbuffer),Ue.__webglMultisampledFramebuffer&&c.deleteFramebuffer(Ue.__webglMultisampledFramebuffer),Ue.__webglColorRenderbuffer)for(let At=0;At<Ue.__webglColorRenderbuffer.length;At++)Ue.__webglColorRenderbuffer[At]&&c.deleteRenderbuffer(Ue.__webglColorRenderbuffer[At]);Ue.__webglDepthRenderbuffer&&c.deleteRenderbuffer(Ue.__webglDepthRenderbuffer)}if(se.isWebGLMultipleRenderTargets)for(let At=0,$t=J.length;At<$t;At++){const En=n.get(J[At]);En.__webglTexture&&(c.deleteTexture(En.__webglTexture),l.memory.textures--),n.remove(J[At])}n.remove(J),n.remove(se)}(J)}function be(se){const J=n.get(se);c.deleteTexture(J.__webglTexture),delete D.get(se.source)[J.__cacheKey],l.memory.textures--}let de=0;function Pe(se,J){const Ue=n.get(se);if(se.isVideoTexture&&function Ii(se){const J=l.render.frame;T.get(se)!==J&&(T.set(se,J),se.update())}(se),!1===se.isRenderTargetTexture&&se.version>0&&Ue.__version!==se.version){const xt=se.image;if(null===xt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==xt.complete)return void an(Ue,se,J);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+J),t.bindTexture(3553,Ue.__webglTexture)}const Dt={[Xr]:10497,[Pr]:33071,1002:33648},yn={[zn]:9728,1004:9984,1005:9986,[qn]:9729,1007:9985,[Os]:9987};function tt(se,J,Ue){if(Ue?(c.texParameteri(se,10242,Dt[J.wrapS]),c.texParameteri(se,10243,Dt[J.wrapT]),(32879===se||35866===se)&&c.texParameteri(se,32882,Dt[J.wrapR]),c.texParameteri(se,10240,yn[J.magFilter]),c.texParameteri(se,10241,yn[J.minFilter])):(c.texParameteri(se,10242,33071),c.texParameteri(se,10243,33071),(32879===se||35866===se)&&c.texParameteri(se,32882,33071),(J.wrapS!==Pr||J.wrapT!==Pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(se,10240,he(J.magFilter)),c.texParameteri(se,10241,he(J.minFilter)),J.minFilter!==zn&&J.minFilter!==qn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const xt=e.get("EXT_texture_filter_anisotropic");if(J.type===re&&!1===e.has("OES_texture_float_linear")||!1===d&&J.type===Ce&&!1===e.has("OES_texture_half_float_linear"))return;(J.anisotropy>1||n.get(J).__currentAnisotropy)&&(c.texParameterf(se,xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,s.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy)}}function un(se,J){let Ue=!1;void 0===se.__webglInit&&(se.__webglInit=!0,J.addEventListener("dispose",ge));const xt=J.source;let At=D.get(xt);void 0===At&&(At={},D.set(xt,At));const $t=function we(se){const J=[];return J.push(se.wrapS),J.push(se.wrapT),J.push(se.magFilter),J.push(se.minFilter),J.push(se.anisotropy),J.push(se.internalFormat),J.push(se.format),J.push(se.type),J.push(se.generateMipmaps),J.push(se.premultiplyAlpha),J.push(se.flipY),J.push(se.unpackAlignment),J.push(se.encoding),J.join()}(J);if($t!==se.__cacheKey){void 0===At[$t]&&(At[$t]={texture:c.createTexture(),usedTimes:0},l.memory.textures++,Ue=!0),At[$t].usedTimes++;const En=At[se.__cacheKey];void 0!==En&&(At[se.__cacheKey].usedTimes--,0===En.usedTimes&&be(J)),se.__cacheKey=$t,se.__webglTexture=At[$t].texture}return Ue}function an(se,J,Ue){let xt=3553;J.isDataArrayTexture&&(xt=35866),J.isData3DTexture&&(xt=32879);const At=un(se,J),$t=J.source;if(t.activeTexture(33984+Ue),t.bindTexture(xt,se.__webglTexture),$t.version!==$t.__currentVersion||!0===At){c.pixelStorei(37440,J.flipY),c.pixelStorei(37441,J.premultiplyAlpha),c.pixelStorei(3317,J.unpackAlignment),c.pixelStorei(37443,0);const En=function $(se){return!d&&(se.wrapS!==Pr||se.wrapT!==Pr||se.minFilter!==zn&&se.minFilter!==qn)}(J)&&!1===k(J.image);let ee=z(J.image,En,!1,g);ee=yi(J,ee);const pt=k(ee)||d,It=a.convert(J.format,J.encoding);let In,qt=a.convert(J.type),Yt=U(J.internalFormat,It,qt,J.encoding,J.isVideoTexture);tt(xt,J,pt);const ni=J.mipmaps,ji=d&&!0!==J.isVideoTexture,pe=void 0===$t.__currentVersion||!0===At,Gt=Q(J,ee,pt);if(J.isDepthTexture)Yt=6402,d?Yt=J.type===re?36012:J.type===K?33190:J.type===zt?35056:33189:J.type===re&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),J.format===Eo&&6402===Yt&&1012!==J.type&&J.type!==K&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),J.type=K,qt=a.convert(J.type)),J.format===Kr&&6402===Yt&&(Yt=34041,J.type!==zt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),J.type=zt,qt=a.convert(J.type))),pe&&(ji?t.texStorage2D(3553,1,Yt,ee.width,ee.height):t.texImage2D(3553,0,Yt,ee.width,ee.height,0,It,qt,null));else if(J.isDataTexture)if(ni.length>0&&pt){ji&&pe&&t.texStorage2D(3553,Gt,Yt,ni[0].width,ni[0].height);for(let qe=0,Qt=ni.length;qe<Qt;qe++)In=ni[qe],ji?t.texSubImage2D(3553,qe,0,0,In.width,In.height,It,qt,In.data):t.texImage2D(3553,qe,Yt,In.width,In.height,0,It,qt,In.data);J.generateMipmaps=!1}else ji?(pe&&t.texStorage2D(3553,Gt,Yt,ee.width,ee.height),t.texSubImage2D(3553,0,0,0,ee.width,ee.height,It,qt,ee.data)):t.texImage2D(3553,0,Yt,ee.width,ee.height,0,It,qt,ee.data);else if(J.isCompressedTexture){ji&&pe&&t.texStorage2D(3553,Gt,Yt,ni[0].width,ni[0].height);for(let qe=0,Qt=ni.length;qe<Qt;qe++)In=ni[qe],J.format!==qi?null!==It?ji?t.compressedTexSubImage2D(3553,qe,0,0,In.width,In.height,It,In.data):t.compressedTexImage2D(3553,qe,Yt,In.width,In.height,0,In.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ji?t.texSubImage2D(3553,qe,0,0,In.width,In.height,It,qt,In.data):t.texImage2D(3553,qe,Yt,In.width,In.height,0,It,qt,In.data)}else if(J.isDataArrayTexture)ji?(pe&&t.texStorage3D(35866,Gt,Yt,ee.width,ee.height,ee.depth),t.texSubImage3D(35866,0,0,0,0,ee.width,ee.height,ee.depth,It,qt,ee.data)):t.texImage3D(35866,0,Yt,ee.width,ee.height,ee.depth,0,It,qt,ee.data);else if(J.isData3DTexture)ji?(pe&&t.texStorage3D(32879,Gt,Yt,ee.width,ee.height,ee.depth),t.texSubImage3D(32879,0,0,0,0,ee.width,ee.height,ee.depth,It,qt,ee.data)):t.texImage3D(32879,0,Yt,ee.width,ee.height,ee.depth,0,It,qt,ee.data);else if(J.isFramebufferTexture){if(pe)if(ji)t.texStorage2D(3553,Gt,Yt,ee.width,ee.height);else{let qe=ee.width,Qt=ee.height;for(let Kt=0;Kt<Gt;Kt++)t.texImage2D(3553,Kt,Yt,qe,Qt,0,It,qt,null),qe>>=1,Qt>>=1}}else if(ni.length>0&&pt){ji&&pe&&t.texStorage2D(3553,Gt,Yt,ni[0].width,ni[0].height);for(let qe=0,Qt=ni.length;qe<Qt;qe++)In=ni[qe],ji?t.texSubImage2D(3553,qe,0,0,It,qt,In):t.texImage2D(3553,qe,Yt,It,qt,In);J.generateMipmaps=!1}else ji?(pe&&t.texStorage2D(3553,Gt,Yt,ee.width,ee.height),t.texSubImage2D(3553,0,0,0,It,qt,ee)):t.texImage2D(3553,0,Yt,It,qt,ee);q(J,pt)&&ae(xt),$t.__currentVersion=$t.version,J.onUpdate&&J.onUpdate(J)}se.__version=J.version}function Bt(se,J,Ue,xt,At){const $t=a.convert(Ue.format,Ue.encoding),En=a.convert(Ue.type),ee=U(Ue.internalFormat,$t,En,Ue.encoding);n.get(J).__hasExternalTextures||(32879===At||35866===At?t.texImage3D(At,0,ee,J.width,J.height,J.depth,0,$t,En,null):t.texImage2D(At,0,ee,J.width,J.height,0,$t,En,null)),t.bindFramebuffer(36160,se),vn(J)?x.framebufferTexture2DMultisampleEXT(36160,xt,At,n.get(Ue).__webglTexture,0,wn(J)):c.framebufferTexture2D(36160,xt,At,n.get(Ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function kn(se,J,Ue){if(c.bindRenderbuffer(36161,se),J.depthBuffer&&!J.stencilBuffer){let xt=33189;if(Ue||vn(J)){const At=J.depthTexture;At&&At.isDepthTexture&&(At.type===re?xt=36012:At.type===K&&(xt=33190));const $t=wn(J);vn(J)?x.renderbufferStorageMultisampleEXT(36161,$t,xt,J.width,J.height):c.renderbufferStorageMultisample(36161,$t,xt,J.width,J.height)}else c.renderbufferStorage(36161,xt,J.width,J.height);c.framebufferRenderbuffer(36160,36096,36161,se)}else if(J.depthBuffer&&J.stencilBuffer){const xt=wn(J);Ue&&!1===vn(J)?c.renderbufferStorageMultisample(36161,xt,35056,J.width,J.height):vn(J)?x.renderbufferStorageMultisampleEXT(36161,xt,35056,J.width,J.height):c.renderbufferStorage(36161,34041,J.width,J.height),c.framebufferRenderbuffer(36160,33306,36161,se)}else{const xt=!0===J.isWebGLMultipleRenderTargets?J.texture:[J.texture];for(let At=0;At<xt.length;At++){const $t=xt[At],En=a.convert($t.format,$t.encoding),ee=a.convert($t.type),pt=U($t.internalFormat,En,ee,$t.encoding),It=wn(J);Ue&&!1===vn(J)?c.renderbufferStorageMultisample(36161,It,pt,J.width,J.height):vn(J)?x.renderbufferStorageMultisampleEXT(36161,It,pt,J.width,J.height):c.renderbufferStorage(36161,pt,J.width,J.height)}}c.bindRenderbuffer(36161,null)}function nt(se){const J=n.get(se),Ue=!0===se.isWebGLCubeRenderTarget;if(se.depthTexture&&!J.__autoAllocateDepthBuffer){if(Ue)throw new Error("target.depthTexture not supported in Cube render targets");!function lt(se,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,se),!J.depthTexture||!J.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(J.depthTexture).__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),Pe(J.depthTexture,0);const xt=n.get(J.depthTexture).__webglTexture,At=wn(J);if(J.depthTexture.format===Eo)vn(J)?x.framebufferTexture2DMultisampleEXT(36160,36096,3553,xt,0,At):c.framebufferTexture2D(36160,36096,3553,xt,0);else{if(J.depthTexture.format!==Kr)throw new Error("Unknown depthTexture format");vn(J)?x.framebufferTexture2DMultisampleEXT(36160,33306,3553,xt,0,At):c.framebufferTexture2D(36160,33306,3553,xt,0)}}(J.__webglFramebuffer,se)}else if(Ue){J.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)t.bindFramebuffer(36160,J.__webglFramebuffer[xt]),J.__webglDepthbuffer[xt]=c.createRenderbuffer(),kn(J.__webglDepthbuffer[xt],se,!1)}else t.bindFramebuffer(36160,J.__webglFramebuffer),J.__webglDepthbuffer=c.createRenderbuffer(),kn(J.__webglDepthbuffer,se,!1);t.bindFramebuffer(36160,null)}function wn(se){return Math.min(y,se.samples)}function vn(se){const J=n.get(se);return d&&se.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==J.__useRenderToTexture}function yi(se,J){const Ue=se.encoding,xt=se.format,At=se.type;return!0===se.isCompressedTexture||!0===se.isVideoTexture||1035===se.format||Ue!==Qc&&(Ue===di?!1===d?!0===e.has("EXT_sRGB")&&xt===qi?(se.format=1035,se.minFilter=qn,se.generateMipmaps=!1):J=Af.sRGBToLinear(J):(xt!==qi||At!==w)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ue)),J}this.allocateTextureUnit=function Ee(){const se=de;return se>=f&&console.warn("THREE.WebGLTextures: Trying to use "+se+" texture units while this GPU supports only "+f),de+=1,se},this.resetTextureUnits=function Se(){de=0},this.setTexture2D=Pe,this.setTexture2DArray=function yt(se,J){const Ue=n.get(se);se.version>0&&Ue.__version!==se.version?an(Ue,se,J):(t.activeTexture(33984+J),t.bindTexture(35866,Ue.__webglTexture))},this.setTexture3D=function ot(se,J){const Ue=n.get(se);se.version>0&&Ue.__version!==se.version?an(Ue,se,J):(t.activeTexture(33984+J),t.bindTexture(32879,Ue.__webglTexture))},this.setTextureCube=function wt(se,J){const Ue=n.get(se);se.version>0&&Ue.__version!==se.version?function rn(se,J,Ue){if(6!==J.image.length)return;const xt=un(se,J),At=J.source;if(t.activeTexture(33984+Ue),t.bindTexture(34067,se.__webglTexture),At.version!==At.__currentVersion||!0===xt){c.pixelStorei(37440,J.flipY),c.pixelStorei(37441,J.premultiplyAlpha),c.pixelStorei(3317,J.unpackAlignment),c.pixelStorei(37443,0);const $t=J.isCompressedTexture||J.image[0].isCompressedTexture,En=J.image[0]&&J.image[0].isDataTexture,ee=[];for(let qe=0;qe<6;qe++)ee[qe]=$t||En?En?J.image[qe].image:J.image[qe]:z(J.image[qe],!1,!0,p),ee[qe]=yi(J,ee[qe]);const pt=ee[0],It=k(pt)||d,qt=a.convert(J.format,J.encoding),Yt=a.convert(J.type),In=U(J.internalFormat,qt,Yt,J.encoding),ni=d&&!0!==J.isVideoTexture,ji=void 0===At.__currentVersion||!0===xt;let Gt,pe=Q(J,pt,It);if(tt(34067,J,It),$t){ni&&ji&&t.texStorage2D(34067,pe,In,pt.width,pt.height);for(let qe=0;qe<6;qe++){Gt=ee[qe].mipmaps;for(let Qt=0;Qt<Gt.length;Qt++){const Kt=Gt[Qt];J.format!==qi?null!==qt?ni?t.compressedTexSubImage2D(34069+qe,Qt,0,0,Kt.width,Kt.height,qt,Kt.data):t.compressedTexImage2D(34069+qe,Qt,In,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ni?t.texSubImage2D(34069+qe,Qt,0,0,Kt.width,Kt.height,qt,Yt,Kt.data):t.texImage2D(34069+qe,Qt,In,Kt.width,Kt.height,0,qt,Yt,Kt.data)}}}else{Gt=J.mipmaps,ni&&ji&&(Gt.length>0&&pe++,t.texStorage2D(34067,pe,In,ee[0].width,ee[0].height));for(let qe=0;qe<6;qe++)if(En){ni?t.texSubImage2D(34069+qe,0,0,0,ee[qe].width,ee[qe].height,qt,Yt,ee[qe].data):t.texImage2D(34069+qe,0,In,ee[qe].width,ee[qe].height,0,qt,Yt,ee[qe].data);for(let Qt=0;Qt<Gt.length;Qt++){const fi=Gt[Qt].image[qe].image;ni?t.texSubImage2D(34069+qe,Qt+1,0,0,fi.width,fi.height,qt,Yt,fi.data):t.texImage2D(34069+qe,Qt+1,In,fi.width,fi.height,0,qt,Yt,fi.data)}}else{ni?t.texSubImage2D(34069+qe,0,0,0,qt,Yt,ee[qe]):t.texImage2D(34069+qe,0,In,qt,Yt,ee[qe]);for(let Qt=0;Qt<Gt.length;Qt++){const Kt=Gt[Qt];ni?t.texSubImage2D(34069+qe,Qt+1,0,0,qt,Yt,Kt.image[qe]):t.texImage2D(34069+qe,Qt+1,In,qt,Yt,Kt.image[qe])}}}q(J,It)&&ae(34067),At.__currentVersion=At.version,J.onUpdate&&J.onUpdate(J)}se.__version=J.version}(Ue,se,J):(t.activeTexture(33984+J),t.bindTexture(34067,Ue.__webglTexture))},this.rebindTextures=function Ct(se,J,Ue){const xt=n.get(se);void 0!==J&&Bt(xt.__webglFramebuffer,se,se.texture,36064,3553),void 0!==Ue&&nt(se)},this.setupRenderTarget=function nn(se){const J=se.texture,Ue=n.get(se),xt=n.get(J);se.addEventListener("dispose",Ye),!0!==se.isWebGLMultipleRenderTargets&&(void 0===xt.__webglTexture&&(xt.__webglTexture=c.createTexture()),xt.__version=J.version,l.memory.textures++);const At=!0===se.isWebGLCubeRenderTarget,$t=!0===se.isWebGLMultipleRenderTargets,En=k(se)||d;if(At){Ue.__webglFramebuffer=[];for(let ee=0;ee<6;ee++)Ue.__webglFramebuffer[ee]=c.createFramebuffer()}else{if(Ue.__webglFramebuffer=c.createFramebuffer(),$t)if(s.drawBuffers){const ee=se.texture;for(let pt=0,It=ee.length;pt<It;pt++){const qt=n.get(ee[pt]);void 0===qt.__webglTexture&&(qt.__webglTexture=c.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&se.samples>0&&!1===vn(se)){const ee=$t?J:[J];Ue.__webglMultisampledFramebuffer=c.createFramebuffer(),Ue.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer);for(let pt=0;pt<ee.length;pt++){const It=ee[pt];Ue.__webglColorRenderbuffer[pt]=c.createRenderbuffer(),c.bindRenderbuffer(36161,Ue.__webglColorRenderbuffer[pt]);const qt=a.convert(It.format,It.encoding),Yt=a.convert(It.type),In=U(It.internalFormat,qt,Yt,It.encoding),ni=wn(se);c.renderbufferStorageMultisample(36161,ni,In,se.width,se.height),c.framebufferRenderbuffer(36160,36064+pt,36161,Ue.__webglColorRenderbuffer[pt])}c.bindRenderbuffer(36161,null),se.depthBuffer&&(Ue.__webglDepthRenderbuffer=c.createRenderbuffer(),kn(Ue.__webglDepthRenderbuffer,se,!0)),t.bindFramebuffer(36160,null)}}if(At){t.bindTexture(34067,xt.__webglTexture),tt(34067,J,En);for(let ee=0;ee<6;ee++)Bt(Ue.__webglFramebuffer[ee],se,J,36064,34069+ee);q(J,En)&&ae(34067),t.unbindTexture()}else if($t){const ee=se.texture;for(let pt=0,It=ee.length;pt<It;pt++){const qt=ee[pt],Yt=n.get(qt);t.bindTexture(3553,Yt.__webglTexture),tt(3553,qt,En),Bt(Ue.__webglFramebuffer,se,qt,36064+pt,3553),q(qt,En)&&ae(3553)}t.unbindTexture()}else{let ee=3553;(se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(d?ee=se.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ee,xt.__webglTexture),tt(ee,J,En),Bt(Ue.__webglFramebuffer,se,J,36064,ee),q(J,En)&&ae(ee),t.unbindTexture()}se.depthBuffer&&nt(se)},this.updateRenderTargetMipmap=function Ht(se){const J=k(se)||d,Ue=!0===se.isWebGLMultipleRenderTargets?se.texture:[se.texture];for(let xt=0,At=Ue.length;xt<At;xt++){const $t=Ue[xt];if(q($t,J)){const En=se.isWebGLCubeRenderTarget?34067:3553,ee=n.get($t).__webglTexture;t.bindTexture(En,ee),ae(En),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Fn(se){if(d&&se.samples>0&&!1===vn(se)){const J=se.isWebGLMultipleRenderTargets?se.texture:[se.texture],Ue=se.width,xt=se.height;let At=16384;const $t=[],En=se.stencilBuffer?33306:36096,ee=n.get(se),pt=!0===se.isWebGLMultipleRenderTargets;if(pt)for(let It=0;It<J.length;It++)t.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+It,36161,null),t.bindFramebuffer(36160,ee.__webglFramebuffer),c.framebufferTexture2D(36009,36064+It,3553,null,0);t.bindFramebuffer(36008,ee.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ee.__webglFramebuffer);for(let It=0;It<J.length;It++){$t.push(36064+It),se.depthBuffer&&$t.push(En);const qt=void 0!==ee.__ignoreDepthValues&&ee.__ignoreDepthValues;if(!1===qt&&(se.depthBuffer&&(At|=256),se.stencilBuffer&&(At|=1024)),pt&&c.framebufferRenderbuffer(36008,36064,36161,ee.__webglColorRenderbuffer[It]),!0===qt&&(c.invalidateFramebuffer(36008,[En]),c.invalidateFramebuffer(36009,[En])),pt){const Yt=n.get(J[It]).__webglTexture;c.framebufferTexture2D(36009,36064,3553,Yt,0)}c.blitFramebuffer(0,0,Ue,xt,0,0,Ue,xt,At,9728),M&&c.invalidateFramebuffer(36008,$t)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),pt)for(let It=0;It<J.length;It++){t.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+It,36161,ee.__webglColorRenderbuffer[It]);const qt=n.get(J[It]).__webglTexture;t.bindFramebuffer(36160,ee.__webglFramebuffer),c.framebufferTexture2D(36009,36064+It,3553,qt,0)}t.bindFramebuffer(36009,ee.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=nt,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=vn}function Fv(c,e,t){const n=t.isWebGL2;return{convert:function s(a,l=null){let d;if(a===w)return 5121;if(1017===a)return 32819;if(1018===a)return 32820;if(1010===a)return 5120;if(1011===a)return 5122;if(1012===a)return 5123;if(1013===a)return 5124;if(a===K)return 5125;if(a===re)return 5126;if(a===Ce)return n?5131:(d=e.get("OES_texture_half_float"),null!==d?d.HALF_FLOAT_OES:null);if(1021===a)return 6406;if(a===qi)return 6408;if(1024===a)return 6409;if(1025===a)return 6410;if(a===Eo)return 6402;if(a===Kr)return 34041;if(1028===a)return 6403;if(1022===a)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===a)return d=e.get("EXT_sRGB"),null!==d?d.SRGB_ALPHA_EXT:null;if(1029===a)return 36244;if(1030===a)return 33319;if(1031===a)return 33320;if(1033===a)return 36249;if(33776===a||33777===a||33778===a||33779===a)if(l===di){if(d=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===d)return null;if(33776===a)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===a)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===a)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===a)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(d=e.get("WEBGL_compressed_texture_s3tc"),null===d)return null;if(33776===a)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a){if(d=e.get("WEBGL_compressed_texture_pvrtc"),null===d)return null;if(35840===a)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a)return d=e.get("WEBGL_compressed_texture_etc1"),null!==d?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===a||37496===a){if(d=e.get("WEBGL_compressed_texture_etc"),null===d)return null;if(37492===a)return l===di?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(37496===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a){if(d=e.get("WEBGL_compressed_texture_astc"),null===d)return null;if(37808===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===a)return l===di?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===a){if(d=e.get("EXT_texture_compression_bptc"),null===d)return null;if(36492===a)return l===di?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT}return a===zt?n?34042:(d=e.get("WEBGL_depth_texture"),null!==d?d.UNSIGNED_INT_24_8_WEBGL:null):void 0!==c[a]?c[a]:null}}}class kv extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Lo extends Mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Bv={type:"move"};class Sg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let s=null,a=null,l=null;const d=this._targetRay,f=this._grip,p=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(p&&e.hand){l=!0;for(const E of e.hand.values()){const D=t.getJointPose(E,n);if(void 0===p.joints[E.jointName]){const F=new Lo;F.matrixAutoUpdate=!1,F.visible=!1,p.joints[E.jointName]=F,p.add(F)}const N=p.joints[E.jointName];null!==D&&(N.matrix.fromArray(D.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),N.jointRadius=D.radius),N.visible=null!==D}const x=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),M=.02,T=.005;p.inputState.pinching&&x>M+T?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&x<=M-T&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==f&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),null!==a&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),a.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(a.linearVelocity)):f.hasLinearVelocity=!1,a.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(a.angularVelocity)):f.hasAngularVelocity=!1));null!==d&&(s=t.getPose(e.targetRaySpace,n),null===s&&null!==a&&(s=a),null!==s&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(Bv)))}return null!==d&&(d.visible=null!==s),null!==f&&(f.visible=null!==a),null!==p&&(p.visible=null!==l),this}}class Uv extends ks{constructor(e,t,n,s,a,l,d,f,p,g){if((g=void 0!==g?g:Eo)!==Eo&&g!==Kr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&g===Eo&&(n=K),void 0===n&&g===Kr&&(n=zt),super(null,s,a,l,d,f,g,n,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==d?d:zn,this.minFilter=void 0!==f?f:zn,this.flipY=!1,this.generateMipmaps=!1}}class zv extends Ul{constructor(e,t){super();const n=this;let s=null,a=1,l=null,d="local-floor",f=null,p=null,g=null,y=null,x=null,M=null;const T=t.getContextAttributes();let E=null,D=null;const N=[],F=[],z=new pr;z.layers.enable(1),z.viewport=new hi;const k=new pr;k.layers.enable(2),k.viewport=new hi;const $=[z,k],q=new kv;q.layers.enable(1),q.layers.enable(2);let ae=null,U=null;function Q(we){const Pe=F.indexOf(we.inputSource);if(-1===Pe)return;const yt=N[Pe];void 0!==yt&&yt.dispatchEvent({type:we.type,data:we.inputSource})}function he(){s.removeEventListener("select",Q),s.removeEventListener("selectstart",Q),s.removeEventListener("selectend",Q),s.removeEventListener("squeeze",Q),s.removeEventListener("squeezestart",Q),s.removeEventListener("squeezeend",Q),s.removeEventListener("end",he),s.removeEventListener("inputsourceschange",ge);for(let we=0;we<N.length;we++){const Pe=F[we];null!==Pe&&(F[we]=null,N[we].disconnect(Pe))}ae=null,U=null,e.setRenderTarget(E),x=null,y=null,g=null,s=null,D=null,Ee.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function ge(we){for(let Pe=0;Pe<we.removed.length;Pe++){const yt=we.removed[Pe],ot=F.indexOf(yt);ot>=0&&(F[ot]=null,N[ot].dispatchEvent({type:"disconnected",data:yt}))}for(let Pe=0;Pe<we.added.length;Pe++){const yt=we.added[Pe];let ot=F.indexOf(yt);if(-1===ot){for(let Dt=0;Dt<N.length;Dt++){if(Dt>=F.length){F.push(yt),ot=Dt;break}if(null===F[Dt]){F[Dt]=yt,ot=Dt;break}}if(-1===ot)break}const wt=N[ot];wt&&wt.dispatchEvent({type:"connected",data:yt})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(we){let Pe=N[we];return void 0===Pe&&(Pe=new Sg,N[we]=Pe),Pe.getTargetRaySpace()},this.getControllerGrip=function(we){let Pe=N[we];return void 0===Pe&&(Pe=new Sg,N[we]=Pe),Pe.getGripSpace()},this.getHand=function(we){let Pe=N[we];return void 0===Pe&&(Pe=new Sg,N[we]=Pe),Pe.getHandSpace()},this.setFramebufferScaleFactor=function(we){a=we,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(we){d=we,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||l},this.setReferenceSpace=function(we){f=we},this.getBaseLayer=function(){return null!==y?y:x},this.getBinding=function(){return g},this.getFrame=function(){return M},this.getSession=function(){return s},this.setSession=function(){var we=function Sl(c){return function(){var e=this,t=arguments;return new Promise(function(n,s){var a=c.apply(e,t);function l(f){Zh(a,n,s,l,d,"next",f)}function d(f){Zh(a,n,s,l,d,"throw",f)}l(void 0)})}}(function*(Pe){if(s=Pe,null!==s){if(E=e.getRenderTarget(),s.addEventListener("select",Q),s.addEventListener("selectstart",Q),s.addEventListener("selectend",Q),s.addEventListener("squeeze",Q),s.addEventListener("squeezestart",Q),s.addEventListener("squeezeend",Q),s.addEventListener("end",he),s.addEventListener("inputsourceschange",ge),!0!==T.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)x=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:a}),s.updateRenderState({baseLayer:x}),D=new ms(x.framebufferWidth,x.framebufferHeight,{format:qi,type:w,encoding:e.outputEncoding});else{let yt=null,ot=null,wt=null;T.depth&&(wt=T.stencil?35056:33190,yt=T.stencil?Kr:Eo,ot=T.stencil?zt:K);const Dt={colorFormat:32856,depthFormat:wt,scaleFactor:a};g=new XRWebGLBinding(s,t),y=g.createProjectionLayer(Dt),s.updateRenderState({layers:[y]}),D=new ms(y.textureWidth,y.textureHeight,{format:qi,type:w,depthTexture:new Uv(y.textureWidth,y.textureHeight,ot,void 0,void 0,void 0,void 0,void 0,void 0,yt),stencilBuffer:T.stencil,encoding:e.outputEncoding,samples:T.antialias?4:0}),e.properties.get(D).__ignoreDepthValues=y.ignoreDepthValues}D.isXRRenderTarget=!0,this.setFoveation(1),f=null,l=yield s.requestReferenceSpace(d),Ee.setContext(s),Ee.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Pe){return we.apply(this,arguments)}}();const Ye=new Z,st=new Z;function He(we,Pe){null===Pe?we.matrixWorld.copy(we.matrix):we.matrixWorld.multiplyMatrices(Pe.matrixWorld,we.matrix),we.matrixWorldInverse.copy(we.matrixWorld).invert()}this.updateCamera=function(we){if(null===s)return;q.near=k.near=z.near=we.near,q.far=k.far=z.far=we.far,(ae!==q.near||U!==q.far)&&(s.updateRenderState({depthNear:q.near,depthFar:q.far}),ae=q.near,U=q.far);const Pe=we.parent,yt=q.cameras;He(q,Pe);for(let wt=0;wt<yt.length;wt++)He(yt[wt],Pe);q.matrixWorld.decompose(q.position,q.quaternion,q.scale),we.position.copy(q.position),we.quaternion.copy(q.quaternion),we.scale.copy(q.scale),we.matrix.copy(q.matrix),we.matrixWorld.copy(q.matrixWorld);const ot=we.children;for(let wt=0,Dt=ot.length;wt<Dt;wt++)ot[wt].updateMatrixWorld(!0);2===yt.length?function be(we,Pe,yt){Ye.setFromMatrixPosition(Pe.matrixWorld),st.setFromMatrixPosition(yt.matrixWorld);const ot=Ye.distanceTo(st),wt=Pe.projectionMatrix.elements,Dt=yt.projectionMatrix.elements,yn=wt[14]/(wt[10]-1),tt=wt[14]/(wt[10]+1),un=(wt[9]+1)/wt[5],an=(wt[9]-1)/wt[5],rn=(wt[8]-1)/wt[0],Bt=(Dt[8]+1)/Dt[0],kn=yn*rn,lt=yn*Bt,nt=ot/(-rn+Bt),Ct=nt*-rn;Pe.matrixWorld.decompose(we.position,we.quaternion,we.scale),we.translateX(Ct),we.translateZ(nt),we.matrixWorld.compose(we.position,we.quaternion,we.scale),we.matrixWorldInverse.copy(we.matrixWorld).invert();const nn=yn+nt,Ht=tt+nt;we.projectionMatrix.makePerspective(kn-Ct,lt+(ot-Ct),un*tt/Ht*nn,an*tt/Ht*nn,nn,Ht)}(q,z,k):q.projectionMatrix.copy(z.projectionMatrix)},this.getCamera=function(){return q},this.getFoveation=function(){return null!==y?y.fixedFoveation:null!==x?x.fixedFoveation:void 0},this.setFoveation=function(we){null!==y&&(y.fixedFoveation=we),null!==x&&void 0!==x.fixedFoveation&&(x.fixedFoveation=we)};let de=null;const Ee=new Vm;Ee.setAnimationLoop(function Se(we,Pe){if(p=Pe.getViewerPose(f||l),M=Pe,null!==p){const yt=p.views;null!==x&&(e.setRenderTargetFramebuffer(D,x.framebuffer),e.setRenderTarget(D));let ot=!1;yt.length!==q.cameras.length&&(q.cameras.length=0,ot=!0);for(let wt=0;wt<yt.length;wt++){const Dt=yt[wt];let yn=null;if(null!==x)yn=x.getViewport(Dt);else{const un=g.getViewSubImage(y,Dt);yn=un.viewport,0===wt&&(e.setRenderTargetTextures(D,un.colorTexture,y.ignoreDepthValues?void 0:un.depthStencilTexture),e.setRenderTarget(D))}let tt=$[wt];void 0===tt&&(tt=new pr,tt.layers.enable(wt),tt.viewport=new hi,$[wt]=tt),tt.matrix.fromArray(Dt.transform.matrix),tt.projectionMatrix.fromArray(Dt.projectionMatrix),tt.viewport.set(yn.x,yn.y,yn.width,yn.height),0===wt&&q.matrix.copy(tt.matrix),!0===ot&&q.cameras.push(tt)}}for(let yt=0;yt<N.length;yt++){const ot=F[yt],wt=N[yt];null!==ot&&void 0!==wt&&wt.update(ot,Pe,f||l)}de&&de(we,Pe),M=null}),this.setAnimationLoop=function(we){de=we},this.dispose=function(){}}}function Hv(c,e){function s(E,D){E.opacity.value=D.opacity,D.color&&E.diffuse.value.copy(D.color),D.emissive&&E.emissive.value.copy(D.emissive).multiplyScalar(D.emissiveIntensity),D.map&&(E.map.value=D.map),D.alphaMap&&(E.alphaMap.value=D.alphaMap),D.bumpMap&&(E.bumpMap.value=D.bumpMap,E.bumpScale.value=D.bumpScale,1===D.side&&(E.bumpScale.value*=-1)),D.displacementMap&&(E.displacementMap.value=D.displacementMap,E.displacementScale.value=D.displacementScale,E.displacementBias.value=D.displacementBias),D.emissiveMap&&(E.emissiveMap.value=D.emissiveMap),D.normalMap&&(E.normalMap.value=D.normalMap,E.normalScale.value.copy(D.normalScale),1===D.side&&E.normalScale.value.negate()),D.specularMap&&(E.specularMap.value=D.specularMap),D.alphaTest>0&&(E.alphaTest.value=D.alphaTest);const N=e.get(D).envMap;if(N&&(E.envMap.value=N,E.flipEnvMap.value=N.isCubeTexture&&!1===N.isRenderTargetTexture?-1:1,E.reflectivity.value=D.reflectivity,E.ior.value=D.ior,E.refractionRatio.value=D.refractionRatio),D.lightMap){E.lightMap.value=D.lightMap;const k=!0!==c.physicallyCorrectLights?Math.PI:1;E.lightMapIntensity.value=D.lightMapIntensity*k}let F,z;D.aoMap&&(E.aoMap.value=D.aoMap,E.aoMapIntensity.value=D.aoMapIntensity),D.map?F=D.map:D.specularMap?F=D.specularMap:D.displacementMap?F=D.displacementMap:D.normalMap?F=D.normalMap:D.bumpMap?F=D.bumpMap:D.roughnessMap?F=D.roughnessMap:D.metalnessMap?F=D.metalnessMap:D.alphaMap?F=D.alphaMap:D.emissiveMap?F=D.emissiveMap:D.clearcoatMap?F=D.clearcoatMap:D.clearcoatNormalMap?F=D.clearcoatNormalMap:D.clearcoatRoughnessMap?F=D.clearcoatRoughnessMap:D.iridescenceMap?F=D.iridescenceMap:D.iridescenceThicknessMap?F=D.iridescenceThicknessMap:D.specularIntensityMap?F=D.specularIntensityMap:D.specularColorMap?F=D.specularColorMap:D.transmissionMap?F=D.transmissionMap:D.thicknessMap?F=D.thicknessMap:D.sheenColorMap?F=D.sheenColorMap:D.sheenRoughnessMap&&(F=D.sheenRoughnessMap),void 0!==F&&(F.isWebGLRenderTarget&&(F=F.texture),!0===F.matrixAutoUpdate&&F.updateMatrix(),E.uvTransform.value.copy(F.matrix)),D.aoMap?z=D.aoMap:D.lightMap&&(z=D.lightMap),void 0!==z&&(z.isWebGLRenderTarget&&(z=z.texture),!0===z.matrixAutoUpdate&&z.updateMatrix(),E.uv2Transform.value.copy(z.matrix))}return{refreshFogUniforms:function t(E,D){E.fogColor.value.copy(D.color),D.isFog?(E.fogNear.value=D.near,E.fogFar.value=D.far):D.isFogExp2&&(E.fogDensity.value=D.density)},refreshMaterialUniforms:function n(E,D,N,F,z){D.isMeshBasicMaterial||D.isMeshLambertMaterial?s(E,D):D.isMeshToonMaterial?(s(E,D),function g(E,D){D.gradientMap&&(E.gradientMap.value=D.gradientMap)}(E,D)):D.isMeshPhongMaterial?(s(E,D),function p(E,D){E.specular.value.copy(D.specular),E.shininess.value=Math.max(D.shininess,1e-4)}(E,D)):D.isMeshStandardMaterial?(s(E,D),function y(E,D){E.roughness.value=D.roughness,E.metalness.value=D.metalness,D.roughnessMap&&(E.roughnessMap.value=D.roughnessMap),D.metalnessMap&&(E.metalnessMap.value=D.metalnessMap),e.get(D).envMap&&(E.envMapIntensity.value=D.envMapIntensity)}(E,D),D.isMeshPhysicalMaterial&&function x(E,D,N){E.ior.value=D.ior,D.sheen>0&&(E.sheenColor.value.copy(D.sheenColor).multiplyScalar(D.sheen),E.sheenRoughness.value=D.sheenRoughness,D.sheenColorMap&&(E.sheenColorMap.value=D.sheenColorMap),D.sheenRoughnessMap&&(E.sheenRoughnessMap.value=D.sheenRoughnessMap)),D.clearcoat>0&&(E.clearcoat.value=D.clearcoat,E.clearcoatRoughness.value=D.clearcoatRoughness,D.clearcoatMap&&(E.clearcoatMap.value=D.clearcoatMap),D.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap),D.clearcoatNormalMap&&(E.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),E.clearcoatNormalMap.value=D.clearcoatNormalMap,1===D.side&&E.clearcoatNormalScale.value.negate())),D.iridescence>0&&(E.iridescence.value=D.iridescence,E.iridescenceIOR.value=D.iridescenceIOR,E.iridescenceThicknessMinimum.value=D.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=D.iridescenceThicknessRange[1],D.iridescenceMap&&(E.iridescenceMap.value=D.iridescenceMap),D.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=D.iridescenceThicknessMap)),D.transmission>0&&(E.transmission.value=D.transmission,E.transmissionSamplerMap.value=N.texture,E.transmissionSamplerSize.value.set(N.width,N.height),D.transmissionMap&&(E.transmissionMap.value=D.transmissionMap),E.thickness.value=D.thickness,D.thicknessMap&&(E.thicknessMap.value=D.thicknessMap),E.attenuationDistance.value=D.attenuationDistance,E.attenuationColor.value.copy(D.attenuationColor)),E.specularIntensity.value=D.specularIntensity,E.specularColor.value.copy(D.specularColor),D.specularIntensityMap&&(E.specularIntensityMap.value=D.specularIntensityMap),D.specularColorMap&&(E.specularColorMap.value=D.specularColorMap)}(E,D,z)):D.isMeshMatcapMaterial?(s(E,D),function M(E,D){D.matcap&&(E.matcap.value=D.matcap)}(E,D)):D.isMeshDepthMaterial?s(E,D):D.isMeshDistanceMaterial?(s(E,D),function T(E,D){E.referencePosition.value.copy(D.referencePosition),E.nearDistance.value=D.nearDistance,E.farDistance.value=D.farDistance}(E,D)):D.isMeshNormalMaterial?s(E,D):D.isLineBasicMaterial?(function a(E,D){E.diffuse.value.copy(D.color),E.opacity.value=D.opacity}(E,D),D.isLineDashedMaterial&&function l(E,D){E.dashSize.value=D.dashSize,E.totalSize.value=D.dashSize+D.gapSize,E.scale.value=D.scale}(E,D)):D.isPointsMaterial?function d(E,D,N,F){let z;E.diffuse.value.copy(D.color),E.opacity.value=D.opacity,E.size.value=D.size*N,E.scale.value=.5*F,D.map&&(E.map.value=D.map),D.alphaMap&&(E.alphaMap.value=D.alphaMap),D.alphaTest>0&&(E.alphaTest.value=D.alphaTest),D.map?z=D.map:D.alphaMap&&(z=D.alphaMap),void 0!==z&&(!0===z.matrixAutoUpdate&&z.updateMatrix(),E.uvTransform.value.copy(z.matrix))}(E,D,N,F):D.isSpriteMaterial?function f(E,D){let N;E.diffuse.value.copy(D.color),E.opacity.value=D.opacity,E.rotation.value=D.rotation,D.map&&(E.map.value=D.map),D.alphaMap&&(E.alphaMap.value=D.alphaMap),D.alphaTest>0&&(E.alphaTest.value=D.alphaTest),D.map?N=D.map:D.alphaMap&&(N=D.alphaMap),void 0!==N&&(!0===N.matrixAutoUpdate&&N.updateMatrix(),E.uvTransform.value.copy(N.matrix))}(E,D):D.isShadowMaterial?(E.color.value.copy(D.color),E.opacity.value=D.opacity):D.isShaderMaterial&&(D.uniformsNeedUpdate=!1)}}}function Vv(c,e,t,n){let s={},a={},l=[];const d=t.isWebGL2?c.getParameter(35375):0;function M(F,z,k){const $=F.value;if(void 0===k[z])return k[z]="number"==typeof $?$:$.clone(),!0;if("number"==typeof $){if(k[z]!==$)return k[z]=$,!0}else{const q=k[z];if(!1===q.equals($))return q.copy($),!0}return!1}function E(F){const z=F.value,k={boundary:0,storage:0};return"number"==typeof z?(k.boundary=4,k.storage=4):z.isVector2?(k.boundary=8,k.storage=8):z.isVector3||z.isColor?(k.boundary=16,k.storage=12):z.isVector4?(k.boundary=16,k.storage=16):z.isMatrix3?(k.boundary=48,k.storage=48):z.isMatrix4?(k.boundary=64,k.storage=64):z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",z),k}function D(F){const z=F.target;z.removeEventListener("dispose",D);const k=l.indexOf(z.__bindingPointIndex);l.splice(k,1),c.deleteBuffer(s[z.id]),delete s[z.id],delete a[z.id]}return{bind:function f(F,z){n.uniformBlockBinding(F,z.program)},update:function p(F,z){let k=s[F.id];void 0===k&&(function T(F){const z=F.uniforms;let k=0;let q=0;for(let ae=0,U=z.length;ae<U;ae++){const Q=z[ae],he=E(Q);if(Q.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=k,ae>0){q=k%16;const ge=16-q;0!==q&&ge-he.boundary<0&&(k+=16-q,Q.__offset=k)}k+=he.storage}q=k%16,q>0&&(k+=16-q),F.__size=k,F.__cache={}}(F),k=function g(F){const z=function y(){for(let F=0;F<d;F++)if(-1===l.indexOf(F))return l.push(F),F;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();F.__bindingPointIndex=z;const k=c.createBuffer(),$=F.__size,q=F.usage;return c.bindBuffer(35345,k),c.bufferData(35345,$,q),c.bindBuffer(35345,null),c.bindBufferBase(35345,z,k),k}(F),s[F.id]=k,F.addEventListener("dispose",D)),n.updateUBOMapping(F,z.program);const q=e.render.frame;a[F.id]!==q&&(function x(F){const k=F.uniforms,$=F.__cache;c.bindBuffer(35345,s[F.id]);for(let q=0,ae=k.length;q<ae;q++){const U=k[q];if(!0===M(U,q,$)){const Q=U.value,he=U.__offset;"number"==typeof Q?(U.__data[0]=Q,c.bufferSubData(35345,he,U.__data)):(U.value.isMatrix3?(U.__data[0]=U.value.elements[0],U.__data[1]=U.value.elements[1],U.__data[2]=U.value.elements[2],U.__data[3]=U.value.elements[0],U.__data[4]=U.value.elements[3],U.__data[5]=U.value.elements[4],U.__data[6]=U.value.elements[5],U.__data[7]=U.value.elements[0],U.__data[8]=U.value.elements[6],U.__data[9]=U.value.elements[7],U.__data[10]=U.value.elements[8],U.__data[11]=U.value.elements[0]):Q.toArray(U.__data),c.bufferSubData(35345,he,U.__data))}}c.bindBuffer(35345,null)}(F),a[F.id]=q)},dispose:function N(){for(const F in s)c.deleteBuffer(s[F]);l=[],s={},a={}}}}function Gv(c={}){this.isWebGLRenderer=!0;const e=void 0!==c.canvas?c.canvas:function hw(){const c=Td("canvas");return c.style.display="block",c}(),t=void 0!==c.context?c.context:null,n=void 0===c.depth||c.depth,s=void 0===c.stencil||c.stencil,a=void 0!==c.antialias&&c.antialias,l=void 0===c.premultipliedAlpha||c.premultipliedAlpha,d=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,f=void 0!==c.powerPreference?c.powerPreference:"default",p=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let g;g=null!==t?t.getContextAttributes().alpha:void 0!==c.alpha&&c.alpha;let y=null,x=null;const M=[],T=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Qc,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const E=this;let D=!1,N=0,F=0,z=null,k=-1,$=null;const q=new hi,ae=new hi;let U=null,Q=e.width,he=e.height,ge=1,Ye=null,st=null;const be=new hi(0,0,Q,he),He=new hi(0,0,Q,he);let de=!1;const Se=new Hm;let Ee=!1,we=!1,Pe=null;const yt=new On,ot=new Ke,wt=new Z,Dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function yn(){return null===z?ge:1}let an,rn,Bt,kn,lt,nt,Ct,nn,Ht,Fn,wn,vn,Ii,yi,se,J,Ue,xt,At,$t,En,ee,pt,It,tt=t;function un(te,Ie){for(let Ve=0;Ve<te.length;Ve++){const dt=e.getContext(te[Ve],Ie);if(null!==dt)return dt}return null}try{const te={alpha:!0,depth:n,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r143"),e.addEventListener("webglcontextlost",In,!1),e.addEventListener("webglcontextrestored",ni,!1),e.addEventListener("webglcontextcreationerror",ji,!1),null===tt){const Ie=["webgl2","webgl","experimental-webgl"];if(!0===E.isWebGL1Renderer&&Ie.shift(),tt=un(Ie,te),null===tt)throw un(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===tt.getShaderPrecisionFormat&&(tt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}function qt(){an=new ov(tt),rn=new Vd(tt,an,c),an.init(rn),ee=new Fv(tt,an,rn),Bt=new Nv(tt,an,rn),kn=new Bb,lt=new Av,nt=new Mg(tt,an,Bt,lt,rn,ee,kn),Ct=new J0(E),nn=new og(E),Ht=new y0(tt,rn),pt=new _u(tt,an,Ht,rn),Fn=new Fb(tt,Ht,kn,pt),wn=new Hb(tt,Fn,Ht,kn),At=new zb(tt,rn,nt),J=new Ob(lt),vn=new Cv(E,Ct,nn,an,rn,pt,J),Ii=new Hv(E,lt),yi=new Pv,se=new ep(an,rn),xt=new ig(E,Ct,Bt,wn,g,l),Ue=new Ov(E,wn,rn),It=new Vv(tt,kn,rn,Bt),$t=new $f(tt,an,kn,rn),En=new kb(tt,an,kn,rn),kn.programs=vn.programs,E.capabilities=rn,E.extensions=an,E.properties=lt,E.renderLists=yi,E.shadowMap=Ue,E.state=Bt,E.info=kn}qt();const Yt=new zv(E,tt);function In(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function ni(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const te=kn.autoReset,Ie=Ue.enabled,Ve=Ue.autoUpdate,Oe=Ue.needsUpdate,dt=Ue.type;qt(),kn.autoReset=te,Ue.enabled=Ie,Ue.autoUpdate=Ve,Ue.needsUpdate=Oe,Ue.type=dt}function ji(te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function pe(te){const Ie=te.target;Ie.removeEventListener("dispose",pe),function Gt(te){(function qe(te){const Ie=lt.get(te).programs;void 0!==Ie&&(Ie.forEach(function(Ve){vn.releaseProgram(Ve)}),te.isShaderMaterial&&vn.releaseShaderCache(te))})(te),lt.remove(te)}(Ie)}this.xr=Yt,this.getContext=function(){return tt},this.getContextAttributes=function(){return tt.getContextAttributes()},this.forceContextLoss=function(){const te=an.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=an.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(te){void 0!==te&&(ge=te,this.setSize(Q,he,!1))},this.getSize=function(te){return te.set(Q,he)},this.setSize=function(te,Ie,Ve){Yt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Q=te,he=Ie,e.width=Math.floor(te*ge),e.height=Math.floor(Ie*ge),!1!==Ve&&(e.style.width=te+"px",e.style.height=Ie+"px"),this.setViewport(0,0,te,Ie))},this.getDrawingBufferSize=function(te){return te.set(Q*ge,he*ge).floor()},this.setDrawingBufferSize=function(te,Ie,Ve){Q=te,he=Ie,ge=Ve,e.width=Math.floor(te*Ve),e.height=Math.floor(Ie*Ve),this.setViewport(0,0,te,Ie)},this.getCurrentViewport=function(te){return te.copy(q)},this.getViewport=function(te){return te.copy(be)},this.setViewport=function(te,Ie,Ve,Oe){te.isVector4?be.set(te.x,te.y,te.z,te.w):be.set(te,Ie,Ve,Oe),Bt.viewport(q.copy(be).multiplyScalar(ge).floor())},this.getScissor=function(te){return te.copy(He)},this.setScissor=function(te,Ie,Ve,Oe){te.isVector4?He.set(te.x,te.y,te.z,te.w):He.set(te,Ie,Ve,Oe),Bt.scissor(ae.copy(He).multiplyScalar(ge).floor())},this.getScissorTest=function(){return de},this.setScissorTest=function(te){Bt.setScissorTest(de=te)},this.setOpaqueSort=function(te){Ye=te},this.setTransparentSort=function(te){st=te},this.getClearColor=function(te){return te.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function(te=!0,Ie=!0,Ve=!0){let Oe=0;te&&(Oe|=16384),Ie&&(Oe|=256),Ve&&(Oe|=1024),tt.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",In,!1),e.removeEventListener("webglcontextrestored",ni,!1),e.removeEventListener("webglcontextcreationerror",ji,!1),yi.dispose(),se.dispose(),lt.dispose(),Ct.dispose(),nn.dispose(),wn.dispose(),pt.dispose(),It.dispose(),vn.dispose(),Yt.dispose(),Yt.removeEventListener("sessionstart",fi),Yt.removeEventListener("sessionend",Br),Pe&&(Pe.dispose(),Pe=null),mr.stop()},this.renderBufferDirect=function(te,Ie,Ve,Oe,dt,Ln){null===Ie&&(Ie=Dt);const Gn=dt.isMesh&&dt.matrixWorld.determinant()<0,Xn=function pT(te,Ie,Ve,Oe,dt){!0!==Ie.isScene&&(Ie=Dt),nt.resetTextureUnits();const Ln=Ie.fog,Xn=null===z?E.outputEncoding:!0===z.isXRRenderTarget?z.texture.encoding:Qc,Yn=(Oe.isMeshStandardMaterial?nn:Ct).get(Oe.envMap||(Oe.isMeshStandardMaterial?Ie.environment:null)),Si=!0===Oe.vertexColors&&!!Ve.attributes.color&&4===Ve.attributes.color.itemSize,li=!!Oe.normalMap&&!!Ve.attributes.tangent,pi=!!Ve.morphAttributes.position,or=!!Ve.morphAttributes.normal,kh=!!Ve.morphAttributes.color,zp=Oe.toneMapped?E.toneMapping:0,Hp=Ve.morphAttributes.position||Ve.morphAttributes.normal||Ve.morphAttributes.color,sl=void 0!==Hp?Hp.length:0,wi=lt.get(Oe),Vp=x.state.lights;!0!==Ee||!0!==we&&te===$||J.setState(Oe,te,te===$&&Oe.id===k);let br=!1;Oe.version===wi.__version?(wi.needsLights&&wi.lightsStateVersion!==Vp.state.version||wi.outputEncoding!==Xn||dt.isInstancedMesh&&!1===wi.instancing||!dt.isInstancedMesh&&!0===wi.instancing||dt.isSkinnedMesh&&!1===wi.skinning||!dt.isSkinnedMesh&&!0===wi.skinning||wi.envMap!==Yn||!0===Oe.fog&&wi.fog!==Ln||void 0!==wi.numClippingPlanes&&(wi.numClippingPlanes!==J.numPlanes||wi.numIntersection!==J.numIntersection)||wi.vertexAlphas!==Si||wi.vertexTangents!==li||wi.morphTargets!==pi||wi.morphNormals!==or||wi.morphColors!==kh||wi.toneMapping!==zp||!0===rn.isWebGL2&&wi.morphTargetsCount!==sl)&&(br=!0):(br=!0,wi.__version=Oe.version);let Vo=wi.currentProgram;!0===br&&(Vo=yS(Oe,Ie,dt));let td=!1,By=!1,vS=!1;const bs=Vo.getUniforms(),Uy=wi.uniforms;if(Bt.useProgram(Vo.program)&&(td=!0,By=!0,vS=!0),Oe.id!==k&&(k=Oe.id,By=!0),td||$!==te){if(bs.setValue(tt,"projectionMatrix",te.projectionMatrix),rn.logarithmicDepthBuffer&&bs.setValue(tt,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),$!==te&&($=te,By=!0,vS=!0),Oe.isShaderMaterial||Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshStandardMaterial||Oe.envMap){const uo=bs.map.cameraPosition;void 0!==uo&&uo.setValue(tt,wt.setFromMatrixPosition(te.matrixWorld))}(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&bs.setValue(tt,"isOrthographic",!0===te.isOrthographicCamera),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial||Oe.isShadowMaterial||dt.isSkinnedMesh)&&bs.setValue(tt,"viewMatrix",te.matrixWorldInverse)}if(dt.isSkinnedMesh){bs.setOptional(tt,dt,"bindMatrix"),bs.setOptional(tt,dt,"bindMatrixInverse");const uo=dt.skeleton;uo&&(rn.floatVertexTextures?(null===uo.boneTexture&&uo.computeBoneTexture(),bs.setValue(tt,"boneTexture",uo.boneTexture,nt),bs.setValue(tt,"boneTextureSize",uo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const _S=Ve.morphAttributes;if((void 0!==_S.position||void 0!==_S.normal||void 0!==_S.color&&!0===rn.isWebGL2)&&At.update(dt,Ve,Oe,Vo),(By||wi.receiveShadow!==dt.receiveShadow)&&(wi.receiveShadow=dt.receiveShadow,bs.setValue(tt,"receiveShadow",dt.receiveShadow)),By&&(bs.setValue(tt,"toneMappingExposure",E.toneMappingExposure),wi.needsLights&&function mT(te,Ie){te.ambientLightColor.needsUpdate=Ie,te.lightProbe.needsUpdate=Ie,te.directionalLights.needsUpdate=Ie,te.directionalLightShadows.needsUpdate=Ie,te.pointLights.needsUpdate=Ie,te.pointLightShadows.needsUpdate=Ie,te.spotLights.needsUpdate=Ie,te.spotLightShadows.needsUpdate=Ie,te.rectAreaLights.needsUpdate=Ie,te.hemisphereLights.needsUpdate=Ie}(Uy,vS),Ln&&!0===Oe.fog&&Ii.refreshFogUniforms(Uy,Ln),Ii.refreshMaterialUniforms(Uy,Oe,ge,he,Pe),Qf.upload(tt,wi.uniformsList,Uy,nt)),Oe.isShaderMaterial&&!0===Oe.uniformsNeedUpdate&&(Qf.upload(tt,wi.uniformsList,Uy,nt),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&bs.setValue(tt,"center",dt.center),bs.setValue(tt,"modelViewMatrix",dt.modelViewMatrix),bs.setValue(tt,"normalMatrix",dt.normalMatrix),bs.setValue(tt,"modelMatrix",dt.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const uo=Oe.uniformsGroups;for(let xS=0,yT=uo.length;xS<yT;xS++)if(rn.isWebGL2){const bD=uo[xS];It.update(bD,Vo),It.bind(bD,Vo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vo}(te,Ie,Ve,Oe,dt);Bt.setMaterial(Oe,Gn);let Yn=Ve.index;const Si=Ve.attributes.position;if(null===Yn){if(void 0===Si||0===Si.count)return}else if(0===Yn.count)return;let li=1;!0===Oe.wireframe&&(Yn=Fn.getWireframeAttribute(Ve),li=2),pt.setup(dt,Oe,Xn,Ve,Yn);let pi,or=$t;null!==Yn&&(pi=Ht.get(Yn),or=En,or.setIndex(pi));const kh=null!==Yn?Yn.count:Si.count,zp=Ve.drawRange.start*li,Hp=Ve.drawRange.count*li,sl=null!==Ln?Ln.start*li:0,wi=null!==Ln?Ln.count*li:1/0,Vp=Math.max(zp,sl),br=Math.min(kh,zp+Hp,sl+wi)-1,Vo=Math.max(0,br-Vp+1);if(0!==Vo){if(dt.isMesh)!0===Oe.wireframe?(Bt.setLineWidth(Oe.wireframeLinewidth*yn()),or.setMode(1)):or.setMode(4);else if(dt.isLine){let td=Oe.linewidth;void 0===td&&(td=1),Bt.setLineWidth(td*yn()),or.setMode(dt.isLineSegments?1:dt.isLineLoop?2:3)}else dt.isPoints?or.setMode(0):dt.isSprite&&or.setMode(4);if(dt.isInstancedMesh)or.renderInstances(Vp,Vo,dt.count);else if(Ve.isInstancedBufferGeometry){const td=Math.min(Ve.instanceCount,Ve._maxInstanceCount);or.renderInstances(Vp,Vo,td)}else or.render(Vp,Vo)}},this.compile=function(te,Ie){x=se.get(te),x.init(),T.push(x),te.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Ie.layers)&&(x.pushLight(Ve),Ve.castShadow&&x.pushShadow(Ve))}),x.setupLights(E.physicallyCorrectLights),te.traverse(function(Ve){const Oe=Ve.material;if(Oe)if(Array.isArray(Oe))for(let dt=0;dt<Oe.length;dt++)yS(Oe[dt],te,Ve);else yS(Oe,te,Ve)}),T.pop(),x=null};let Qt=null;function fi(){mr.stop()}function Br(){mr.start()}const mr=new Vm;function ed(te,Ie,Ve,Oe){if(!1===te.visible)return;if(te.layers.test(Ie.layers))if(te.isGroup)Ve=te.renderOrder;else if(te.isLOD)!0===te.autoUpdate&&te.update(Ie);else if(te.isLight)x.pushLight(te),te.castShadow&&x.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||Se.intersectsSprite(te)){Oe&&wt.setFromMatrixPosition(te.matrixWorld).applyMatrix4(yt);const Gn=wn.update(te),Xn=te.material;Xn.visible&&y.push(te,Gn,Xn,Ve,wt.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(te.isSkinnedMesh&&te.skeleton.frame!==kn.render.frame&&(te.skeleton.update(),te.skeleton.frame=kn.render.frame),!te.frustumCulled||Se.intersectsObject(te))){Oe&&wt.setFromMatrixPosition(te.matrixWorld).applyMatrix4(yt);const Gn=wn.update(te),Xn=te.material;if(Array.isArray(Xn)){const Yn=Gn.groups;for(let Si=0,li=Yn.length;Si<li;Si++){const pi=Yn[Si],or=Xn[pi.materialIndex];or&&or.visible&&y.push(te,Gn,or,Ve,wt.z,pi)}}else Xn.visible&&y.push(te,Gn,Xn,Ve,wt.z,null)}const Ln=te.children;for(let Gn=0,Xn=Ln.length;Gn<Xn;Gn++)ed(Ln[Gn],Ie,Ve,Oe)}function sr(te,Ie,Ve,Oe){const dt=te.opaque,Ln=te.transmissive,Gn=te.transparent;x.setupLightsView(Ve),Ln.length>0&&function Dc(te,Ie,Ve){const Oe=rn.isWebGL2;null===Pe&&(Pe=new ms(1,1,{generateMipmaps:!0,type:an.has("EXT_color_buffer_half_float")?Ce:w,minFilter:Os,samples:Oe&&!0===a?4:0})),E.getDrawingBufferSize(ot),Oe?Pe.setSize(ot.x,ot.y):Pe.setSize(Ef(ot.x),Ef(ot.y));const dt=E.getRenderTarget();E.setRenderTarget(Pe),E.clear();const Ln=E.toneMapping;E.toneMapping=0,Ho(te,Ie,Ve),E.toneMapping=Ln,nt.updateMultisampleRenderTarget(Pe),nt.updateRenderTargetMipmap(Pe),E.setRenderTarget(dt)}(dt,Ie,Ve),Oe&&Bt.viewport(q.copy(Oe)),dt.length>0&&Ho(dt,Ie,Ve),Ln.length>0&&Ho(Ln,Ie,Ve),Gn.length>0&&Ho(Gn,Ie,Ve),Bt.buffers.depth.setTest(!0),Bt.buffers.depth.setMask(!0),Bt.buffers.color.setMask(!0),Bt.setPolygonOffset(!1)}function Ho(te,Ie,Ve){const Oe=!0===Ie.isScene?Ie.overrideMaterial:null;for(let dt=0,Ln=te.length;dt<Ln;dt++){const Gn=te[dt],Xn=Gn.object,Yn=Gn.geometry,Si=null===Oe?Gn.material:Oe,li=Gn.group;Xn.layers.test(Ve.layers)&&fT(Xn,Ie,Ve,Yn,Si,li)}}function fT(te,Ie,Ve,Oe,dt,Ln){te.onBeforeRender(E,Ie,Ve,Oe,dt,Ln),te.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),dt.onBeforeRender(E,Ie,Ve,Oe,te,Ln),!0===dt.transparent&&2===dt.side?(dt.side=1,dt.needsUpdate=!0,E.renderBufferDirect(Ve,Ie,Oe,dt,te,Ln),dt.side=0,dt.needsUpdate=!0,E.renderBufferDirect(Ve,Ie,Oe,dt,te,Ln),dt.side=2):E.renderBufferDirect(Ve,Ie,Oe,dt,te,Ln),te.onAfterRender(E,Ie,Ve,Oe,dt,Ln)}function yS(te,Ie,Ve){!0!==Ie.isScene&&(Ie=Dt);const Oe=lt.get(te),dt=x.state.lights,Gn=dt.state.version,Xn=vn.getParameters(te,dt.state,x.state.shadowsArray,Ie,Ve),Yn=vn.getProgramCacheKey(Xn);let Si=Oe.programs;Oe.environment=te.isMeshStandardMaterial?Ie.environment:null,Oe.fog=Ie.fog,Oe.envMap=(te.isMeshStandardMaterial?nn:Ct).get(te.envMap||Oe.environment),void 0===Si&&(te.addEventListener("dispose",pe),Si=new Map,Oe.programs=Si);let li=Si.get(Yn);if(void 0!==li){if(Oe.currentProgram===li&&Oe.lightsStateVersion===Gn)return xD(te,Xn),li}else Xn.uniforms=vn.getUniforms(te),te.onBuild(Ve,Xn,E),te.onBeforeCompile(Xn,E),li=vn.acquireProgram(Xn,Yn),Si.set(Yn,li),Oe.uniforms=Xn.uniforms;const pi=Oe.uniforms;(!te.isShaderMaterial&&!te.isRawShaderMaterial||!0===te.clipping)&&(pi.clippingPlanes=J.uniform),xD(te,Xn),Oe.needsLights=function gT(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&!0===te.lights}(te),Oe.lightsStateVersion=Gn,Oe.needsLights&&(pi.ambientLightColor.value=dt.state.ambient,pi.lightProbe.value=dt.state.probe,pi.directionalLights.value=dt.state.directional,pi.directionalLightShadows.value=dt.state.directionalShadow,pi.spotLights.value=dt.state.spot,pi.spotLightShadows.value=dt.state.spotShadow,pi.rectAreaLights.value=dt.state.rectArea,pi.ltc_1.value=dt.state.rectAreaLTC1,pi.ltc_2.value=dt.state.rectAreaLTC2,pi.pointLights.value=dt.state.point,pi.pointLightShadows.value=dt.state.pointShadow,pi.hemisphereLights.value=dt.state.hemi,pi.directionalShadowMap.value=dt.state.directionalShadowMap,pi.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,pi.spotShadowMap.value=dt.state.spotShadowMap,pi.spotShadowMatrix.value=dt.state.spotShadowMatrix,pi.pointShadowMap.value=dt.state.pointShadowMap,pi.pointShadowMatrix.value=dt.state.pointShadowMatrix);const or=li.getUniforms(),kh=Qf.seqWithValue(or.seq,pi);return Oe.currentProgram=li,Oe.uniformsList=kh,li}function xD(te,Ie){const Ve=lt.get(te);Ve.outputEncoding=Ie.outputEncoding,Ve.instancing=Ie.instancing,Ve.skinning=Ie.skinning,Ve.morphTargets=Ie.morphTargets,Ve.morphNormals=Ie.morphNormals,Ve.morphColors=Ie.morphColors,Ve.morphTargetsCount=Ie.morphTargetsCount,Ve.numClippingPlanes=Ie.numClippingPlanes,Ve.numIntersection=Ie.numClipIntersection,Ve.vertexAlphas=Ie.vertexAlphas,Ve.vertexTangents=Ie.vertexTangents,Ve.toneMapping=Ie.toneMapping}mr.setAnimationLoop(function Kt(te){Qt&&Qt(te)}),typeof self<"u"&&mr.setContext(self),this.setAnimationLoop=function(te){Qt=te,Yt.setAnimationLoop(te),null===te?mr.stop():mr.start()},Yt.addEventListener("sessionstart",fi),Yt.addEventListener("sessionend",Br),this.render=function(te,Ie){if(void 0===Ie||!0===Ie.isCamera){if(!0!==D){if(!0===te.autoUpdate&&te.updateMatrixWorld(),null===Ie.parent&&Ie.updateMatrixWorld(),!0===Yt.enabled&&!0===Yt.isPresenting&&(!0===Yt.cameraAutoUpdate&&Yt.updateCamera(Ie),Ie=Yt.getCamera()),!0===te.isScene&&te.onBeforeRender(E,te,Ie,z),x=se.get(te,T.length),x.init(),T.push(x),yt.multiplyMatrices(Ie.projectionMatrix,Ie.matrixWorldInverse),Se.setFromProjectionMatrix(yt),we=this.localClippingEnabled,Ee=J.init(this.clippingPlanes,we,Ie),y=yi.get(te,M.length),y.init(),M.push(y),ed(te,Ie,0,E.sortObjects),y.finish(),!0===E.sortObjects&&y.sort(Ye,st),!0===Ee&&J.beginShadows(),Ue.render(x.state.shadowsArray,te,Ie),!0===Ee&&J.endShadows(),!0===this.info.autoReset&&this.info.reset(),xt.render(y,te),x.setupLights(E.physicallyCorrectLights),Ie.isArrayCamera){const Oe=Ie.cameras;for(let dt=0,Ln=Oe.length;dt<Ln;dt++){const Gn=Oe[dt];sr(y,te,Gn,Gn.viewport)}}else sr(y,te,Ie);null!==z&&(nt.updateMultisampleRenderTarget(z),nt.updateRenderTargetMipmap(z)),!0===te.isScene&&te.onAfterRender(E,te,Ie),pt.resetDefaultState(),k=-1,$=null,T.pop(),x=T.length>0?T[T.length-1]:null,M.pop(),y=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(te,Ie,Ve){lt.get(te.texture).__webglTexture=Ie,lt.get(te.depthTexture).__webglTexture=Ve;const Oe=lt.get(te);Oe.__hasExternalTextures=!0,Oe.__hasExternalTextures&&(Oe.__autoAllocateDepthBuffer=void 0===Ve,Oe.__autoAllocateDepthBuffer||!0===an.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(te,Ie){const Ve=lt.get(te);Ve.__webglFramebuffer=Ie,Ve.__useDefaultFramebuffer=void 0===Ie},this.setRenderTarget=function(te,Ie=0,Ve=0){z=te,N=Ie,F=Ve;let Oe=!0;if(te){const Yn=lt.get(te);void 0!==Yn.__useDefaultFramebuffer?(Bt.bindFramebuffer(36160,null),Oe=!1):void 0===Yn.__webglFramebuffer?nt.setupRenderTarget(te):Yn.__hasExternalTextures&&nt.rebindTextures(te,lt.get(te.texture).__webglTexture,lt.get(te.depthTexture).__webglTexture)}let dt=null,Ln=!1,Gn=!1;if(te){const Yn=te.texture;(Yn.isData3DTexture||Yn.isDataArrayTexture)&&(Gn=!0);const Si=lt.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(dt=Si[Ie],Ln=!0):dt=rn.isWebGL2&&te.samples>0&&!1===nt.useMultisampledRTT(te)?lt.get(te).__webglMultisampledFramebuffer:Si,q.copy(te.viewport),ae.copy(te.scissor),U=te.scissorTest}else q.copy(be).multiplyScalar(ge).floor(),ae.copy(He).multiplyScalar(ge).floor(),U=de;if(Bt.bindFramebuffer(36160,dt)&&rn.drawBuffers&&Oe&&Bt.drawBuffers(te,dt),Bt.viewport(q),Bt.scissor(ae),Bt.setScissorTest(U),Ln){const Yn=lt.get(te.texture);tt.framebufferTexture2D(36160,36064,34069+Ie,Yn.__webglTexture,Ve)}else if(Gn){const Yn=lt.get(te.texture);tt.framebufferTextureLayer(36160,36064,Yn.__webglTexture,Ve||0,Ie||0)}k=-1},this.readRenderTargetPixels=function(te,Ie,Ve,Oe,dt,Ln,Gn){if(!te||!te.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Xn=lt.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&void 0!==Gn&&(Xn=Xn[Gn]),Xn){Bt.bindFramebuffer(36160,Xn);try{const Yn=te.texture,Si=Yn.format,li=Yn.type;if(Si!==qi&&ee.convert(Si)!==tt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const pi=li===Ce&&(an.has("EXT_color_buffer_half_float")||rn.isWebGL2&&an.has("EXT_color_buffer_float"));if(!(li===w||ee.convert(li)===tt.getParameter(35738)||li===re&&(rn.isWebGL2||an.has("OES_texture_float")||an.has("WEBGL_color_buffer_float"))||pi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ie>=0&&Ie<=te.width-Oe&&Ve>=0&&Ve<=te.height-dt&&tt.readPixels(Ie,Ve,Oe,dt,ee.convert(Si),ee.convert(li),Ln)}finally{const Yn=null!==z?lt.get(z).__webglFramebuffer:null;Bt.bindFramebuffer(36160,Yn)}}},this.copyFramebufferToTexture=function(te,Ie,Ve=0){const Oe=Math.pow(2,-Ve),dt=Math.floor(Ie.image.width*Oe),Ln=Math.floor(Ie.image.height*Oe);nt.setTexture2D(Ie,0),tt.copyTexSubImage2D(3553,Ve,0,0,te.x,te.y,dt,Ln),Bt.unbindTexture()},this.copyTextureToTexture=function(te,Ie,Ve,Oe=0){const dt=Ie.image.width,Ln=Ie.image.height,Gn=ee.convert(Ve.format),Xn=ee.convert(Ve.type);nt.setTexture2D(Ve,0),tt.pixelStorei(37440,Ve.flipY),tt.pixelStorei(37441,Ve.premultiplyAlpha),tt.pixelStorei(3317,Ve.unpackAlignment),Ie.isDataTexture?tt.texSubImage2D(3553,Oe,te.x,te.y,dt,Ln,Gn,Xn,Ie.image.data):Ie.isCompressedTexture?tt.compressedTexSubImage2D(3553,Oe,te.x,te.y,Ie.mipmaps[0].width,Ie.mipmaps[0].height,Gn,Ie.mipmaps[0].data):tt.texSubImage2D(3553,Oe,te.x,te.y,Gn,Xn,Ie.image),0===Oe&&Ve.generateMipmaps&&tt.generateMipmap(3553),Bt.unbindTexture()},this.copyTextureToTexture3D=function(te,Ie,Ve,Oe,dt=0){if(E.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ln=te.max.x-te.min.x+1,Gn=te.max.y-te.min.y+1,Xn=te.max.z-te.min.z+1,Yn=ee.convert(Oe.format),Si=ee.convert(Oe.type);let li;if(Oe.isData3DTexture)nt.setTexture3D(Oe,0),li=32879;else{if(!Oe.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");nt.setTexture2DArray(Oe,0),li=35866}tt.pixelStorei(37440,Oe.flipY),tt.pixelStorei(37441,Oe.premultiplyAlpha),tt.pixelStorei(3317,Oe.unpackAlignment);const pi=tt.getParameter(3314),or=tt.getParameter(32878),kh=tt.getParameter(3316),zp=tt.getParameter(3315),Hp=tt.getParameter(32877),sl=Ve.isCompressedTexture?Ve.mipmaps[0]:Ve.image;tt.pixelStorei(3314,sl.width),tt.pixelStorei(32878,sl.height),tt.pixelStorei(3316,te.min.x),tt.pixelStorei(3315,te.min.y),tt.pixelStorei(32877,te.min.z),Ve.isDataTexture||Ve.isData3DTexture?tt.texSubImage3D(li,dt,Ie.x,Ie.y,Ie.z,Ln,Gn,Xn,Yn,Si,sl.data):Ve.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),tt.compressedTexSubImage3D(li,dt,Ie.x,Ie.y,Ie.z,Ln,Gn,Xn,Yn,sl.data)):tt.texSubImage3D(li,dt,Ie.x,Ie.y,Ie.z,Ln,Gn,Xn,Yn,Si,sl),tt.pixelStorei(3314,pi),tt.pixelStorei(32878,or),tt.pixelStorei(3316,kh),tt.pixelStorei(3315,zp),tt.pixelStorei(32877,Hp),0===dt&&Oe.generateMipmaps&&tt.generateMipmap(li),Bt.unbindTexture()},this.initTexture=function(te){te.isCubeTexture?nt.setTextureCube(te,0):te.isData3DTexture?nt.setTexture3D(te,0):te.isDataArrayTexture?nt.setTexture2DArray(te,0):nt.setTexture2D(te,0),Bt.unbindTexture()},this.resetState=function(){N=0,F=0,z=null,Bt.reset(),pt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class fw extends Gv{}).prototype.isWebGL1Renderer=!0;class Eg extends Mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class ip{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const kr=new Z;class el{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)kr.fromBufferAttribute(this,t),kr.applyMatrix4(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)kr.fromBufferAttribute(this,t),kr.applyNormalMatrix(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)kr.fromBufferAttribute(this,t),kr.transformDirection(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,a){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return new Gi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new el(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const jv=new Z,Ig=new hi,$v=new hi,Yv=new Z,gw=new On;class Rg extends Er{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new On,this.bindMatrixInverse=new On}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hi,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,s=this.geometry;Ig.fromBufferAttribute(s.attributes.skinIndex,e),$v.fromBufferAttribute(s.attributes.skinWeight,e),jv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=$v.getComponent(a);if(0!==l){const d=Ig.getComponent(a);gw.multiplyMatrices(n.bones[d].matrixWorld,n.boneInverses[d]),t.addScaledVector(Yv.copy(jv).applyMatrix4(gw),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class sh extends Mr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qr extends ks{constructor(e=null,t=1,n=1,s,a,l,d,f,p=zn,g=zn,y,x){super(null,l,d,f,p,g,s,a,y,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qv=new On,yw=new On;class ys{constructor(e=[],t=[]){this.uuid=Zr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new On)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new On;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let a=0,l=e.length;a<l;a++)qv.multiplyMatrices(e[a]?e[a].matrixWorld:yw,t[a]),qv.toArray(n,16*a);null!==s&&(s.needsUpdate=!0)}clone(){return new ys(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Dd(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Qr(t,e,e,qi,re);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const a=e.bones[n];let l=t[a];void 0===l&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new sh),this.bones.push(l),this.boneInverses.push((new On).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,a=t.length;s<a;s++)e.bones.push(t[s].uuid),e.boneInverses.push(n[s].toArray());return e}}class es extends Us{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Xv=new Z,sp=new Z,Iu=new On,Lg=new au,lh=new jl;class cc extends Mr{constructor(e=new jn,t=new es){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let s=1,a=t.count;s<a;s++)Xv.fromBufferAttribute(t,s-1),sp.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=Xv.distanceTo(sp);e.setAttribute("lineDistance",new tn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lh.copy(n.boundingSphere),lh.applyMatrix4(s),lh.radius+=a,!1===e.ray.intersectsSphere(lh))return;Iu.copy(s).invert(),Lg.copy(e.ray).applyMatrix4(Iu);const d=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=d*d,p=new Z,g=new Z,y=new Z,x=new Z,M=this.isLineSegments?2:1,T=n.index,D=n.attributes.position;if(null!==T)for(let z=Math.max(0,l.start),k=Math.min(T.count,l.start+l.count)-1;z<k;z+=M){const $=T.getX(z),q=T.getX(z+1);if(p.fromBufferAttribute(D,$),g.fromBufferAttribute(D,q),Lg.distanceSqToSegment(p,g,x,y)>f)continue;x.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(x);U<e.near||U>e.far||t.push({distance:U,point:y.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}else for(let z=Math.max(0,l.start),k=Math.min(D.count,l.start+l.count)-1;z<k;z+=M){if(p.fromBufferAttribute(D,z),g.fromBufferAttribute(D,z+1),Lg.distanceSqToSegment(p,g,x,y)>f)continue;x.applyMatrix4(this.matrixWorld);const q=e.ray.origin.distanceTo(x);q<e.near||q>e.far||t.push({distance:q,point:y.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const d=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}}const Og=new Z,Ng=new Z;class Ru extends cc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let s=0,a=t.count;s<a;s+=2)Og.fromBufferAttribute(t,s),Ng.fromBufferAttribute(t,s+1),n[s]=0===s?0:n[s-1],n[s+1]=n[s]+Og.distanceTo(Ng);e.setAttribute("lineDistance",new tn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Kv extends cc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class op extends Us{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Fg=new On,ch=new au,Pu=new jl,uh=new Z;class kg extends Mr{constructor(e=new jn,t=new op){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pu.copy(n.boundingSphere),Pu.applyMatrix4(s),Pu.radius+=a,!1===e.ray.intersectsSphere(Pu))return;Fg.copy(s).invert(),ch.copy(e.ray).applyMatrix4(Fg);const d=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=d*d,p=n.index,y=n.attributes.position;if(null!==p)for(let T=Math.max(0,l.start),E=Math.min(p.count,l.start+l.count);T<E;T++){const D=p.getX(T);uh.fromBufferAttribute(y,D),Bg(uh,D,f,s,e,t,this)}else for(let T=Math.max(0,l.start),E=Math.min(y.count,l.start+l.count);T<E;T++)uh.fromBufferAttribute(y,T),Bg(uh,T,f,s,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const d=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}}}}}function Bg(c,e,t,n,s,a,l){const d=ch.distanceSqToPoint(c);if(d<t){const f=new Z;ch.closestPointToPoint(c,f),f.applyMatrix4(n);const p=s.ray.origin.distanceTo(f);if(p<s.near||p>s.far)return;a.push({distance:p,distanceToRay:Math.sqrt(d),point:f,index:e,face:null,object:l})}}class bh extends Us{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ma extends bh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function _s(c,e,t){return xp(c)?new c.constructor(c.subarray(e,void 0!==t?t:c.length)):c.slice(e,t)}function fc(c,e,t){return!c||!t&&c.constructor===e?c:"number"==typeof e.BYTES_PER_ELEMENT?new e(c):Array.prototype.slice.call(c)}function xp(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function m_(c){const t=c.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(function e(s,a){return c[s]-c[a]}),n}function wh(c,e,t){const n=c.length,s=new c.constructor(n);for(let a=0,l=0;l!==n;++a){const d=t[a]*e;for(let f=0;f!==e;++f)s[l++]=c[d+f]}return s}function ny(c,e,t,n){let s=1,a=c[0];for(;void 0!==a&&void 0===a[n];)a=c[s++];if(void 0===a)return;let l=a[n];if(void 0!==l)if(Array.isArray(l))do{l=a[n],void 0!==l&&(e.push(a.time),t.push.apply(t,l)),a=c[s++]}while(void 0!==a);else if(void 0!==l.toArray)do{l=a[n],void 0!==l&&(e.push(a.time),l.toArray(t,t.length)),a=c[s++]}while(void 0!==a);else do{l=a[n],void 0!==l&&(e.push(a.time),t.push(l)),a=c[s++]}while(void 0!==a)}class Mh{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],a=t[n-1];e:{t:{let l;n:{i:if(!(e<s)){for(let d=n+2;;){if(void 0===s){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===d)break;if(a=s,s=t[++n],e<s)break t}l=t.length;break n}if(e>=a)break e;{const d=t[1];e<d&&(n=2,a=d);for(let f=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(s=a,a=t[--n-1],e>=a)break t}l=n,n=0}}for(;n<l;){const d=n+l>>>1;e<t[d]?l=d:n=d+1}if(s=t[n],a=t[n-1],void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,s)}return this.interpolate_(n,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s;for(let l=0;l!==s;++l)t[l]=n[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Gw extends Mh{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const s=this.parameterPositions;let a=e-2,l=e+1,d=s[a],f=s[l];if(void 0===d)switch(this.getSettings_().endingStart){case 2401:a=e,d=2*t-n;break;case 2402:a=s.length-2,d=t+s[a]-s[a+1];break;default:a=e,d=n}if(void 0===f)switch(this.getSettings_().endingEnd){case 2401:l=e,f=2*n-t;break;case 2402:l=1,f=n+s[1]-s[0];break;default:l=e-1,f=t}const p=.5*(n-t),g=this.valueSize;this._weightPrev=p/(t-d),this._weightNext=p/(f-n),this._offsetPrev=a*g,this._offsetNext=l*g}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,f=e*d,p=f-d,g=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,M=this._weightNext,T=(n-t)/(s-t),E=T*T,D=E*T,N=-x*D+2*x*E-x*T,F=(1+x)*D+(-1.5-2*x)*E+(-.5+x)*T+1,z=(-1-M)*D+(1.5+M)*E+.5*T,k=M*D-M*E;for(let $=0;$!==d;++$)a[$]=N*l[g+$]+F*l[p+$]+z*l[f+$]+k*l[y+$];return a}}class bp extends Mh{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,f=e*d,p=f-d,g=(n-t)/(s-t),y=1-g;for(let x=0;x!==d;++x)a[x]=l[p+x]*y+l[f+x]*g;return a}}class Ww extends Mh{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class co{constructor(e,t,n,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fc(t,this.TimeBufferType),this.values=fc(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:fc(e.times,Array),values:fc(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ww(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Gw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _f:t=this.InterpolantFactoryMethodDiscrete;break;case Fl:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _f;case this.InterpolantFactoryMethodLinear:return Fl;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let a=0,l=s-1;for(;a!==s&&n[a]<e;)++a;for(;-1!==l&&n[l]>t;)--l;if(++l,0!==a||l!==s){a>=l&&(l=Math.max(l,1),a=l-1);const d=this.getValueSize();this.times=_s(n,a,l),this.values=_s(this.values,a*d,l*d)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let d=0;d!==a;d++){const f=n[d];if("number"==typeof f&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,f),e=!1;break}if(null!==l&&l>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,f,l),e=!1;break}l=f}if(void 0!==s&&xp(s))for(let d=0,f=s.length;d!==f;++d){const p=s[d];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,p),e=!1;break}}return e}optimize(){const e=_s(this.times),t=_s(this.values),n=this.getValueSize(),s=2302===this.getInterpolation(),a=e.length-1;let l=1;for(let d=1;d<a;++d){let f=!1;const p=e[d];if(p!==e[d+1]&&(1!==d||p!==e[0]))if(s)f=!0;else{const y=d*n,x=y-n,M=y+n;for(let T=0;T!==n;++T){const E=t[y+T];if(E!==t[x+T]||E!==t[M+T]){f=!0;break}}}if(f){if(d!==l){e[l]=e[d];const y=d*n,x=l*n;for(let M=0;M!==n;++M)t[x+M]=t[y+M]}++l}}if(a>0){e[l]=e[a];for(let d=a*n,f=l*n,p=0;p!==n;++p)t[f+p]=t[d+p];++l}return l!==e.length?(this.times=_s(e,0,l),this.values=_s(t,0,l*n)):(this.times=e,this.values=t),this}clone(){const e=_s(this.times,0),t=_s(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}co.prototype.TimeBufferType=Float32Array,co.prototype.ValueBufferType=Float32Array,co.prototype.DefaultInterpolation=Fl;class Gu extends co{}Gu.prototype.ValueTypeName="bool",Gu.prototype.ValueBufferType=Array,Gu.prototype.DefaultInterpolation=_f,Gu.prototype.InterpolantFactoryMethodLinear=void 0,Gu.prototype.InterpolantFactoryMethodSmooth=void 0;class v_ extends co{}v_.prototype.ValueTypeName="color";class Sh extends co{}Sh.prototype.ValueTypeName="number";class jw extends Mh{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,f=(n-t)/(s-t);let p=e*d;for(let g=p+d;p!==g;p+=4)fr.slerpFlat(a,0,l,p-d,l,p,f);return a}}class pc extends co{InterpolantFactoryMethodLinear(e){return new jw(this.times,this.values,this.getValueSize(),e)}}pc.prototype.ValueTypeName="quaternion",pc.prototype.DefaultInterpolation=Fl,pc.prototype.InterpolantFactoryMethodSmooth=void 0;class Wu extends co{}Wu.prototype.ValueTypeName="string",Wu.prototype.ValueBufferType=Array,Wu.prototype.DefaultInterpolation=_f,Wu.prototype.InterpolantFactoryMethodLinear=void 0,Wu.prototype.InterpolantFactoryMethodSmooth=void 0;class Eh extends co{}Eh.prototype.ValueTypeName="vector";class Dh{constructor(e,t=-1,n,s=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=Zr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let l=0,d=n.length;l!==d;++l)t.push(x_(n[l]).scale(s));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=n.length;a!==l;++a)t.push(co.toJSON(n[a]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const a=t.length,l=[];for(let d=0;d<a;d++){let f=[],p=[];f.push((d+a-1)%a,d,(d+1)%a),p.push(0,1,0);const g=m_(f);f=wh(f,1,g),p=wh(p,1,g),!s&&0===f[0]&&(f.push(a),p.push(p[0])),l.push(new Sh(".morphTargetInfluences["+t[d].name+"]",f,p).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},a=/^([\w-]*?)([\d]+)$/;for(let d=0,f=e.length;d<f;d++){const p=e[d],g=p.name.match(a);if(g&&g.length>1){const y=g[1];let x=s[y];x||(s[y]=x=[]),x.push(p)}}const l=[];for(const d in s)l.push(this.CreateFromMorphTargetSequence(d,s[d],t,n));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,x,M,T,E){if(0!==M.length){const D=[],N=[];ny(M,D,N,T),0!==D.length&&E.push(new y(x,D,N))}},s=[],a=e.name||"default",l=e.fps||30,d=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const x=p[y].keys;if(x&&0!==x.length)if(x[0].morphTargets){const M={};let T;for(T=0;T<x.length;T++)if(x[T].morphTargets)for(let E=0;E<x[T].morphTargets.length;E++)M[x[T].morphTargets[E]]=-1;for(const E in M){const D=[],N=[];for(let F=0;F!==x[T].morphTargets.length;++F){const z=x[T];D.push(z.time),N.push(z.morphTarget===E?1:0)}s.push(new Sh(".morphTargetInfluence["+E+"]",D,N))}f=M.length*l}else{const M=".bones["+t[y].name+"]";n(Eh,M+".position",x,"pos",s),n(pc,M+".quaternion",x,"rot",s),n(Eh,M+".scale",x,"scl",s)}}return 0===s.length?null:new this(a,f,s,d)}resetDuration(){let t=0;for(let n=0,s=this.tracks.length;n!==s;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function x_(c){if(void 0===c.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function __(c){switch(c.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sh;case"vector":case"vector2":case"vector3":case"vector4":return Eh;case"color":return v_;case"quaternion":return pc;case"bool":case"boolean":return Gu;case"string":return Wu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+c)}(c.type);if(void 0===c.times){const t=[],n=[];ny(c.keys,t,n,"value"),c.times=t,c.values=n}return void 0!==e.parse?e.parse(c):new e(c.name,c.times,c.values,c.interpolation)}const ju={enabled:!1,files:{},add:function(c,e){!1!==this.enabled&&(this.files[c]=e)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};class b_{constructor(e,t,n){const s=this;let f,a=!1,l=0,d=0;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(g){d++,!1===a&&void 0!==s.onStart&&s.onStart(g,l,d),a=!0},this.itemEnd=function(g){l++,void 0!==s.onProgress&&s.onProgress(g,l,d),l===d&&(a=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(g){void 0!==s.onError&&s.onError(g)},this.resolveURL=function(g){return f?f(g):g},this.setURLModifier=function(g){return f=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return-1!==y&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,x=p.length;y<x;y+=2){const M=p[y],T=p[y+1];if(M.global&&(M.lastIndex=0),M.test(g))return T}return null}}}const w_=new b_;class Th{constructor(e){this.manager=void 0!==e?e:w_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,a){n.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Sa={};class $w extends Error{constructor(e,t){super(e),this.response=t}}class Gs extends Th{constructor(e){super(e)}load(e,t,n,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ju.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(void 0!==Sa[e])return void Sa[e].push({onLoad:t,onProgress:n,onError:s});Sa[e]=[],Sa[e].push({onLoad:t,onProgress:n,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),d=this.mimeType,f=this.responseType;fetch(l).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const g=Sa[e],y=p.body.getReader(),x=p.headers.get("Content-Length"),M=x?parseInt(x):0,T=0!==M;let E=0;const D=new ReadableStream({start(N){!function F(){y.read().then(({done:z,value:k})=>{if(z)N.close();else{E+=k.byteLength;const $=new ProgressEvent("progress",{lengthComputable:T,loaded:E,total:M});for(let q=0,ae=g.length;q<ae;q++){const U=g[q];U.onProgress&&U.onProgress($)}N.enqueue(k),F()}})}()}});return new Response(D)}throw new $w(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>(new DOMParser).parseFromString(g,d));case"json":return p.json();default:if(void 0===d)return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(d),x=y&&y[1]?y[1].toLowerCase():void 0,M=new TextDecoder(x);return p.arrayBuffer().then(T=>M.decode(T))}}}).then(p=>{ju.add(e,p);const g=Sa[e];delete Sa[e];for(let y=0,x=g.length;y<x;y++){const M=g[y];M.onLoad&&M.onLoad(p)}}).catch(p=>{const g=Sa[e];if(void 0===g)throw this.manager.itemError(e),p;delete Sa[e];for(let y=0,x=g.length;y<x;y++){const M=g[y];M.onError&&M.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $u extends Th{constructor(e){super(e)}load(e,t,n,s){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=ju.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const d=Td("img");function f(){g(),ju.add(e,this),t&&t(this),a.manager.itemEnd(e)}function p(y){g(),s&&s(y),a.manager.itemError(e),a.manager.itemEnd(e)}function g(){d.removeEventListener("load",f,!1),d.removeEventListener("error",p,!1)}return d.addEventListener("load",f,!1),d.addEventListener("error",p,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(d.crossOrigin=this.crossOrigin),a.manager.itemStart(e),d.src=e,d}}class iy extends Th{constructor(e){super(e)}load(e,t,n,s){const a=new ks,l=new $u(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(d){a.image=d,a.needsUpdate=!0,void 0!==t&&t(a)},n,s),a}}class wp extends Mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new kt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const mc=new On,ry=new Z,E_=new Z;class D_{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.map=null,this.mapPass=null,this.matrix=new On,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hm,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new hi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ry.setFromMatrixPosition(e.matrixWorld),t.position.copy(ry),E_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(E_),t.updateMatrixWorld(),mc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class T_ extends D_{constructor(){super(new pr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ha*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||s!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=s,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Mp extends wp{constructor(e,t,n=0,s=Math.PI/3,a=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mr.DefaultUp),this.updateMatrix(),this.target=new Mr,this.distance=n,this.angle=s,this.penumbra=a,this.decay=l,this.shadow=new T_}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const C_=new On,gc=new Z,sy=new Z;class A_ extends D_{constructor(){super(new pr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new hi(2,1,1,1),new hi(0,1,1,1),new hi(3,1,1,1),new hi(1,1,1,1),new hi(3,0,1,1),new hi(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),gc.setFromMatrixPosition(e.matrixWorld),n.position.copy(gc),sy.copy(n.position),sy.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(sy),n.updateMatrixWorld(),s.makeTranslation(-gc.x,-gc.y,-gc.z),C_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(C_)}}class Ch extends wp{constructor(e,t,n=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new A_}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class I_ extends D_{constructor(){super(new Gd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oy extends wp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mr.DefaultUp),this.updateMatrix(),this.target=new Mr,this.shadow=new I_}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ay extends wp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ea{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,s=e.length;n<s;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ME extends Th{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=ju.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;const d={};d.credentials="anonymous"===this.crossOrigin?"same-origin":"include",d.headers=this.requestHeader,fetch(e,d).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){ju.add(e,f),t&&t(f),a.manager.itemEnd(e)}).catch(function(f){s&&s(f),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}const uy="\\[\\]\\.:\\/",sM=new RegExp("["+uy+"]","g"),_c="[^"+uy+"]",oM="[^"+uy.replace("\\.","")+"]",Ah=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",_c)+/(WCOD+)?/.source.replace("WCOD",oM)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_c)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_c)+"$"),lM=["material","materials","bones"];class cM{constructor(e,t,n){const s=n||Ai.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=n.length;s!==a;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let Ai=(()=>{class c{constructor(t,n,s){this.path=n,this.parsedPath=s||c.parseTrackName(n),this.node=c.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,s){return t&&t.isAnimationObjectGroup?new c.Composite(t,n,s):new c(t,n,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(sM,"")}static parseTrackName(t){const n=Ah.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){const l=s.nodeName.substring(a+1);-1!==lM.indexOf(l)&&(s.nodeName=s.nodeName.substring(0,a),s.objectName=l)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(n);if(void 0!==s)return s}if(t.children){const s=function(l){for(let d=0;d<l.length;d++){const f=l[d];if(f.name===n||f.uuid===n)return f;const p=s(f.children);if(p)return p}return null},a=s(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const s=this.resolvedProperty;for(let a=0,l=s.length;a!==l;++a)t[n++]=s[a]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const s=this.resolvedProperty;for(let a=0,l=s.length;a!==l;++a)s[a]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const s=this.resolvedProperty;for(let a=0,l=s.length;a!==l;++a)s[a]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const s=this.resolvedProperty;for(let a=0,l=s.length;a!==l;++a)s[a]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,s=n.objectName,a=n.propertyName;let l=n.propertyIndex;if(t||(t=c.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let g=n.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let y=0;y<t.length;y++)if(t[y].name===g){g=y;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==g){if(void 0===t[g])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[g]}}const d=t[a];if(void 0===d)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+a+" but it wasn't found.",t);let f=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?f=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(f=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==l){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[l]&&(l=t.morphTargetDictionary[l])}p=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=l}else void 0!==d.fromArray&&void 0!==d.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(p=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=a;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=cM,c})();Ai.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ai.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ai.prototype.GetterByBindingType=[Ai.prototype._getValue_direct,Ai.prototype._getValue_array,Ai.prototype._getValue_arrayElement,Ai.prototype._getValue_toArray],Ai.prototype.SetterByBindingTypeAndVersioning=[[Ai.prototype._setValue_direct,Ai.prototype._setValue_direct_setNeedsUpdate,Ai.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_array,Ai.prototype._setValue_array_setNeedsUpdate,Ai.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_arrayElement,Ai.prototype._setValue_arrayElement_setNeedsUpdate,Ai.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_fromArray,Ai.prototype._setValue_fromArray_setNeedsUpdate,Ai.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Dp{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"143"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="143");const MM={type:"change"},_y={type:"start"},Z_={type:"end"};class SM extends Ul{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ee){ee.addEventListener("keydown",yi),this._domElementKeyEvents=ee},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(MM),n.update(),a=s.NONE},this.update=function(){const ee=new Z,pt=(new fr).setFromUnitVectors(e.up,new Z(0,1,0)),It=pt.clone().invert(),qt=new Z,Yt=new fr,In=2*Math.PI;return function(){const ji=n.object.position;ee.copy(ji).sub(n.target),ee.applyQuaternion(pt),d.setFromVector3(ee),n.autoRotate&&a===s.NONE&&Q(function ae(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(d.theta+=f.theta*n.dampingFactor,d.phi+=f.phi*n.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let pe=n.minAzimuthAngle,Gt=n.maxAzimuthAngle;return isFinite(pe)&&isFinite(Gt)&&(pe<-Math.PI?pe+=In:pe>Math.PI&&(pe-=In),Gt<-Math.PI?Gt+=In:Gt>Math.PI&&(Gt-=In),d.theta=pe<=Gt?Math.max(pe,Math.min(Gt,d.theta)):d.theta>(pe+Gt)/2?Math.max(pe,d.theta):Math.min(Gt,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(n.minDistance,Math.min(n.maxDistance,d.radius)),!0===n.enableDamping?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),ee.setFromSpherical(d),ee.applyQuaternion(It),ji.copy(n.target).add(ee),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),g.set(0,0,0)),p=1,!!(y||qt.distanceToSquared(n.object.position)>l||8*(1-Yt.dot(n.object.quaternion))>l)&&(n.dispatchEvent(MM),qt.copy(n.object.position),Yt.copy(n.object.quaternion),y=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ue),n.domElement.removeEventListener("pointerdown",Ct),n.domElement.removeEventListener("pointercancel",Fn),n.domElement.removeEventListener("wheel",Ii),n.domElement.removeEventListener("pointermove",nn),n.domElement.removeEventListener("pointerup",Ht),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",yi)};const n=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=s.NONE;const l=1e-6,d=new Dp,f=new Dp;let p=1;const g=new Z;let y=!1;const x=new Ke,M=new Ke,T=new Ke,E=new Ke,D=new Ke,N=new Ke,F=new Ke,z=new Ke,k=new Ke,$=[],q={};function U(){return Math.pow(.95,n.zoomSpeed)}function Q(ee){f.theta-=ee}function he(ee){f.phi-=ee}const ge=function(){const ee=new Z;return function(It,qt){ee.setFromMatrixColumn(qt,0),ee.multiplyScalar(-It),g.add(ee)}}(),Ye=function(){const ee=new Z;return function(It,qt){!0===n.screenSpacePanning?ee.setFromMatrixColumn(qt,1):(ee.setFromMatrixColumn(qt,0),ee.crossVectors(n.object.up,ee)),ee.multiplyScalar(It),g.add(ee)}}(),st=function(){const ee=new Z;return function(It,qt){const Yt=n.domElement;if(n.object.isPerspectiveCamera){ee.copy(n.object.position).sub(n.target);let ni=ee.length();ni*=Math.tan(n.object.fov/2*Math.PI/180),ge(2*It*ni/Yt.clientHeight,n.object.matrix),Ye(2*qt*ni/Yt.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(ge(It*(n.object.right-n.object.left)/n.object.zoom/Yt.clientWidth,n.object.matrix),Ye(qt*(n.object.top-n.object.bottom)/n.object.zoom/Yt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function be(ee){n.object.isPerspectiveCamera?p/=ee:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*ee)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function He(ee){n.object.isPerspectiveCamera?p*=ee:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/ee)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function de(ee){x.set(ee.clientX,ee.clientY)}function Ee(ee){E.set(ee.clientX,ee.clientY)}function Dt(){1===$.length?x.set($[0].pageX,$[0].pageY):x.set(.5*($[0].pageX+$[1].pageX),.5*($[0].pageY+$[1].pageY))}function yn(){1===$.length?E.set($[0].pageX,$[0].pageY):E.set(.5*($[0].pageX+$[1].pageX),.5*($[0].pageY+$[1].pageY))}function tt(){const ee=$[0].pageX-$[1].pageX,pt=$[0].pageY-$[1].pageY,It=Math.sqrt(ee*ee+pt*pt);F.set(0,It)}function rn(ee){if(1==$.length)M.set(ee.pageX,ee.pageY);else{const It=En(ee);M.set(.5*(ee.pageX+It.x),.5*(ee.pageY+It.y))}T.subVectors(M,x).multiplyScalar(n.rotateSpeed);const pt=n.domElement;Q(2*Math.PI*T.x/pt.clientHeight),he(2*Math.PI*T.y/pt.clientHeight),x.copy(M)}function Bt(ee){if(1===$.length)D.set(ee.pageX,ee.pageY);else{const pt=En(ee);D.set(.5*(ee.pageX+pt.x),.5*(ee.pageY+pt.y))}N.subVectors(D,E).multiplyScalar(n.panSpeed),st(N.x,N.y),E.copy(D)}function kn(ee){const pt=En(ee),It=ee.pageX-pt.x,qt=ee.pageY-pt.y,Yt=Math.sqrt(It*It+qt*qt);z.set(0,Yt),k.set(0,Math.pow(z.y/F.y,n.zoomSpeed)),be(k.y),F.copy(z)}function Ct(ee){!1!==n.enabled&&(0===$.length&&(n.domElement.setPointerCapture(ee.pointerId),n.domElement.addEventListener("pointermove",nn),n.domElement.addEventListener("pointerup",Ht)),function xt(ee){$.push(ee)}(ee),"touch"===ee.pointerType?function se(ee){switch($t(ee),$.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;Dt(),a=s.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;yn(),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;(function un(){n.enableZoom&&tt(),n.enablePan&&yn()})(),a=s.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function an(){n.enableZoom&&tt(),n.enableRotate&&Dt()})(),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(_y)}(ee):function wn(ee){let pt;switch(ee.button){case 0:pt=n.mouseButtons.LEFT;break;case 1:pt=n.mouseButtons.MIDDLE;break;case 2:pt=n.mouseButtons.RIGHT;break;default:pt=-1}switch(pt){case 1:if(!1===n.enableZoom)return;(function Se(ee){F.set(ee.clientX,ee.clientY)})(ee),a=s.DOLLY;break;case 0:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(!1===n.enablePan)return;Ee(ee),a=s.PAN}else{if(!1===n.enableRotate)return;de(ee),a=s.ROTATE}break;case 2:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(!1===n.enableRotate)return;de(ee),a=s.ROTATE}else{if(!1===n.enablePan)return;Ee(ee),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(_y)}(ee))}function nn(ee){!1!==n.enabled&&("touch"===ee.pointerType?function J(ee){switch($t(ee),a){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;rn(ee),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;Bt(ee),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function lt(ee){n.enableZoom&&kn(ee),n.enablePan&&Bt(ee)})(ee),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function nt(ee){n.enableZoom&&kn(ee),n.enableRotate&&rn(ee)})(ee),n.update();break;default:a=s.NONE}}(ee):function vn(ee){switch(a){case s.ROTATE:if(!1===n.enableRotate)return;!function we(ee){M.set(ee.clientX,ee.clientY),T.subVectors(M,x).multiplyScalar(n.rotateSpeed);const pt=n.domElement;Q(2*Math.PI*T.x/pt.clientHeight),he(2*Math.PI*T.y/pt.clientHeight),x.copy(M),n.update()}(ee);break;case s.DOLLY:if(!1===n.enableZoom)return;!function Pe(ee){z.set(ee.clientX,ee.clientY),k.subVectors(z,F),k.y>0?be(U()):k.y<0&&He(U()),F.copy(z),n.update()}(ee);break;case s.PAN:if(!1===n.enablePan)return;!function yt(ee){D.set(ee.clientX,ee.clientY),N.subVectors(D,E).multiplyScalar(n.panSpeed),st(N.x,N.y),E.copy(D),n.update()}(ee)}}(ee))}function Ht(ee){At(ee),0===$.length&&(n.domElement.releasePointerCapture(ee.pointerId),n.domElement.removeEventListener("pointermove",nn),n.domElement.removeEventListener("pointerup",Ht)),n.dispatchEvent(Z_),a=s.NONE}function Fn(ee){At(ee)}function Ii(ee){!1===n.enabled||!1===n.enableZoom||a!==s.NONE||(ee.preventDefault(),n.dispatchEvent(_y),function ot(ee){ee.deltaY<0?He(U()):ee.deltaY>0&&be(U()),n.update()}(ee),n.dispatchEvent(Z_))}function yi(ee){!1===n.enabled||!1===n.enablePan||function wt(ee){let pt=!1;switch(ee.code){case n.keys.UP:st(0,n.keyPanSpeed),pt=!0;break;case n.keys.BOTTOM:st(0,-n.keyPanSpeed),pt=!0;break;case n.keys.LEFT:st(n.keyPanSpeed,0),pt=!0;break;case n.keys.RIGHT:st(-n.keyPanSpeed,0),pt=!0}pt&&(ee.preventDefault(),n.update())}(ee)}function Ue(ee){!1!==n.enabled&&ee.preventDefault()}function At(ee){delete q[ee.pointerId];for(let pt=0;pt<$.length;pt++)if($[pt].pointerId==ee.pointerId)return void $.splice(pt,1)}function $t(ee){let pt=q[ee.pointerId];void 0===pt&&(pt=new Ke,q[ee.pointerId]=pt),pt.set(ee.pageX,ee.pageY)}function En(ee){return q[(ee.pointerId===$[0].pointerId?$[1]:$[0]).pointerId]}n.domElement.addEventListener("contextmenu",Ue),n.domElement.addEventListener("pointerdown",Ct),n.domElement.addEventListener("pointercancel",Fn),n.domElement.addEventListener("wheel",Ii,{passive:!1}),this.update()}}class J_ extends Th{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ex(t)}),this.register(function(t){return new RM(t)}),this.register(function(t){return new HE(t)}),this.register(function(t){return new tx(t)}),this.register(function(t){return new nx(t)}),this.register(function(t){return new ix(t)}),this.register(function(t){return new rx(t)}),this.register(function(t){return new CM(t)}),this.register(function(t){return new IM(t)}),this.register(function(t){return new AM(t)}),this.register(function(t){return new Q_(t)}),this.register(function(t){return new sx(t)})}load(e,t,n,s){const a=this;let l;l=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Ea.extractUrlBase(e),this.manager.itemStart(e);const d=function(p){s?s(p):console.error(p),a.manager.itemError(e),a.manager.itemEnd(e)},f=new Gs(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(p){try{a.parse(p,l,function(g){t(g),a.manager.itemEnd(e)},d)}catch(g){d(g)}},n,d)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let a;const l={},d={};if("string"==typeof e)a=e;else if(Ea.decodeText(new Uint8Array(e,0,4))===PM){try{l[Wn.KHR_BINARY_GLTF]=new VE(e)}catch(y){return void(s&&s(y))}a=l[Wn.KHR_BINARY_GLTF].content}else a=Ea.decodeText(new Uint8Array(e));const f=JSON.parse(a);if(void 0===f.asset||f.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const p=new zM(f,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(let g=0;g<this.pluginCallbacks.length;g++){const y=this.pluginCallbacks[g](p);d[y.name]=y,l[y.name]=!0}if(f.extensionsUsed)for(let g=0;g<f.extensionsUsed.length;++g){const y=f.extensionsUsed[g],x=f.extensionsRequired||[];switch(y){case Wn.KHR_MATERIALS_UNLIT:l[y]=new TM;break;case Wn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[y]=new jE;break;case Wn.KHR_DRACO_MESH_COMPRESSION:l[y]=new GE(f,this.dracoLoader);break;case Wn.KHR_TEXTURE_TRANSFORM:l[y]=new WE;break;case Wn.KHR_MESH_QUANTIZATION:l[y]=new Np;break;default:x.indexOf(y)>=0&&void 0===d[y]&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}p.setExtensions(l),p.setPlugins(d),p.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,a){n.parse(e,t,s,a)})}}function DM(){let c={};return{get:function(e){return c[e]},add:function(e,t){c[e]=t},remove:function(e){delete c[e]},removeAll:function(){c={}}}}const Wn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Q_{constructor(e){this.parser=e,this.name=Wn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const a=t.json,f=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let p;const g=new kt(16777215);void 0!==f.color&&g.fromArray(f.color);const y=void 0!==f.range?f.range:0;switch(f.type){case"directional":p=new oy(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new Ch(g),p.distance=y;break;case"spot":p=new Mp(g),p.distance=y,f.spot=f.spot||{},f.spot.innerConeAngle=void 0!==f.spot.innerConeAngle?f.spot.innerConeAngle:0,f.spot.outerConeAngle=void 0!==f.spot.outerConeAngle?f.spot.outerConeAngle:Math.PI/4,p.angle=f.spot.outerConeAngle,p.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return p.position.set(0,0,0),p.decay=2,void 0!==f.intensity&&(p.intensity=f.intensity),p.name=t.createUniqueName(f.name||"light_"+e),s=Promise.resolve(p),t.cache.add(n,s),s}createNodeAttachment(e){const t=this,n=this.parser,a=n.json.nodes[e],d=(a.extensions&&a.extensions[this.name]||{}).light;return void 0===d?null:this._loadLight(d).then(function(f){return n._getNodeRef(t.cache,d,f)})}}class TM{constructor(){this.name=Wn.KHR_MATERIALS_UNLIT}getMaterialType(){return Jr}extendParams(e,t,n){const s=[];e.color=new kt(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const l=a.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}void 0!==a.baseColorTexture&&s.push(n.assignTexture(e,"map",a.baseColorTexture,di))}return Promise.all(s)}}class CM{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name].emissiveStrength;return void 0!==a&&(t.emissiveIntensity=a),Promise.resolve()}}class ex{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],l=s.extensions[this.name];if(void 0!==l.clearcoatFactor&&(t.clearcoat=l.clearcoatFactor),void 0!==l.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),void 0!==l.clearcoatRoughnessFactor&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),void 0!==l.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),void 0!==l.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),void 0!==l.clearcoatNormalTexture.scale)){const d=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ke(d,d)}return Promise.all(a)}}class AM{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],l=s.extensions[this.name];return void 0!==l.iridescenceFactor&&(t.iridescence=l.iridescenceFactor),void 0!==l.iridescenceTexture&&a.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),void 0!==l.iridescenceIor&&(t.iridescenceIOR=l.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==l.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),void 0!==l.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),void 0!==l.iridescenceThicknessTexture&&a.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}}class tx{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new kt(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return void 0!==l.sheenColorFactor&&t.sheenColor.fromArray(l.sheenColorFactor),void 0!==l.sheenRoughnessFactor&&(t.sheenRoughness=l.sheenRoughnessFactor),void 0!==l.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,di)),void 0!==l.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}}class nx{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],l=s.extensions[this.name];return void 0!==l.transmissionFactor&&(t.transmission=l.transmissionFactor),void 0!==l.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(a)}}class ix{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],l=s.extensions[this.name];t.thickness=void 0!==l.thicknessFactor?l.thicknessFactor:0,void 0!==l.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||0;const d=l.attenuationColor||[1,1,1];return t.attenuationColor=new kt(d[0],d[1],d[2]),Promise.all(a)}}class rx{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name];return t.ior=void 0!==a.ior?a.ior:1.5,Promise.resolve()}}class IM{constructor(e){this.parser=e,this.name=Wn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Ma:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],l=s.extensions[this.name];t.specularIntensity=void 0!==l.specularFactor?l.specularFactor:1,void 0!==l.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));const d=l.specularColorFactor||[1,1,1];return t.specularColor=new kt(d[0],d[1],d[2]),void 0!==l.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,di)),Promise.all(a)}}class RM{constructor(e){this.parser=e,this.name=Wn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const a=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,l)}}class HE{constructor(e){this.parser=e,this.name=Wn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,a=s.textures[e];if(!a.extensions||!a.extensions[t])return null;const l=a.extensions[t],d=s.images[l.source];let f=n.textureLoader;if(d.uri){const p=n.options.manager.getHandler(d.uri);null!==p&&(f=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,l.source,f);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class sx{constructor(e){this.name=Wn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],a=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,l.ready]).then(function(d){const f=s.byteOffset||0,p=s.byteLength||0,g=s.count,y=s.byteStride,x=new ArrayBuffer(g*y),M=new Uint8Array(d[0],f,p);return l.decodeGltfBuffer(new Uint8Array(x),g,y,M,s.mode,s.filter),x})}return null}}const PM="glTF";class VE{constructor(e){this.name=Wn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Ea.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==PM)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,s=new DataView(e,12);let a=0;for(;a<n;){const l=s.getUint32(a,!0);a+=4;const d=s.getUint32(a,!0);if(a+=4,1313821514===d){const f=new Uint8Array(e,12+a,l);this.content=Ea.decodeText(f)}else if(5130562===d){const f=12+a;this.body=e.slice(f,f+l)}a+=l}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GE{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Wn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,d={},f={},p={};for(const g in l){const y=by[g]||g.toLowerCase();d[y]=l[g]}for(const g in e.attributes){const y=by[g]||g.toLowerCase();if(void 0!==l[g]){const x=n.accessors[e.attributes[g]];p[y]=Xu[x.componentType],f[y]=!0===x.normalized}}return t.getDependency("bufferView",a).then(function(g){return new Promise(function(y){s.decodeDracoFile(g,function(x){for(const M in x.attributes){const T=x.attributes[M],E=f[M];void 0!==E&&(T.normalized=E)}y(x)},d,p)})})}}class WE{constructor(){this.name=Wn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ox extends bh{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),d={specular:{value:(new kt).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=d,this.onBeforeCompile=function(f){for(const p in d)f.uniforms[p]=d[p];f.fragmentShader=f.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",a).replace("#include <lights_physical_fragment>",l)},Object.defineProperties(this,{specular:{get:function(){return d.specular.value},set:function(f){d.specular.value=f}},specularMap:{get:function(){return d.specularMap.value},set:function(f){d.specularMap.value=f,f?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return d.glossiness.value},set:function(f){d.glossiness.value=f}},glossinessMap:{get:function(){return d.glossinessMap.value},set:function(f){d.glossinessMap.value=f,f?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class jE{constructor(){this.name=Wn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return ox}extendParams(e,t,n){const s=t.extensions[this.name];e.color=new kt(1,1,1),e.opacity=1;const a=[];if(Array.isArray(s.diffuseFactor)){const l=s.diffuseFactor;e.color.fromArray(l),e.opacity=l[3]}if(void 0!==s.diffuseTexture&&a.push(n.assignTexture(e,"map",s.diffuseTexture,di)),e.emissive=new kt(0,0,0),e.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,e.specular=new kt(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const l=s.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",l)),a.push(n.assignTexture(e,"specularMap",l,di))}return Promise.all(a)}createMaterial(e){const t=new ox(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class Np{constructor(){this.name=Wn.KHR_MESH_QUANTIZATION}}class OM extends Mh{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s*3+s;for(let l=0;l!==s;l++)t[l]=n[a+l];return t}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,d=this.valueSize,f=2*d,p=3*d,g=s-t,y=(n-t)/g,x=y*y,M=x*y,T=e*p,E=T-p,D=-2*M+3*x,N=M-x,F=1-D,z=N-x+y;for(let k=0;k!==d;k++)a[k]=F*l[E+k+d]+z*(l[E+k+f]*g)+D*l[T+k+d]+N*(l[T+k]*g);return a}}const ax=new fr;class Fp extends OM{interpolate_(e,t,n,s){const a=super.interpolate_(e,t,n,s);return ax.fromArray(a).normalize().toArray(a),a}}const Xu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NM={9728:zn,9729:qn,9984:1004,9985:1007,9986:1005,9987:Os},kp={33071:Pr,33648:1002,10497:Xr},xy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},by={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Da={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$E={CUBICSPLINE:void 0,LINEAR:Fl,STEP:_f};function Lh(c,e,t){for(const n in t.extensions)void 0===c[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function zo(c,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(c.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function YE(c,e){if(c.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)c.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(c.morphTargetInfluences.length===t.length){c.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)c.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qE(c){const e=c.extensions&&c.extensions[Wn.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+BM(e.attributes):c.indices+":"+BM(c.attributes)+":"+c.mode,t}function BM(c){let e="";const t=Object.keys(c).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+c[t[n]]+";";return e}function My(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class zM{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new DM,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,a=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||n||s&&a<98?new iy(this.options.manager):new ME(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){const d={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:n,userData:{}};Lh(a,d,s),zo(d,s),Promise.all(n._invokeAll(function(f){return f.afterRoot&&f.afterRoot(d)})).then(function(){e(d)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,a=t.length;s<a;s++){const l=t[s].joints;for(let d=0,f=l.length;d<f;d++)e[l[d]].isBone=!0}for(let s=0,a=e.length;s<a;s++){const l=e[s];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),a=(l,d)=>{const f=this.associations.get(l);null!=f&&this.associations.set(d,f);for(const[p,g]of l.children.entries())a(g,d.children[p])};return a(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const a=e(t[s]);a&&n.push(a)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(a,l){return n.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Wn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(a,l){n.load(Ea.resolveURL(t.uri,s.path),a,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const a=t.byteOffset||0;return n.slice(a,a+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const a=[];return a.push(void 0!==s.bufferView?this.getDependency("bufferView",s.bufferView):null),void 0!==s.sparse&&(a.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(a).then(function(l){const d=l[0],f=xy[s.type],p=Xu[s.componentType],g=p.BYTES_PER_ELEMENT,x=s.byteOffset||0,M=void 0!==s.bufferView?n.bufferViews[s.bufferView].byteStride:void 0,T=!0===s.normalized;let E,D;if(M&&M!==g*f){const N=Math.floor(x/M),F="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+N+":"+s.count;let z=t.cache.get(F);z||(E=new p(d,N*M,s.count*M/g),z=new ip(E,M/g),t.cache.add(F,z)),D=new el(z,f,x%M/g,T)}else E=null===d?new p(s.count*f):new p(d,x,s.count*f),D=new Gi(E,f,T);if(void 0!==s.sparse){const k=s.sparse.values.byteOffset||0,$=new(0,Xu[s.sparse.indices.componentType])(l[1],s.sparse.indices.byteOffset||0,s.sparse.count*xy.SCALAR),q=new p(l[2],k,s.sparse.count*f);null!==d&&(D=new Gi(D.array.slice(),D.itemSize,D.normalized));for(let ae=0,U=$.length;ae<U;ae++){const Q=$[ae];if(D.setX(Q,q[ae*f]),f>=2&&D.setY(Q,q[ae*f+1]),f>=3&&D.setZ(Q,q[ae*f+2]),f>=4&&D.setW(Q,q[ae*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return D})}loadTexture(e){const t=this.json,a=t.textures[e].source,l=t.images[a];let d=this.textureLoader;if(l.uri){const f=this.options.manager.getHandler(l.uri);null!==f&&(d=f)}return this.loadTextureImage(e,a,d)}loadTextureImage(e,t,n){const s=this,a=this.json,l=a.textures[e],d=a.images[t],f=(d.uri||d.bufferView)+":"+l.sampler;if(this.textureCache[f])return this.textureCache[f];const p=this.loadImageSource(t,n).then(function(g){g.flipY=!1,l.name&&(g.name=l.name);const x=(a.samplers||{})[l.sampler]||{};return g.magFilter=NM[x.magFilter]||qn,g.minFilter=NM[x.minFilter]||Os,g.wrapS=kp[x.wrapS]||Xr,g.wrapT=kp[x.wrapT]||Xr,s.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[f]=p,p}loadImageSource(e,t){const s=this.json,a=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(y=>y.clone());const l=s.images[e],d=self.URL||self.webkitURL;let f=l.uri||"",p=!1;if(void 0!==l.bufferView)f=this.getDependency("bufferView",l.bufferView).then(function(y){p=!0;const x=new Blob([y],{type:l.mimeType});return f=d.createObjectURL(x),f});else if(void 0===l.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(f).then(function(y){return new Promise(function(x,M){let T=x;!0===t.isImageBitmapLoader&&(T=function(E){const D=new ks(E);D.needsUpdate=!0,x(D)}),t.load(Ea.resolveURL(y,a.path),T,void 0,M)})}).then(function(y){return!0===p&&d.revokeObjectURL(f),y.userData.mimeType=l.mimeType||function UM(c){return c.search(/\.jpe?g($|\?)/i)>0||0===c.search(/^data\:image\/jpeg/)?"image/jpeg":c.search(/\.webp($|\?)/i)>0||0===c.search(/^data\:image\/webp/)?"image/webp":"image/png"}(l.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),y});return this.sourceCache[e]=g,g}assignTexture(e,t,n,s){const a=this;return this.getDependency("texture",n.index).then(function(l){if(void 0!==n.texCoord&&0!=n.texCoord&&!("aoMap"===t&&1==n.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),a.extensions[Wn.KHR_TEXTURE_TRANSFORM]){const d=void 0!==n.extensions?n.extensions[Wn.KHR_TEXTURE_TRANSFORM]:void 0;if(d){const f=a.associations.get(l);l=a.extensions[Wn.KHR_TEXTURE_TRANSFORM].extendTexture(l,d),a.associations.set(l,f)}}return void 0!==s&&(l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,l=void 0===t.attributes.normal;if(e.isPoints){const d="PointsMaterial:"+n.uuid;let f=this.cache.get(d);f||(f=new op,Us.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,f.sizeAttenuation=!1,this.cache.add(d,f)),n=f}else if(e.isLine){const d="LineBasicMaterial:"+n.uuid;let f=this.cache.get(d);f||(f=new es,Us.prototype.copy.call(f,n),f.color.copy(n.color),this.cache.add(d,f)),n=f}if(s||a||l){let d="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(d+="specular-glossiness:"),s&&(d+="derivative-tangents:"),a&&(d+="vertex-colors:"),l&&(d+="flat-shading:");let f=this.cache.get(d);f||(f=n.clone(),a&&(f.vertexColors=!0),l&&(f.flatShading=!0),s&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(d,f),this.associations.set(f,this.associations.get(n))),n=f}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return bh}loadMaterial(e){const t=this,s=this.extensions,a=this.json.materials[e];let l;const d={},f=a.extensions||{},p=[];if(f[Wn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const y=s[Wn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];l=y.getMaterialType(),p.push(y.extendParams(d,a,t))}else if(f[Wn.KHR_MATERIALS_UNLIT]){const y=s[Wn.KHR_MATERIALS_UNLIT];l=y.getMaterialType(),p.push(y.extendParams(d,a,t))}else{const y=a.pbrMetallicRoughness||{};if(d.color=new kt(1,1,1),d.opacity=1,Array.isArray(y.baseColorFactor)){const x=y.baseColorFactor;d.color.fromArray(x),d.opacity=x[3]}void 0!==y.baseColorTexture&&p.push(t.assignTexture(d,"map",y.baseColorTexture,di)),d.metalness=void 0!==y.metallicFactor?y.metallicFactor:1,d.roughness=void 0!==y.roughnessFactor?y.roughnessFactor:1,void 0!==y.metallicRoughnessTexture&&(p.push(t.assignTexture(d,"metalnessMap",y.metallicRoughnessTexture)),p.push(t.assignTexture(d,"roughnessMap",y.metallicRoughnessTexture))),l=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(e,d)})))}!0===a.doubleSided&&(d.side=2);const g=a.alphaMode||"OPAQUE";if("BLEND"===g?(d.transparent=!0,d.depthWrite=!1):(d.transparent=!1,"MASK"===g&&(d.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&l!==Jr&&(p.push(t.assignTexture(d,"normalMap",a.normalTexture)),d.normalScale=new Ke(1,1),void 0!==a.normalTexture.scale)){const y=a.normalTexture.scale;d.normalScale.set(y,y)}return void 0!==a.occlusionTexture&&l!==Jr&&(p.push(t.assignTexture(d,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(d.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&l!==Jr&&(d.emissive=(new kt).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&l!==Jr&&p.push(t.assignTexture(d,"emissiveMap",a.emissiveTexture,di)),Promise.all(p).then(function(){let y;return y=l===ox?s[Wn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(d):new l(d),a.name&&(y.name=a.name),zo(y,a),t.associations.set(y,{materials:e}),a.extensions&&Lh(s,y,a),y})}createUniqueName(e){const t=Ai.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function a(d){return n[Wn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(d,t).then(function(f){return Sy(f,d,t)})}const l=[];for(let d=0,f=e.length;d<f;d++){const p=e[d],g=qE(p),y=s[g];if(y)l.push(y.promise);else{let x;x=p.extensions&&p.extensions[Wn.KHR_DRACO_MESH_COMPRESSION]?a(p):Sy(new jn,p,t),s[g]={primitive:p,promise:x},l.push(x)}}return Promise.all(l)}loadMesh(e){const t=this,s=this.extensions,a=this.json.meshes[e],l=a.primitives,d=[];for(let f=0,p=l.length;f<p;f++){const g=void 0===l[f].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new bh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),c.DefaultMaterial):this.getDependency("material",l[f].material);d.push(g)}var c;return d.push(t.loadGeometries(l)),Promise.all(d).then(function(f){const p=f.slice(0,f.length-1),g=f[f.length-1],y=[];for(let M=0,T=g.length;M<T;M++){const E=g[M],D=l[M];let N;const F=p[M];if(4===D.mode||5===D.mode||6===D.mode||void 0===D.mode)N=!0===a.isSkinnedMesh?new Rg(E,F):new Er(E,F),!0===N.isSkinnedMesh&&!N.geometry.attributes.skinWeight.normalized&&N.normalizeSkinWeights(),5===D.mode?N.geometry=Ey(N.geometry,1):6===D.mode&&(N.geometry=Ey(N.geometry,2));else if(1===D.mode)N=new Ru(E,F);else if(3===D.mode)N=new cc(E,F);else if(2===D.mode)N=new Kv(E,F);else{if(0!==D.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+D.mode);N=new kg(E,F)}Object.keys(N.geometry.morphAttributes).length>0&&YE(N,a),N.name=t.createUniqueName(a.name||"mesh_"+e),zo(N,a),D.extensions&&Lh(s,N,D),t.assignFinalMaterial(N),y.push(N)}for(let M=0,T=y.length;M<T;M++)t.associations.set(y[M],{meshes:e,primitives:M});if(1===y.length)return y[0];const x=new Lo;t.associations.set(x,{meshes:e});for(let M=0,T=y.length;M<T;M++)x.add(y[M]);return x})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(s)return"perspective"===n.type?t=new pr(Px.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===n.type&&(t=new Gd(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),zo(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return n.inverseBindMatrices=s,n})}loadAnimation(e){const n=this.json.animations[e],s=[],a=[],l=[],d=[],f=[];for(let p=0,g=n.channels.length;p<g;p++){const y=n.channels[p],x=n.samplers[y.sampler],M=y.target,E=void 0!==n.parameters?n.parameters[x.input]:x.input,D=void 0!==n.parameters?n.parameters[x.output]:x.output;s.push(this.getDependency("node",void 0!==M.node?M.node:M.id)),a.push(this.getDependency("accessor",E)),l.push(this.getDependency("accessor",D)),d.push(x),f.push(M)}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(d),Promise.all(f)]).then(function(p){const g=p[0],y=p[1],x=p[2],M=p[3],T=p[4],E=[];for(let N=0,F=g.length;N<F;N++){const z=g[N],k=y[N],$=x[N],q=M[N],ae=T[N];if(void 0===z)continue;let U;switch(z.updateMatrix(),Da[ae.path]){case Da.weights:U=Sh;break;case Da.rotation:U=pc;break;default:U=Eh}const Q=z.name?z.name:z.uuid,he=void 0!==q.interpolation?$E[q.interpolation]:Fl,ge=[];Da[ae.path]===Da.weights?z.traverse(function(st){st.morphTargetInfluences&&ge.push(st.name?st.name:st.uuid)}):ge.push(Q);let Ye=$.array;if($.normalized){const st=My(Ye.constructor),be=new Float32Array(Ye.length);for(let He=0,de=Ye.length;He<de;He++)be[He]=Ye[He]*st;Ye=be}for(let st=0,be=ge.length;st<be;st++){const He=new U(ge[st]+"."+Da[ae.path],k.array,Ye,he);"CUBICSPLINE"===q.interpolation&&(He.createInterpolant=function(Se){return new(this instanceof pc?Fp:OM)(this.times,this.values,this.getValueSize()/3,Se)},He.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(He)}}return new Dh(n.name?n.name:"animation_"+e,void 0,E)})}createNodeMesh(e){const n=this,s=this.json.nodes[e];return void 0===s.mesh?null:n.getDependency("mesh",s.mesh).then(function(a){const l=n._getNodeRef(n.meshCache,s.mesh,a);return void 0!==s.weights&&l.traverse(function(d){if(d.isMesh)for(let f=0,p=s.weights.length;f<p;f++)d.morphTargetInfluences[f]=s.weights[f]}),l})}loadNode(e){const n=this.extensions,s=this,a=this.json.nodes[e],l=a.name?s.createUniqueName(a.name):"";return function(){const d=[],f=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return f&&d.push(f),void 0!==a.camera&&d.push(s.getDependency("camera",a.camera).then(function(p){return s._getNodeRef(s.cameraCache,a.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){d.push(p)}),Promise.all(d)}().then(function(d){let f;if(f=!0===a.isBone?new sh:d.length>1?new Lo:1===d.length?d[0]:new Mr,f!==d[0])for(let p=0,g=d.length;p<g;p++)f.add(d[p]);if(a.name&&(f.userData.name=a.name,f.name=l),zo(f,a),a.extensions&&Lh(n,f,a),void 0!==a.matrix){const p=new On;p.fromArray(a.matrix),f.applyMatrix4(p)}else void 0!==a.translation&&f.position.fromArray(a.translation),void 0!==a.rotation&&f.quaternion.fromArray(a.rotation),void 0!==a.scale&&f.scale.fromArray(a.scale);return s.associations.has(f)||s.associations.set(f,{}),s.associations.get(f).nodes=e,f})}loadScene(e){const t=this.json,n=this.extensions,s=this.json.scenes[e],a=this,l=new Lo;s.name&&(l.name=a.createUniqueName(s.name)),zo(l,s),s.extensions&&Lh(n,l,s);const d=s.nodes||[],f=[];for(let p=0,g=d.length;p<g;p++)f.push(HM(d[p],l,t,a));return Promise.all(f).then(function(){return a.associations=(g=>{const y=new Map;for(const[x,M]of a.associations)(x instanceof Us||x instanceof ks)&&y.set(x,M);return g.traverse(x=>{const M=a.associations.get(x);null!=M&&y.set(x,M)}),y})(l),l})}}function HM(c,e,t,n){const s=t.nodes[c];return n.getDependency("node",c).then(function(a){if(void 0===s.skin)return a;let l;return n.getDependency("skin",s.skin).then(function(d){l=d;const f=[];for(let p=0,g=l.joints.length;p<g;p++)f.push(n.getDependency("node",l.joints[p]));return Promise.all(f)}).then(function(d){return a.traverse(function(f){if(!f.isMesh)return;const p=[],g=[];for(let y=0,x=d.length;y<x;y++){const M=d[y];if(M){p.push(M);const T=new On;void 0!==l.inverseBindMatrices&&T.fromArray(l.inverseBindMatrices.array,16*y),g.push(T)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',l.joints[y])}f.bind(new ys(p,g),f.matrixWorld)}),a})}).then(function(a){e.add(a);const l=[];if(s.children){const d=s.children;for(let f=0,p=d.length;f<p;f++)l.push(HM(d[f],a,t,n))}return Promise.all(l)})}function Sy(c,e,t){const n=e.attributes,s=[];function a(l,d){return t.getDependency("accessor",l).then(function(f){c.setAttribute(d,f)})}for(const l in n){const d=by[l]||l.toLowerCase();d in c.attributes||s.push(a(n[l],d))}if(void 0!==e.indices&&!c.index){const l=t.getDependency("accessor",e.indices).then(function(d){c.setIndex(d)});s.push(l)}return zo(c,e),function VM(c,e,t){const n=e.attributes,s=new Vl;if(void 0===n.POSITION)return;{const d=t.json.accessors[n.POSITION],f=d.min,p=d.max;if(void 0===f||void 0===p)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new Z(f[0],f[1],f[2]),new Z(p[0],p[1],p[2])),d.normalized){const g=My(Xu[d.componentType]);s.min.multiplyScalar(g),s.max.multiplyScalar(g)}}const a=e.targets;if(void 0!==a){const d=new Z,f=new Z;for(let p=0,g=a.length;p<g;p++){const y=a[p];if(void 0!==y.POSITION){const x=t.json.accessors[y.POSITION],M=x.min,T=x.max;if(void 0!==M&&void 0!==T){if(f.setX(Math.max(Math.abs(M[0]),Math.abs(T[0]))),f.setY(Math.max(Math.abs(M[1]),Math.abs(T[1]))),f.setZ(Math.max(Math.abs(M[2]),Math.abs(T[2]))),x.normalized){const E=My(Xu[x.componentType]);f.multiplyScalar(E)}d.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(d)}c.boundingBox=s;const l=new jl;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,c.boundingSphere=l}(c,e,t),Promise.all(s).then(function(){return void 0!==e.targets?function kM(c,e,t){let n=!1,s=!1,a=!1;for(let p=0,g=e.length;p<g;p++){const y=e[p];if(void 0!==y.POSITION&&(n=!0),void 0!==y.NORMAL&&(s=!0),void 0!==y.COLOR_0&&(a=!0),n&&s&&a)break}if(!n&&!s&&!a)return Promise.resolve(c);const l=[],d=[],f=[];for(let p=0,g=e.length;p<g;p++){const y=e[p];if(n){const x=void 0!==y.POSITION?t.getDependency("accessor",y.POSITION):c.attributes.position;l.push(x)}if(s){const x=void 0!==y.NORMAL?t.getDependency("accessor",y.NORMAL):c.attributes.normal;d.push(x)}if(a){const x=void 0!==y.COLOR_0?t.getDependency("accessor",y.COLOR_0):c.attributes.color;f.push(x)}}return Promise.all([Promise.all(l),Promise.all(d),Promise.all(f)]).then(function(p){const y=p[1],x=p[2];return n&&(c.morphAttributes.position=p[0]),s&&(c.morphAttributes.normal=y),a&&(c.morphAttributes.color=x),c.morphTargetsRelative=!0,c})}(c,e.targets,t):c})}function Ey(c,e){let t=c.getIndex();if(null===t){const l=[],d=c.getAttribute("position");if(void 0===d)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c;for(let f=0;f<d.count;f++)l.push(f);c.setIndex(l),t=c.getIndex()}const n=t.count-2,s=[];if(2===e)for(let l=1;l<=n;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<n;l++)l%2==0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=c.clone();return a.setIndex(s),a}var bc=(()=>{return(c=bc||(bc={})).MODEL_NAME="model3d",c.MODEL_PATH="assets/code/scene.gltf",c.LIGHT={POINT:{color:16777215},AMBIENT:{color:4210752}},bc;var c})(),xs=W(5768);const GM=["scene"];let Ta=class extends((0,ra.v)(ia.K)){constructor(e){super(),this._busyService=e,this._ready=!1,this._scene=new Eg,this._renderer=new Gv({antialias:!0,alpha:!0}),this._loadModel$=t=>(0,wo.D)((new J_).loadAsync(t)),this._cameraSetup=()=>{const[t,n,s,a]=[8,this._containerWidth/this._containerHeight,.1,1e3];this._camera=new pr(t,n,s,a),this._camera.position.set(0,1,90)},this._controlsSetup=()=>{this._controls=new SM(this._camera,this._renderer.domElement),this._controls.enableZoom=!1,this._controls.addEventListener("start",()=>this._setActiveAnimate()),this._controls.addEventListener("end",()=>this._setDefaultAnimate())},this._ambientSetup=()=>{const t=new ay(bc.LIGHT.AMBIENT.color,1.5);this._scene.add(t)},this._pointSetup=()=>{const t=new Ch(bc.LIGHT.POINT.color,2.5);t.position.set(300,100,50),this._camera.add(t),this._scene.add(this._camera)},this._rendererSetup=()=>{this._renderer.setSize(this._containerWidth,this._containerHeight),this._renderer.setPixelRatio(window.devicePixelRatio),this._container.nativeElement.appendChild(this._renderer.domElement)},this._defaultAnimate=()=>{this._model3d.rotation.y+=.005,this._animationFrameId=requestAnimationFrame(this._defaultAnimate),this._container.nativeElement.style.zIndex="",this._controls.enabled=!0,this._renderer.render(this._scene,this._camera)},this._setDefaultAnimate=()=>{cancelAnimationFrame(this._animationFrameId),this._defaultAnimate()},this._activeAnimate=()=>{this._animationFrameId=requestAnimationFrame(this._activeAnimate),this._model3d.rotation.y+=.05,this._container.nativeElement.style.zIndex="",this._renderer.render(this._scene,this._camera)},this._setActiveAnimate=()=>{cancelAnimationFrame(this._animationFrameId),this._activeAnimate()},this._busyAnimate=()=>{this._animationFrameId=requestAnimationFrame(this._busyAnimate),this._model3d.rotation.y+=50,this._container.nativeElement.style.zIndex="999",this._controls.enabled=!1,this._renderer.render(this._scene,this._camera)},this._setBusyAnimate=()=>{cancelAnimationFrame(this._animationFrameId),this._busyAnimate()},this._onWindowResize=()=>{this._reassignScreenDimensions(),this._camera.aspect=this._containerWidth/this._containerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(this._containerWidth,this._containerHeight)},this._reassignScreenDimensions=()=>{this._containerWidth=this._container.nativeElement.clientWidth,this._containerHeight=this._container.nativeElement.clientHeight}}_onResize(e){this._onWindowResize()}ngAfterViewInit(){this._reassignScreenDimensions(),this._cameraSetup(),this._controlsSetup(),this._ambientSetup(),this._pointSetup(),this._rendererSetup(),this._busyService.ready$.pipe((0,Na.b)(e=>this._ready=e),(0,Ml.w)(()=>this._model3d?(0,Yp.of)([]):this._loadModel$(bc.MODEL_PATH).pipe((0,Na.b)(e=>{e.scene.name=bc.MODEL_NAME,this._model3d=e.scene.getObjectByName(bc.MODEL_NAME),this._scene.add(this._model3d)}),(0,wl.R)(this.unsubscribe$))),(0,Na.b)(()=>this._ready?this._setDefaultAnimate():this._setBusyAnimate()),(0,wl.R)(this.unsubscribe$)).subscribe()}};function WM(c,e){if(1&c){const t=B.EpF();B.TgZ(0,"li",3)(1,"app-button",4),B.NdJ("detectChanges",function(){B.CHM(t);const s=B.oxw();return B.KtG(s.detect())}),B.qZA()()}if(2&c){const t=e.$implicit;B.xp6(1),B.Q6J("title",t.title)("target",t.target)}}Ta.\u0275fac=function(e){return new(e||Ta)(B.Y36(xs.z))},Ta.\u0275cmp=B.Xpm({type:Ta,selectors:[["app-object-3d"]],viewQuery:function(e,t){if(1&e&&B.Gf(GM,5),2&e){let n;B.iGM(n=B.CRH())&&(t._container=n.first)}},hostBindings:function(e,t){1&e&&B.NdJ("resize",function(s){return t._onResize(s)},!1,B.Jf7)},features:[B.qOj],decls:2,vars:0,consts:[[1,"scene"],["scene",""]],template:function(e,t){1&e&&B._UZ(0,"div",0,1)},styles:[".scene[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;transform:translateY(-50%)}@media only screen and (max-width: 575px){.scene[_ngcontent-%COMP%]{height:70vh;margin-top:60px;display:flex;justify-content:center;flex-direction:column}}@media only screen and (min-width: 576px) and (max-width: 767px){.scene[_ngcontent-%COMP%]{height:70vh;margin-top:40px;display:flex;justify-content:center;flex-direction:column}}@media only screen and (min-width: 768px){.scene[_ngcontent-%COMP%]{height:70vh;display:flex;justify-content:center;flex-direction:column}}"],changeDetection:0}),Ta=(0,bl.gn)([na.f],Ta);const jM=[{path:"",component:(()=>{class c{constructor(t){this._cdRef=t,this.menuItems=xl.U,this.detect=()=>this._cdRef.detectChanges()}}return c.\u0275fac=function(t){return new(t||c)(B.Y36(B.sBO))},c.\u0275cmp=B.Xpm({type:c,selectors:[["app-main"]],decls:5,vars:1,consts:[[1,"menu-wrapper","row","d-sm-flex","d-block"],["class","col",4,"ngFor","ngForOf"],[1,"social-wrapper"],[1,"col"],[3,"title","target","detectChanges"]],template:function(t,n){1&t&&(B.TgZ(0,"ul",0),B.YNc(1,WM,2,2,"li",1),B.qZA(),B._UZ(2,"app-object-3d"),B.TgZ(3,"div",2),B._UZ(4,"app-social"),B.qZA()),2&t&&(B.xp6(1),B.Q6J("ngForOf",n.menuItems))},dependencies:[ta.sg,bo,$p.z,Ta],styles:[".menu-wrapper[_ngcontent-%COMP%]{width:max-content;justify-content:flex-start;margin:0;padding:0}.menu-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:200px;list-style-type:none}.social-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:10px}@media only screen and (max-width: 575px){.menu-wrapper[_ngcontent-%COMP%]{width:100%;justify-content:center}}"],changeDetection:0}),c})()},{path:"about",outlet:"about-outlet",loadChildren:()=>Promise.all([W.e(229),W.e(350)]).then(W.bind(W,1350)).then(c=>c.AboutModalModule)},{path:"contact",outlet:"contact-outlet",loadChildren:()=>Promise.all([W.e(229),W.e(605)]).then(W.bind(W,7605)).then(c=>c.ContactModalModule)}];let Dy=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=B.oAB({type:c}),c.\u0275inj=B.cJS({imports:[Oa.Bz.forRoot(jM,{useHash:!0}),Oa.Bz]}),c})();function hx(c,e,t,n){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",mt([Y({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),Y({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.6}),Y({transform:"translate3d(0, {{ c }}, 0)",offset:.75}),Y({transform:"translate3d(0, {{ d }}, 0)",offset:.9}),Y({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:c,b:e,c:t,d:n}})}function JM(c,e,t,n){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",mt([Y({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),Y({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:.6}),Y({transform:"translate3d({{ c }}, 0, 0)",offset:.75}),Y({transform:"translate3d({{ d }}, 0, 0)",offset:.9}),Y({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:c,b:e,c:t,d:n}})}function eS(c,e,t,n){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"translate3d(0, {{ a }}, 0)",offset:.2}),Y({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.4}),Y({opacity:1,transform:"translate3d(0, {{ c }}, 0)",offset:.45}),Y({opacity:0,transform:"translate3d(0, {{ d }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e,c:t,d:n}})}function Ty(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:.2}),Y({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e}})}function Ca(c,e,t,n,s=0,a=1){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:"{{ fromOpacity }}",transform:"translate3d({{ fromX }}, {{ fromY }}, 0)",offset:0}),Y({opacity:"{{ toOpacity }}",transform:"translate3d({{ toX }}, {{ toY }}, 0)",offset:1})])),{params:{timing:1,delay:0,fromX:c,toX:t,fromY:e,toY:n,fromOpacity:s,toOpacity:a}})}function Mc(c,e,t=0,n=1){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:"{{ fromOpacity }}",transform:"translate3d({{ a }}, 0, 0)",offset:0}),Y({opacity:"{{ toOpacity }}",transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e,fromOpacity:t,toOpacity:n}})}function Oh(c,e,t=0,n=1){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:"{{ fromOpacity }}",transform:"translate3d(0, {{ a }}, 0)",offset:0}),Y({opacity:"{{ toOpacity }}",transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e,fromOpacity:t,toOpacity:n}})}function Nh(c,e){return Mc(c,e,1,0)}function Bp(c,e){return Oh(c,e,1,0)}function Zu(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"translate3d({{ a }}, 0, 0)",offset:0}),Y({transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e}})}function Ju(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"translate3d(0, {{ a }}, 0)",offset:0}),Y({transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e}})}function gx(c,e){return Ze([Y({"backface-visibility":"visible"}),Ne("{{ timing }}s {{ delay }}s ease-in",mt([Y({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),Y({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),Y({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),Y({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),Y({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:c,rotateY:e}})}function yx(c,e){return Ze([Y({"backface-visibility":"visible"}),Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"perspective(400px)",offset:0}),Y({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.3}),Y({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:1})]))],{params:{timing:1,delay:0,rotateX:c,rotateY:e}})}function Qu(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({"transform-origin":"{{ origin }}",opacity:"{{ fromOpacity }}",transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:0}),Y({"transform-origin":"{{ origin }}",opacity:"{{ toOpacity }}",transform:"none",offset:1})])),{params:{timing:1,delay:0,origin:c,degrees:e,fromOpacity:0,toOpacity:1}})}function Sc(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({"transform-origin":"{{ origin }}",opacity:"{{ fromOpacity }}",transform:"none",offset:0}),Y({"transform-origin":"{{ origin }}",opacity:"{{ toOpacity }}",transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:1})])),{params:{timing:1,delay:0,origin:c,degrees:e,fromOpacity:1,toOpacity:0}})}function mS(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",mt([Y({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ a }}, 0)",offset:0}),Y({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ b }}, 0)",offset:.6})])),{params:{timing:1,delay:0,a:c,b:e}})}function gS(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",mt([Y({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ a }}, 0, 0)",offset:0}),Y({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ b }}, 0, 0)",offset:.6})])),{params:{timing:1,delay:0,a:c,b:e}})}Ze([Y({transform:"translate3d(0, 0, 0)"}),Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"translate3d(0, 0, 0)",offset:.2}),Y({transform:"translate3d(0, -30px, 0)",offset:.4}),Y({transform:"translate3d(0, 0, 0)",offset:.53}),Y({transform:"translate3d(0, -15px, 0)",offset:.7}),Y({transform:"translate3d(0, -4px, 0)",offset:.9}),Y({transform:"translate3d(0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1}),Y({opacity:0}),Y({opacity:1}),Y({opacity:0}),Y({opacity:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"scale3d(1, 1, 1)"}),Y({transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})"}),Y({transform:"scale3d(1, 1, 1)"})])),{params:{scale:1.25,timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"scale3d(1, 1, 1)",offset:0}),Y({transform:"scale3d(1.25, 0.75, 1)",offset:.3}),Y({transform:"scale3d(0.75, 1.25, 1)",offset:.4}),Y({transform:"scale3d(1.15, 0.85, 1)",offset:.5}),Y({transform:"scale3d(.95, 1.05, 1)",offset:.65}),Y({transform:"scale3d(1.05, .95, 1)",offset:.75}),Y({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),sn(Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"translate3d(0, 0, 0)",offset:0}),Y({transform:"translate3d({{ translateB }})",offset:.1}),Y({transform:"translate3d({{ translateA }})",offset:.2}),Y({transform:"translate3d({{ translateB }})",offset:.3}),Y({transform:"translate3d({{ translateA }})",offset:.4}),Y({transform:"translate3d({{ translateB }})",offset:.5}),Y({transform:"translate3d({{ translateA }})",offset:.6}),Y({transform:"translate3d({{ translateB }})",offset:.7}),Y({transform:"translate3d({{ translateA }})",offset:.8}),Y({transform:"translate3d({{ translateB }})",offset:.9}),Y({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0,translateA:"-10px, 0, 0",translateB:"10px, 0, 0"}}),{params:{translateA:"0, -10px, 0",translateB:"0, 10px, 0"}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"rotate3d(0, 0, 1, 15deg)",offset:.2}),Y({transform:"rotate3d(0, 0, 1, -10deg)",offset:.4}),Y({transform:"rotate3d(0, 0, 1, 5deg)",offset:.6}),Y({transform:"rotate3d(0, 0, 1, -5deg)",offset:.8}),Y({transform:"rotate3d(0, 0, 1, 0deg)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"scale3d(1, 1, 1)",offset:0}),Y({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.1}),Y({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.2}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.3}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.4}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.5}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.6}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.7}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.8}),Y({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.9}),Y({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"none",offset:0}),Y({transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)",offset:.15}),Y({transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)",offset:.3}),Y({transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)",offset:.45}),Y({transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)",offset:.6}),Y({transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)",offset:.75}),Y({transform:"none",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"none",offset:0}),Y({transform:"none",offset:.11}),Y({transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.22}),Y({transform:"skewX(6.25deg) skewY(6.25deg)",offset:.33}),Y({transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.44}),Y({transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.55}),Y({transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.66}),Y({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.77}),Y({transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.88}),Y({transform:"none",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s ease-in-out",mt([Y({transform:"scale(1)",offset:0}),Y({transform:"scale({{ scale }})",offset:.14}),Y({transform:"scale(1)",offset:.28}),Y({transform:"scale({{ scale }})",offset:.42}),Y({transform:"scale(1)",offset:.7})])),{params:{timing:1.3,scale:1.3,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s ease-in-out",mt([Y({transform:"translateX(0)",offset:0}),Y({transform:"translateX(-6px) rotateY(-9deg)",offset:.065}),Y({transform:"translateX(5px) rotateY(7deg)",offset:.185}),Y({transform:"translateX(-3px) rotateY(-5deg)",offset:.315}),Y({transform:"translateX(2px) rotateY(3deg)",offset:.435}),Y({transform:"translateX(0)",offset:.5})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",mt([Y({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),Y({transform:"scale3d(1.1, 1.1, 1.1)",offset:.2}),Y({transform:"scale3d(.9, .9, .9)",offset:.4}),Y({opacity:1,transform:"scale3d(1.03, 1.03, 1.03)",offset:.6}),Y({transform:"scale3d(.97, .97, .97)",offset:.8}),Y({opacity:1,transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),hx("-3000px","25px","-10px","5px"),hx("3000px","-25px","10px","-5px"),JM("-3000px","25px","-10px","5px"),JM("3000px","-25px","10px","-5px"),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({transform:"scale3d(.9, .9, .9)",offset:.2}),Y({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.5}),Y({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.55}),Y({opacity:0,transform:"scale3d(.3, .3, .3)",offset:1})])),{params:{timing:1,delay:0,scale:1.1}}),eS("10px","-20px","-20px","2000px"),eS("-10px","20px","20px","-2000px"),Ty("20px","-2000px"),Ty("-20px","2000px"),Mc(0,0),Oh("-100%",0),Oh("-2000px",0),Oh("100%",0),Oh("2000px",0),Mc("-100%",0),Mc("-2000px",0),Mc("100%",0),Mc("2000px",0),Ca("-100%","-100%",0,0),Ca("100%","-100%",0,0),Ca("-100%","100%",0,0),Ca("100%","100%",0,0),Nh(0,0),Bp(0,"100%"),Bp(0,"2000px"),Bp(0,"-100%"),Bp(0,"-2000px"),Nh(0,"-100%"),Nh(0,"-2000px"),Nh(0,"100%"),Nh(0,"2000px"),Ca(0,0,"-100%","-100%",1,0),Ca(0,0,"100%","-100%",1,0),Ca(0,0,"-100%","100%",1,0),Ca(0,0,"100%","100%",1,0),Ju("-100%",0),Ju("100%",0),Zu("-100%",0),Zu("100%",0),Ju(0,"-100%"),Ju(0,"100%"),Zu(0,"-100%"),Zu(0,"100%"),Ze([Y({"backface-visibility":"visible"}),Ne("{{ timing }}s {{ delay }}s ease-out",mt([Y({transform:"perspective(400px) rotate3d(0, 1, 0, -360deg)",offset:0}),Y({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -190deg)",offset:.4}),Y({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -170deg)",offset:.5}),Y({transform:"perspective(400px) scale3d(.95, .95, .95)",offset:.8}),Y({transform:"perspective(400px)",offset:1})]))],{params:{timing:1,delay:0}}),gx(1,0),gx(0,1),yx(1,0),yx(0,1),Ze(Ne("{{ timing }}s {{ delay }}s ease-out",mt([Y({transform:"translate3d(-100%, 0, 0) skewX(30deg)",opacity:0,offset:0}),Y({transform:"skewX(-20deg)",opacity:1,offset:.6}),Y({transform:"skewX(5deg)",offset:.8}),Y({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s ease-out",mt([Y({transform:"translate3d(100%, 0, 0) skewX(-30deg)",opacity:0,offset:0}),Y({transform:"skewX(20deg)",opacity:1,offset:.6}),Y({transform:"skewX(-5deg)",offset:.8}),Y({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s ease-in",mt([Y({opacity:1,offset:0}),Y({opacity:0,transform:"translate3d(100%, 0, 0) skewX(30deg)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s ease-in",mt([Y({opacity:1,offset:0}),Y({opacity:0,transform:"translate3d(-100%, 0, 0) skewX(-30deg)",offset:1})])),{params:{timing:1,delay:0}}),Qu("center","-200deg"),Qu("left bottom","-45deg"),Qu("right bottom","45deg"),Qu("left bottom","45deg"),Qu("right bottom","-90deg"),Sc("center","200deg"),Sc("left bottom","45deg"),Sc("right bottom","-45deg"),Sc("left bottom","-45deg"),Sc("right bottom","90deg"),Ze([Y({"transform-origin":"top left"}),Ne("{{ timing }}s {{ delay }}s ease-in-out",mt([Y({transform:"rotate3d(0, 0, 1, 80deg)",offset:.2}),Y({transform:"rotate3d(0, 0, 1, 60deg)",offset:.4}),Y({transform:"rotate3d(0, 0, 1, 80deg)",offset:.6}),Y({opacity:1,transform:"rotate3d(0, 0, 1, 60deg)",offset:.8}),Y({opacity:0,transform:"translate3d(0, 700px, 0)",offset:1})]))],{params:{timing:1,delay:0}}),Ze([Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:0,transform:"scale(0.1) rotate(30deg)","transform-origin":"center bottom",offset:0}),Y({opacity:.5,transform:"rotate(-10deg)",offset:.5}),Y({opacity:.7,transform:"rotate(3deg)",offset:.7}),Y({opacity:1,transform:"scale(1)",offset:1})]))],{params:{timing:1,delay:0}}),Ze([Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:0,transform:"translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg)",offset:0}),Y({opacity:1,transform:"none",offset:1})]))],{params:{timing:1,delay:0}}),Ze([Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,offset:0}),Y({opacity:0,transform:"translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg)",offset:1})]))],{params:{timing:1,delay:0}}),Ze([Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),Y({opacity:1,transform:"scale3d(1, 1, 1)",offset:.5})]))],{params:{timing:1,delay:0}}),mS("-1000px","10px"),mS("1000px","-10px"),gS("-1000px","10px"),gS("1000px","-10px");const o=Ze([Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,offset:0}),Y({opacity:0,transform:"scale3d(.3, .3, .3)",offset:.5}),Y({opacity:0,offset:1})]))],{params:{timing:1,delay:0}});function u(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",mt([Y({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ a }}, 0)",offset:.4}),Y({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e}})}function h(c,e){return Ze(Ne("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",mt([Y({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ a }}, 0, 0)",offset:.4}),Y({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:c,b:e}})}u("-60px","2000px"),u("60px","-2000px"),h("42px","-2000px"),h("-42px","2000px"),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:.7,transform:"translateY(1200px) scale(0.7)",offset:0}),Y({opacity:.7,transform:"translateY(0px) scale(0.7)",offset:.8}),Y({opacity:1,transform:"scale(1)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:.7,transform:"translateY(-1200px) scale(0.7)",offset:0}),Y({opacity:.7,transform:"translateY(0px) scale(0.7)",offset:.8}),Y({opacity:1,transform:"scale(1)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:.7,transform:"translateX(-2000px) scale(0.7)",offset:0}),Y({opacity:.7,transform:"translateX(0px) scale(0.7)",offset:.8}),Y({opacity:1,transform:"scale(1)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:.7,transform:"translateX(2000px) scale(0.7)",offset:0}),Y({opacity:.7,transform:"translateX(0px) scale(0.7)",offset:.8}),Y({opacity:1,transform:"scale(1)",offset:1})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,transform:"scale(1)"}),Y({opacity:.7,transform:"translateY(0px) scale(0.7)"}),Y({opacity:.7,transform:"translateY(-700px) scale(0.7)"})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,transform:"scale(1)"}),Y({opacity:.7,transform:"translateY(0px) scale(0.7)"}),Y({opacity:.7,transform:"translateY(700px) scale(0.7)"})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,transform:"scale(1)"}),Y({opacity:.7,transform:"translateX(0px) scale(0.7)"}),Y({opacity:.7,transform:"translateX(2000px) scale(0.7)"})])),{params:{timing:1,delay:0}}),Ze(Ne("{{ timing }}s {{ delay }}s",mt([Y({opacity:1,transform:"scale(1)"}),Y({opacity:.7,transform:"translateX(0px) scale(0.7)"}),Y({opacity:.7,transform:"translateX(-2000px) scale(0.7)"})])),{params:{timing:1,delay:0}});var jt=W(2896),on=W(8417);const ut=function(c,e,t){return{"success-alert":c,"error-alert":e,"info-alert":t}};function cn(c,e){if(1&c){const t=B.EpF();B.TgZ(0,"div",2)(1,"div",3)(2,"p",4)(3,"i",5),B.NdJ("click",function(){const s=B.CHM(t),a=s.$implicit,l=s.index,d=B.oxw();return B.KtG(d.copyMessage(a.mssg,l))}),B.qZA(),B.TgZ(4,"i",6),B.NdJ("click",function(){const a=B.CHM(t).index,l=B.oxw();return B.KtG(l.onClose(l.alerts[a].uuid))}),B.qZA()(),B.TgZ(5,"div",7)(6,"pre"),B._uU(7),B.qZA()()()()}if(2&c){const t=e.$implicit,n=e.index,s=B.oxw();B.Q6J("ngClass",B.kEZ(3,ut,t.type===s.TYPES.SUCCESS,t.type===s.TYPES.ERROR,t.type===s.TYPES.INFO)),B.xp6(3),B.Q6J("@zoomOut",s.alerts[n].zoomOut),B.xp6(4),B.Oqu(t.mssg)}}let Nn=class extends((0,ra.v)(ia.K)){constructor(e,t){super(),this._alertService=e,this._cdRef=t,this.alerts=[],this.TYPES=jt.N,this.copyMessage=(n,s)=>{navigator.clipboard.writeText(n),this.alerts[s].zoomOut=!this.alerts[s].zoomOut},this.onClose=n=>this._removeAlertBy(n),this._alreadyContains=n=>this.alerts.some(s=>s.uuid===n),this._add=n=>{this.alerts.push(n)},this._removeAlertBy=n=>{this.alerts=this.alerts.filter(s=>s.uuid!==n)}}ngOnInit(){this._alertService.display$.pipe((0,Na.b)(e=>{this._alreadyContains(e.uuid)?this._removeAlertBy(e.uuid):this._add(Object.assign(e,{zoomOut:!1})),this._cdRef.markForCheck()}),(0,wl.R)(this.unsubscribe$)).subscribe()}};Nn.\u0275fac=function(e){return new(e||Nn)(B.Y36(on.c),B.Y36(B.sBO))},Nn.\u0275cmp=B.Xpm({type:Nn,selectors:[["app-alert"]],features:[B.qOj],decls:2,vars:1,consts:[[1,"position-absolute","bottom-0","end-0"],["class","alert-wrapper end-0",3,"ngClass",4,"ngFor","ngForOf"],[1,"alert-wrapper","end-0",3,"ngClass"],[1,"alert-message-wrapper"],[1,"actions-row"],[1,"fa","fa-copy",3,"click"],[1,"fa","fa-close",3,"click"],[1,"message"]],template:function(e,t){1&e&&(B.TgZ(0,"div",0),B.YNc(1,cn,8,7,"div",1),B.qZA()),2&e&&(B.xp6(1),B.Q6J("ngForOf",t.alerts))},dependencies:[ta.mk,ta.sg],styles:['@charset "UTF-8";.success-alert[_ngcontent-%COMP%]{border:1.5px solid rgba(60,188,100,.6)}.error-alert[_ngcontent-%COMP%]{border:1.5px solid rgb(250,30,15)}.info-alert[_ngcontent-%COMP%]{border:1.5px solid rgb(249,191,59)}.alert-wrapper[_ngcontent-%COMP%]{min-height:15vh;background-color:#fff;padding:.5rem 1.5rem;position:relative;bottom:0;text-align:center;margin:1rem;border-radius:25px;z-index:999}.alert-wrapper[_ngcontent-%COMP%]   .alert-message-wrapper[_ngcontent-%COMP%]{margin-top:1.8vh;margin-bottom:1.8vh}.alert-wrapper[_ngcontent-%COMP%]   .alert-message-wrapper[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{text-align:end;margin:0;display:flex;justify-content:flex-end}.alert-wrapper[_ngcontent-%COMP%]   .alert-message-wrapper[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .fa-copy[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;cursor:pointer}.alert-wrapper[_ngcontent-%COMP%]   .alert-message-wrapper[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .fa-close[_ngcontent-%COMP%]{font-size:1.5re\\105m;margin-left:12px;cursor:pointer}.alert-wrapper[_ngcontent-%COMP%]   .alert-message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{text-align:-webkit-auto;margin:0}@media only screen and (max-width: 575px){.alert-wrapper[_ngcontent-%COMP%]{width:90vw}.alert-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{max-height:8rem}}@media only screen and (min-width: 576px) and (max-width: 767px){.alert-wrapper[_ngcontent-%COMP%]{width:80vw}.alert-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{max-height:30vh}}@media only screen and (min-width: 768px){.alert-wrapper[_ngcontent-%COMP%]{width:45vw}.alert-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{max-height:30vh}}'],data:{animation:[function Xe(c,e){return{type:7,name:c,definitions:e,options:{}}}("zoomOut",[at("void => true",sn(o)),at("false => true",sn(o)),at("true => false",sn(o))])]},changeDetection:0}),Nn=(0,bl.gn)([na.f],Nn);let ai=class extends((0,ra.v)(ia.K)){constructor(e,t){super(),this._busyService=e,this.cdRef=t,this.ready=!1}ngOnInit(){console.log("2024-10-19T16:23:32.243Z"),this._busyService.ready$.pipe((0,Na.b)(e=>{this.ready=e,this.cdRef.markForCheck()}),(0,wl.R)(this.unsubscribe$)).subscribe()}};ai.\u0275fac=function(e){return new(e||ai)(B.Y36(xs.z),B.Y36(B.sBO))},ai.\u0275cmp=B.Xpm({type:ai,selectors:[["app-root"]],features:[B.qOj],decls:6,vars:1,consts:[["id","overlay",3,"ngClass"],[1,"container-fluid","fill-height"],["name","about-outlet"],["name","contact-outlet"]],template:function(e,t){1&e&&(B._UZ(0,"div",0),B.TgZ(1,"div",1),B._UZ(2,"router-outlet")(3,"router-outlet",2)(4,"router-outlet",3)(5,"app-alert"),B.qZA()),2&e&&B.Q6J("ngClass",t.ready?"d-none":"d-block")},dependencies:[ta.mk,Oa.lC,Nn],styles:["#overlay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;inset:0;background-color:#00000080;z-index:2;cursor:pointer}.fill-height[_ngcontent-%COMP%]{min-height:100%;height:auto!important;height:100%;overflow-y:hidden;padding:0}"],changeDetection:0}),ai=(0,bl.gn)([na.f],ai);var Ec=W(2843),Py=W(4004),Ly=W(262);const Up={1:"Informational response\nThe request was received, continuing process.",2:"Success\nThe request was successfully received, understood, and accepted.",3:"Redirection\nFurther action needs to be taken in order to complete the request.",4:"Client error\nThe request contains bad syntax or cannot be fulfilled.",5:"Server error\nThe server failed to fulfil an apparently valid request."};let Oy=(()=>{class c{constructor(t,n){this._busyService=t,this._alertService=n,this.intercept=(s,a)=>(this._busyService.ready.next(!1),a.handle(s).pipe((0,Py.U)(l=>(l instanceof Re.Zn&&(this._busyService.setLoading(!1,s.url),this._alertService.success(Up[2])),l)),(0,Ly.K)(l=>(this._busyService.setLoading(!1,s.url),this._alertService.error(Ny(l)),this._alertService.info("This service is unavailable at the moment.\nPlease, contact me directly at pmmiklas@gmail.com."),(0,Ec._)(()=>new Error(l.message))))))}}return c.\u0275fac=function(t){return new(t||c)(B.LFG(xs.z),B.LFG(on.c))},c.\u0275prov=B.Yz7({token:c,factory:c.\u0275fac}),c})();const Ny=c=>Up[Math.floor(c.status/100)];var Fy=W(4466);let ky=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=B.oAB({type:c,bootstrap:[ai]}),c.\u0275inj=B.cJS({providers:[{provide:Re.TP,useClass:Oy,multi:!0}],imports:[L.b2,Oa.Bz,Dy,Re.JF,_r,Fy.m]}),c})();(0,B.G48)(),L.q6().bootstrapModule(ky).catch(c=>console.error(c))},1135:(Xt,Be,W)=>{W.d(Be,{X:()=>B});var L=W(7579);class B extends L.x{constructor(Ae){super(),this._value=Ae}get value(){return this.getValue()}_subscribe(Ae){const Te=super._subscribe(Ae);return!Te.closed&&Ae.next(this._value),Te}getValue(){const{hasError:Ae,thrownError:Te,_value:Ge}=this;if(Ae)throw Te;return this._throwIfClosed(),Ge}next(Ae){super.next(this._value=Ae)}}},9751:(Xt,Be,W)=>{W.d(Be,{y:()=>Ne});var L=W(930),B=W(727),Re=W(8822),Ae=W(9635),Te=W(2416),Ge=W(576),Xe=W(2806);let Ne=(()=>{class vt{constructor(at){at&&(this._subscribe=at)}lift(at){const Ze=new vt;return Ze.source=this,Ze.operator=at,Ze}subscribe(at,Ze,Zt){const sn=function Y(vt){return vt&&vt instanceof L.Lv||function it(vt){return vt&&(0,Ge.m)(vt.next)&&(0,Ge.m)(vt.error)&&(0,Ge.m)(vt.complete)}(vt)&&(0,B.Nn)(vt)}(at)?at:new L.Hp(at,Ze,Zt);return(0,Xe.x)(()=>{const{operator:xn,source:Hn}=this;sn.add(xn?xn.call(sn,Hn):Hn?this._subscribe(sn):this._trySubscribe(sn))}),sn}_trySubscribe(at){try{return this._subscribe(at)}catch(Ze){at.error(Ze)}}forEach(at,Ze){return new(Ze=gt(Ze))((Zt,sn)=>{const xn=new L.Hp({next:Hn=>{try{at(Hn)}catch(Ut){sn(Ut),xn.unsubscribe()}},error:sn,complete:Zt});this.subscribe(xn)})}_subscribe(at){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(at)}[Re.L](){return this}pipe(...at){return(0,Ae.U)(at)(this)}toPromise(at){return new(at=gt(at))((Ze,Zt)=>{let sn;this.subscribe(xn=>sn=xn,xn=>Zt(xn),()=>Ze(sn))})}}return vt.create=mt=>new vt(mt),vt})();function gt(vt){var mt;return null!==(mt=vt??Te.v.Promise)&&void 0!==mt?mt:Promise}},7579:(Xt,Be,W)=>{W.d(Be,{x:()=>Xe});var L=W(9751),B=W(727);const Ae=(0,W(3888).d)(gt=>function(){gt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=W(8737),Ge=W(2806);let Xe=(()=>{class gt extends L.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const vt=new Ne(this,this);return vt.operator=Y,vt}_throwIfClosed(){if(this.closed)throw new Ae}next(Y){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const vt of this.currentObservers)vt.next(Y)}})}error(Y){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:vt}=this;for(;vt.length;)vt.shift().error(Y)}})}complete(){(0,Ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:vt,isStopped:mt,observers:at}=this;return vt||mt?B.Lc:(this.currentObservers=null,at.push(Y),new B.w0(()=>{this.currentObservers=null,(0,Te.P)(at,Y)}))}_checkFinalizedStatuses(Y){const{hasError:vt,thrownError:mt,isStopped:at}=this;vt?Y.error(mt):at&&Y.complete()}asObservable(){const Y=new L.y;return Y.source=this,Y}}return gt.create=(it,Y)=>new Ne(it,Y),gt})();class Ne extends Xe{constructor(it,Y){super(),this.destination=it,this.source=Y}next(it){var Y,vt;null===(vt=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===vt||vt.call(Y,it)}error(it){var Y,vt;null===(vt=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===vt||vt.call(Y,it)}complete(){var it,Y;null===(Y=null===(it=this.destination)||void 0===it?void 0:it.complete)||void 0===Y||Y.call(it)}_subscribe(it){var Y,vt;return null!==(vt=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(it))&&void 0!==vt?vt:B.Lc}}},930:(Xt,Be,W)=>{W.d(Be,{Hp:()=>Zt,Lv:()=>vt});var L=W(576),B=W(727),Re=W(2416),Ae=W(7849),Te=W(5032);const Ge=gt("C",void 0,void 0);function gt(Ot,Le,Je){return{kind:Ot,value:Le,error:Je}}var it=W(3410),Y=W(2806);class vt extends B.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,B.Nn)(Le)&&Le.add(this)):this.destination=Ut}static create(Le,Je,Dn){return new Zt(Le,Je,Dn)}next(Le){this.isStopped?Hn(function Ne(Ot){return gt("N",Ot,void 0)}(Le),this):this._next(Le)}error(Le){this.isStopped?Hn(function Xe(Ot){return gt("E",void 0,Ot)}(Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?Hn(Ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function at(Ot,Le){return mt.call(Ot,Le)}class Ze{constructor(Le){this.partialObserver=Le}next(Le){const{partialObserver:Je}=this;if(Je.next)try{Je.next(Le)}catch(Dn){sn(Dn)}}error(Le){const{partialObserver:Je}=this;if(Je.error)try{Je.error(Le)}catch(Dn){sn(Dn)}else sn(Le)}complete(){const{partialObserver:Le}=this;if(Le.complete)try{Le.complete()}catch(Je){sn(Je)}}}class Zt extends vt{constructor(Le,Je,Dn){let ct;if(super(),(0,L.m)(Le)||!Le)ct={next:Le??void 0,error:Je??void 0,complete:Dn??void 0};else{let Qe;this&&Re.v.useDeprecatedNextContext?(Qe=Object.create(Le),Qe.unsubscribe=()=>this.unsubscribe(),ct={next:Le.next&&at(Le.next,Qe),error:Le.error&&at(Le.error,Qe),complete:Le.complete&&at(Le.complete,Qe)}):ct=Le}this.destination=new Ze(ct)}}function sn(Ot){Re.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Ot):(0,Ae.h)(Ot)}function Hn(Ot,Le){const{onStoppedNotification:Je}=Re.v;Je&&it.z.setTimeout(()=>Je(Ot,Le))}const Ut={closed:!0,next:Te.Z,error:function xn(Ot){throw Ot},complete:Te.Z}},727:(Xt,Be,W)=>{W.d(Be,{Lc:()=>Ge,w0:()=>Te,Nn:()=>Xe});var L=W(576);const Re=(0,W(3888).d)(gt=>function(Y){gt(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((vt,mt)=>`${mt+1}) ${vt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var Ae=W(8737);class Te{constructor(it){this.initialTeardown=it,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let it;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const at of Y)at.remove(this);else Y.remove(this);const{initialTeardown:vt}=this;if((0,L.m)(vt))try{vt()}catch(at){it=at instanceof Re?at.errors:[at]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const at of mt)try{Ne(at)}catch(Ze){it=it??[],Ze instanceof Re?it=[...it,...Ze.errors]:it.push(Ze)}}if(it)throw new Re(it)}}add(it){var Y;if(it&&it!==this)if(this.closed)Ne(it);else{if(it instanceof Te){if(it.closed||it._hasParent(this))return;it._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(it)}}_hasParent(it){const{_parentage:Y}=this;return Y===it||Array.isArray(Y)&&Y.includes(it)}_addParent(it){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(it),Y):Y?[Y,it]:it}_removeParent(it){const{_parentage:Y}=this;Y===it?this._parentage=null:Array.isArray(Y)&&(0,Ae.P)(Y,it)}remove(it){const{_finalizers:Y}=this;Y&&(0,Ae.P)(Y,it),it instanceof Te&&it._removeParent(this)}}Te.EMPTY=(()=>{const gt=new Te;return gt.closed=!0,gt})();const Ge=Te.EMPTY;function Xe(gt){return gt instanceof Te||gt&&"closed"in gt&&(0,L.m)(gt.remove)&&(0,L.m)(gt.add)&&(0,L.m)(gt.unsubscribe)}function Ne(gt){(0,L.m)(gt)?gt():gt.unsubscribe()}},2416:(Xt,Be,W)=>{W.d(Be,{v:()=>L});const L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Xt,Be,W)=>{W.d(Be,{z:()=>Te});var L=W(8189),Re=W(3269),Ae=W(2076);function Te(...Ge){return function B(){return(0,L.J)(1)}()((0,Ae.D)(Ge,(0,Re.yG)(Ge)))}},515:(Xt,Be,W)=>{W.d(Be,{E:()=>B});const B=new(W(9751).y)(Te=>Te.complete())},2076:(Xt,Be,W)=>{W.d(Be,{D:()=>Dn});var L=W(8421),B=W(9672),Re=W(4482),Ae=W(5403);function Te(ct,Qe=0){return(0,Re.e)((Tt,me)=>{Tt.subscribe((0,Ae.x)(me,_e=>(0,B.f)(me,ct,()=>me.next(_e),Qe),()=>(0,B.f)(me,ct,()=>me.complete(),Qe),_e=>(0,B.f)(me,ct,()=>me.error(_e),Qe)))})}function Ge(ct,Qe=0){return(0,Re.e)((Tt,me)=>{me.add(ct.schedule(()=>Tt.subscribe(me),Qe))})}var gt=W(9751),Y=W(2202),vt=W(576);function at(ct,Qe){if(!ct)throw new Error("Iterable cannot be null");return new gt.y(Tt=>{(0,B.f)(Tt,Qe,()=>{const me=ct[Symbol.asyncIterator]();(0,B.f)(Tt,Qe,()=>{me.next().then(_e=>{_e.done?Tt.complete():Tt.next(_e.value)})},0,!0)})})}var Ze=W(3670),Zt=W(8239),sn=W(1144),xn=W(6495),Hn=W(2206),Ut=W(4532),Ot=W(3260);function Dn(ct,Qe){return Qe?function Je(ct,Qe){if(null!=ct){if((0,Ze.c)(ct))return function Xe(ct,Qe){return(0,L.Xf)(ct).pipe(Ge(Qe),Te(Qe))}(ct,Qe);if((0,sn.z)(ct))return function it(ct,Qe){return new gt.y(Tt=>{let me=0;return Qe.schedule(function(){me===ct.length?Tt.complete():(Tt.next(ct[me++]),Tt.closed||this.schedule())})})}(ct,Qe);if((0,Zt.t)(ct))return function Ne(ct,Qe){return(0,L.Xf)(ct).pipe(Ge(Qe),Te(Qe))}(ct,Qe);if((0,Hn.D)(ct))return at(ct,Qe);if((0,xn.T)(ct))return function mt(ct,Qe){return new gt.y(Tt=>{let me;return(0,B.f)(Tt,Qe,()=>{me=ct[Y.h](),(0,B.f)(Tt,Qe,()=>{let _e,Fe;try{({value:_e,done:Fe}=me.next())}catch(xe){return void Tt.error(xe)}Fe?Tt.complete():Tt.next(_e)},0,!0)}),()=>(0,vt.m)(me?.return)&&me.return()})}(ct,Qe);if((0,Ot.L)(ct))return function Le(ct,Qe){return at((0,Ot.Q)(ct),Qe)}(ct,Qe)}throw(0,Ut.z)(ct)}(ct,Qe):(0,L.Xf)(ct)}},8421:(Xt,Be,W)=>{W.d(Be,{Xf:()=>mt});var L=W(655),B=W(1144),Re=W(8239),Ae=W(9751),Te=W(3670),Ge=W(2206),Xe=W(4532),Ne=W(6495),gt=W(3260),it=W(576),Y=W(7849),vt=W(8822);function mt(Ot){if(Ot instanceof Ae.y)return Ot;if(null!=Ot){if((0,Te.c)(Ot))return function at(Ot){return new Ae.y(Le=>{const Je=Ot[vt.L]();if((0,it.m)(Je.subscribe))return Je.subscribe(Le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ot);if((0,B.z)(Ot))return function Ze(Ot){return new Ae.y(Le=>{for(let Je=0;Je<Ot.length&&!Le.closed;Je++)Le.next(Ot[Je]);Le.complete()})}(Ot);if((0,Re.t)(Ot))return function Zt(Ot){return new Ae.y(Le=>{Ot.then(Je=>{Le.closed||(Le.next(Je),Le.complete())},Je=>Le.error(Je)).then(null,Y.h)})}(Ot);if((0,Ge.D)(Ot))return xn(Ot);if((0,Ne.T)(Ot))return function sn(Ot){return new Ae.y(Le=>{for(const Je of Ot)if(Le.next(Je),Le.closed)return;Le.complete()})}(Ot);if((0,gt.L)(Ot))return function Hn(Ot){return xn((0,gt.Q)(Ot))}(Ot)}throw(0,Xe.z)(Ot)}function xn(Ot){return new Ae.y(Le=>{(function Ut(Ot,Le){var Je,Dn,ct,Qe;return(0,L.mG)(this,void 0,void 0,function*(){try{for(Je=(0,L.KL)(Ot);!(Dn=yield Je.next()).done;)if(Le.next(Dn.value),Le.closed)return}catch(Tt){ct={error:Tt}}finally{try{Dn&&!Dn.done&&(Qe=Je.return)&&(yield Qe.call(Je))}finally{if(ct)throw ct.error}}Le.complete()})})(Ot,Le).catch(Je=>Le.error(Je))})}},9646:(Xt,Be,W)=>{W.d(Be,{of:()=>Re});var L=W(3269),B=W(2076);function Re(...Ae){const Te=(0,L.yG)(Ae);return(0,B.D)(Ae,Te)}},2843:(Xt,Be,W)=>{W.d(Be,{_:()=>Re});var L=W(9751),B=W(576);function Re(Ae,Te){const Ge=(0,B.m)(Ae)?Ae:()=>Ae,Xe=Ne=>Ne.error(Ge());return new L.y(Te?Ne=>Te.schedule(Xe,0,Ne):Xe)}},5403:(Xt,Be,W)=>{W.d(Be,{x:()=>B});var L=W(930);function B(Ae,Te,Ge,Xe,Ne){return new Re(Ae,Te,Ge,Xe,Ne)}class Re extends L.Lv{constructor(Te,Ge,Xe,Ne,gt,it){super(Te),this.onFinalize=gt,this.shouldUnsubscribe=it,this._next=Ge?function(Y){try{Ge(Y)}catch(vt){Te.error(vt)}}:super._next,this._error=Ne?function(Y){try{Ne(Y)}catch(vt){Te.error(vt)}finally{this.unsubscribe()}}:super._error,this._complete=Xe?function(){try{Xe()}catch(Y){Te.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ge}=this;super.unsubscribe(),!Ge&&(null===(Te=this.onFinalize)||void 0===Te||Te.call(this))}}}},262:(Xt,Be,W)=>{W.d(Be,{K:()=>Ae});var L=W(8421),B=W(5403),Re=W(4482);function Ae(Te){return(0,Re.e)((Ge,Xe)=>{let it,Ne=null,gt=!1;Ne=Ge.subscribe((0,B.x)(Xe,void 0,void 0,Y=>{it=(0,L.Xf)(Te(Y,Ae(Te)(Ge))),Ne?(Ne.unsubscribe(),Ne=null,it.subscribe(Xe)):gt=!0})),gt&&(Ne.unsubscribe(),Ne=null,it.subscribe(Xe))})}},4351:(Xt,Be,W)=>{W.d(Be,{b:()=>Re});var L=W(5577),B=W(576);function Re(Ae,Te){return(0,B.m)(Te)?(0,L.z)(Ae,Te,1):(0,L.z)(Ae,1)}},9300:(Xt,Be,W)=>{W.d(Be,{h:()=>Re});var L=W(4482),B=W(5403);function Re(Ae,Te){return(0,L.e)((Ge,Xe)=>{let Ne=0;Ge.subscribe((0,B.x)(Xe,gt=>Ae.call(Te,gt,Ne++)&&Xe.next(gt)))})}},4004:(Xt,Be,W)=>{W.d(Be,{U:()=>Re});var L=W(4482),B=W(5403);function Re(Ae,Te){return(0,L.e)((Ge,Xe)=>{let Ne=0;Ge.subscribe((0,B.x)(Xe,gt=>{Xe.next(Ae.call(Te,gt,Ne++))}))})}},9718:(Xt,Be,W)=>{W.d(Be,{h:()=>B});var L=W(4004);function B(Re){return(0,L.U)(()=>Re)}},8189:(Xt,Be,W)=>{W.d(Be,{J:()=>Re});var L=W(5577),B=W(4671);function Re(Ae=1/0){return(0,L.z)(B.y,Ae)}},5577:(Xt,Be,W)=>{W.d(Be,{z:()=>Ne});var L=W(4004),B=W(8421),Re=W(4482),Ae=W(9672),Te=W(5403),Xe=W(576);function Ne(gt,it,Y=1/0){return(0,Xe.m)(it)?Ne((vt,mt)=>(0,L.U)((at,Ze)=>it(vt,at,mt,Ze))((0,B.Xf)(gt(vt,mt))),Y):("number"==typeof it&&(Y=it),(0,Re.e)((vt,mt)=>function Ge(gt,it,Y,vt,mt,at,Ze,Zt){const sn=[];let xn=0,Hn=0,Ut=!1;const Ot=()=>{Ut&&!sn.length&&!xn&&it.complete()},Le=Dn=>xn<vt?Je(Dn):sn.push(Dn),Je=Dn=>{at&&it.next(Dn),xn++;let ct=!1;(0,B.Xf)(Y(Dn,Hn++)).subscribe((0,Te.x)(it,Qe=>{mt?.(Qe),at?Le(Qe):it.next(Qe)},()=>{ct=!0},void 0,()=>{if(ct)try{for(xn--;sn.length&&xn<vt;){const Qe=sn.shift();Ze?(0,Ae.f)(it,Ze,()=>Je(Qe)):Je(Qe)}Ot()}catch(Qe){it.error(Qe)}}))};return gt.subscribe((0,Te.x)(it,Le,()=>{Ut=!0,Ot()})),()=>{Zt?.()}}(vt,mt,gt,Y)))}},3900:(Xt,Be,W)=>{W.d(Be,{w:()=>Ae});var L=W(8421),B=W(4482),Re=W(5403);function Ae(Te,Ge){return(0,B.e)((Xe,Ne)=>{let gt=null,it=0,Y=!1;const vt=()=>Y&&!gt&&Ne.complete();Xe.subscribe((0,Re.x)(Ne,mt=>{gt?.unsubscribe();let at=0;const Ze=it++;(0,L.Xf)(Te(mt,Ze)).subscribe(gt=(0,Re.x)(Ne,Zt=>Ne.next(Ge?Ge(mt,Zt,Ze,at++):Zt),()=>{gt=null,vt()}))},()=>{Y=!0,vt()}))})}},5698:(Xt,Be,W)=>{W.d(Be,{q:()=>Ae});var L=W(515),B=W(4482),Re=W(5403);function Ae(Te){return Te<=0?()=>L.E:(0,B.e)((Ge,Xe)=>{let Ne=0;Ge.subscribe((0,Re.x)(Xe,gt=>{++Ne<=Te&&(Xe.next(gt),Te<=Ne&&Xe.complete())}))})}},2722:(Xt,Be,W)=>{W.d(Be,{R:()=>Te});var L=W(4482),B=W(5403),Re=W(8421),Ae=W(5032);function Te(Ge){return(0,L.e)((Xe,Ne)=>{(0,Re.Xf)(Ge).subscribe((0,B.x)(Ne,()=>Ne.complete(),Ae.Z)),!Ne.closed&&Xe.subscribe(Ne)})}},8505:(Xt,Be,W)=>{W.d(Be,{b:()=>Te});var L=W(576),B=W(4482),Re=W(5403),Ae=W(4671);function Te(Ge,Xe,Ne){const gt=(0,L.m)(Ge)||Xe||Ne?{next:Ge,error:Xe,complete:Ne}:Ge;return gt?(0,B.e)((it,Y)=>{var vt;null===(vt=gt.subscribe)||void 0===vt||vt.call(gt);let mt=!0;it.subscribe((0,Re.x)(Y,at=>{var Ze;null===(Ze=gt.next)||void 0===Ze||Ze.call(gt,at),Y.next(at)},()=>{var at;mt=!1,null===(at=gt.complete)||void 0===at||at.call(gt),Y.complete()},at=>{var Ze;mt=!1,null===(Ze=gt.error)||void 0===Ze||Ze.call(gt,at),Y.error(at)},()=>{var at,Ze;mt&&(null===(at=gt.unsubscribe)||void 0===at||at.call(gt)),null===(Ze=gt.finalize)||void 0===Ze||Ze.call(gt)}))}):Ae.y}},3410:(Xt,Be,W)=>{W.d(Be,{z:()=>L});const L={setTimeout(B,Re,...Ae){const{delegate:Te}=L;return Te?.setTimeout?Te.setTimeout(B,Re,...Ae):setTimeout(B,Re,...Ae)},clearTimeout(B){const{delegate:Re}=L;return(Re?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(Xt,Be,W)=>{W.d(Be,{h:()=>B});const B=function L(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xt,Be,W)=>{W.d(Be,{L:()=>L});const L="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Xt,Be,W)=>{W.d(Be,{_6:()=>Ge,jO:()=>Ae,yG:()=>Te});var L=W(576),B=W(3532);function Re(Xe){return Xe[Xe.length-1]}function Ae(Xe){return(0,L.m)(Re(Xe))?Xe.pop():void 0}function Te(Xe){return(0,B.K)(Re(Xe))?Xe.pop():void 0}function Ge(Xe,Ne){return"number"==typeof Re(Xe)?Xe.pop():Ne}},4742:(Xt,Be,W)=>{W.d(Be,{D:()=>Te});const{isArray:L}=Array,{getPrototypeOf:B,prototype:Re,keys:Ae}=Object;function Te(Xe){if(1===Xe.length){const Ne=Xe[0];if(L(Ne))return{args:Ne,keys:null};if(function Ge(Xe){return Xe&&"object"==typeof Xe&&B(Xe)===Re}(Ne)){const gt=Ae(Ne);return{args:gt.map(it=>Ne[it]),keys:gt}}}return{args:Xe,keys:null}}},8737:(Xt,Be,W)=>{function L(B,Re){if(B){const Ae=B.indexOf(Re);0<=Ae&&B.splice(Ae,1)}}W.d(Be,{P:()=>L})},3888:(Xt,Be,W)=>{function L(B){const Ae=B(Te=>{Error.call(Te),Te.stack=(new Error).stack});return Ae.prototype=Object.create(Error.prototype),Ae.prototype.constructor=Ae,Ae}W.d(Be,{d:()=>L})},1810:(Xt,Be,W)=>{function L(B,Re){return B.reduce((Ae,Te,Ge)=>(Ae[Te]=Re[Ge],Ae),{})}W.d(Be,{n:()=>L})},2806:(Xt,Be,W)=>{W.d(Be,{O:()=>Ae,x:()=>Re});var L=W(2416);let B=null;function Re(Te){if(L.v.useDeprecatedSynchronousErrorHandling){const Ge=!B;if(Ge&&(B={errorThrown:!1,error:null}),Te(),Ge){const{errorThrown:Xe,error:Ne}=B;if(B=null,Xe)throw Ne}}else Te()}function Ae(Te){L.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=Te)}},9672:(Xt,Be,W)=>{function L(B,Re,Ae,Te=0,Ge=!1){const Xe=Re.schedule(function(){Ae(),Ge?B.add(this.schedule(null,Te)):this.unsubscribe()},Te);if(B.add(Xe),!Ge)return Xe}W.d(Be,{f:()=>L})},4671:(Xt,Be,W)=>{function L(B){return B}W.d(Be,{y:()=>L})},1144:(Xt,Be,W)=>{W.d(Be,{z:()=>L});const L=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(Xt,Be,W)=>{W.d(Be,{D:()=>B});var L=W(576);function B(Re){return Symbol.asyncIterator&&(0,L.m)(Re?.[Symbol.asyncIterator])}},576:(Xt,Be,W)=>{function L(B){return"function"==typeof B}W.d(Be,{m:()=>L})},3670:(Xt,Be,W)=>{W.d(Be,{c:()=>Re});var L=W(8822),B=W(576);function Re(Ae){return(0,B.m)(Ae[L.L])}},6495:(Xt,Be,W)=>{W.d(Be,{T:()=>Re});var L=W(2202),B=W(576);function Re(Ae){return(0,B.m)(Ae?.[L.h])}},8239:(Xt,Be,W)=>{W.d(Be,{t:()=>B});var L=W(576);function B(Re){return(0,L.m)(Re?.then)}},3260:(Xt,Be,W)=>{W.d(Be,{L:()=>Ae,Q:()=>Re});var L=W(655),B=W(576);function Re(Te){return(0,L.FC)(this,arguments,function*(){const Xe=Te.getReader();try{for(;;){const{value:Ne,done:gt}=yield(0,L.qq)(Xe.read());if(gt)return yield(0,L.qq)(void 0);yield yield(0,L.qq)(Ne)}}finally{Xe.releaseLock()}})}function Ae(Te){return(0,B.m)(Te?.getReader)}},3532:(Xt,Be,W)=>{W.d(Be,{K:()=>B});var L=W(576);function B(Re){return Re&&(0,L.m)(Re.schedule)}},4482:(Xt,Be,W)=>{W.d(Be,{A:()=>B,e:()=>Re});var L=W(576);function B(Ae){return(0,L.m)(Ae?.lift)}function Re(Ae){return Te=>{if(B(Te))return Te.lift(function(Ge){try{return Ae(Ge,this)}catch(Xe){this.error(Xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Xt,Be,W)=>{W.d(Be,{Z:()=>Ae});var L=W(4004);const{isArray:B}=Array;function Ae(Te){return(0,L.U)(Ge=>function Re(Te,Ge){return B(Ge)?Te(...Ge):Te(Ge)}(Te,Ge))}},5032:(Xt,Be,W)=>{function L(){}W.d(Be,{Z:()=>L})},9635:(Xt,Be,W)=>{W.d(Be,{U:()=>Re,z:()=>B});var L=W(4671);function B(...Ae){return Re(Ae)}function Re(Ae){return 0===Ae.length?L.y:1===Ae.length?Ae[0]:function(Ge){return Ae.reduce((Xe,Ne)=>Ne(Xe),Ge)}}},7849:(Xt,Be,W)=>{W.d(Be,{h:()=>Re});var L=W(2416),B=W(3410);function Re(Ae){B.z.setTimeout(()=>{const{onUnhandledError:Te}=L.v;if(!Te)throw Ae;Te(Ae)})}},4532:(Xt,Be,W)=>{function L(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(Be,{z:()=>L})},655:(Xt,Be,W)=>{function Te(me,_e,Fe,xe){var Jt,Mt=arguments.length,_t=Mt<3?_e:null===xe?xe=Object.getOwnPropertyDescriptor(_e,Fe):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_t=Reflect.decorate(me,_e,Fe,xe);else for(var bn=me.length-1;bn>=0;bn--)(Jt=me[bn])&&(_t=(Mt<3?Jt(_t):Mt>3?Jt(_e,Fe,_t):Jt(_e,Fe))||_t);return Mt>3&&_t&&Object.defineProperty(_e,Fe,_t),_t}function Ne(me,_e,Fe,xe){return new(Fe||(Fe=Promise))(function(_t,Jt){function bn(ki){try{Mn(xe.next(ki))}catch($i){Jt($i)}}function Ei(ki){try{Mn(xe.throw(ki))}catch($i){Jt($i)}}function Mn(ki){ki.done?_t(ki.value):function Mt(_t){return _t instanceof Fe?_t:new Fe(function(Jt){Jt(_t)})}(ki.value).then(bn,Ei)}Mn((xe=xe.apply(me,_e||[])).next())})}function sn(me){return this instanceof sn?(this.v=me,this):new sn(me)}function xn(me,_e,Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt,xe=Fe.apply(me,_e||[]),_t=[];return Mt={},Jt("next"),Jt("throw"),Jt("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt;function Jt(Zn){xe[Zn]&&(Mt[Zn]=function(Oi){return new Promise(function(Ji,pn){_t.push([Zn,Oi,Ji,pn])>1||bn(Zn,Oi)})})}function bn(Zn,Oi){try{!function Ei(Zn){Zn.value instanceof sn?Promise.resolve(Zn.value.v).then(Mn,ki):$i(_t[0][2],Zn)}(xe[Zn](Oi))}catch(Ji){$i(_t[0][3],Ji)}}function Mn(Zn){bn("next",Zn)}function ki(Zn){bn("throw",Zn)}function $i(Zn,Oi){Zn(Oi),_t.shift(),_t.length&&bn(_t[0][0],_t[0][1])}}function Ut(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,_e=me[Symbol.asyncIterator];return _e?_e.call(me):(me=function vt(me){var _e="function"==typeof Symbol&&Symbol.iterator,Fe=_e&&me[_e],xe=0;if(Fe)return Fe.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&xe>=me.length&&(me=void 0),{value:me&&me[xe++],done:!me}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Fe={},xe("next"),xe("throw"),xe("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe);function xe(_t){Fe[_t]=me[_t]&&function(Jt){return new Promise(function(bn,Ei){!function Mt(_t,Jt,bn,Ei){Promise.resolve(Ei).then(function(Mn){_t({value:Mn,done:bn})},Jt)}(bn,Ei,(Jt=me[_t](Jt)).done,Jt.value)})}}}W.d(Be,{FC:()=>xn,KL:()=>Ut,gn:()=>Te,mG:()=>Ne,qq:()=>sn})},6895:(Xt,Be,W)=>{W.d(Be,{Do:()=>Ut,EM:()=>Zo,HT:()=>Te,JF:()=>Mi,K0:()=>Xe,Mx:()=>Ar,O5:()=>ll,S$:()=>sn,V_:()=>it,Ye:()=>Ot,b0:()=>Hn,bD:()=>Ko,ez:()=>Xo,mk:()=>mi,q:()=>Re,sg:()=>al,w_:()=>Ge});var L=W(8256);let B=null;function Re(){return B}function Te(R){B||(B=R)}class Ge{}const Xe=new L.OlP("DocumentToken");let Ne=(()=>{class R{historyGo(P){throw new Error("Not implemented")}}return R.\u0275fac=function(P){return new(P||R)},R.\u0275prov=L.Yz7({token:R,factory:function(){return function gt(){return(0,L.LFG)(Y)}()},providedIn:"platform"}),R})();const it=new L.OlP("Location Initialized");let Y=(()=>{class R extends Ne{constructor(P){super(),this._doc=P,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Re().getBaseHref(this._doc)}onPopState(P){const j=Re().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",P,!1),()=>j.removeEventListener("popstate",P)}onHashChange(P){const j=Re().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",P,!1),()=>j.removeEventListener("hashchange",P)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(P){this.location.pathname=P}pushState(P,j,ue){vt()?this._history.pushState(P,j,ue):this.location.hash=ue}replaceState(P,j,ue){vt()?this._history.replaceState(P,j,ue):this.location.hash=ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return R.\u0275fac=function(P){return new(P||R)(L.LFG(Xe))},R.\u0275prov=L.Yz7({token:R,factory:function(){return function mt(){return new Y((0,L.LFG)(Xe))}()},providedIn:"platform"}),R})();function vt(){return!!window.history.pushState}function at(R,G){if(0==R.length)return G;if(0==G.length)return R;let P=0;return R.endsWith("/")&&P++,G.startsWith("/")&&P++,2==P?R+G.substring(1):1==P?R+G:R+"/"+G}function Ze(R){const G=R.match(/#|\?|$/),P=G&&G.index||R.length;return R.slice(0,P-("/"===R[P-1]?1:0))+R.slice(P)}function Zt(R){return R&&"?"!==R[0]?"?"+R:R}let sn=(()=>{class R{historyGo(P){throw new Error("Not implemented")}}return R.\u0275fac=function(P){return new(P||R)},R.\u0275prov=L.Yz7({token:R,factory:function(){return(0,L.f3M)(Hn)},providedIn:"root"}),R})();const xn=new L.OlP("appBaseHref");let Hn=(()=>{class R extends sn{constructor(P,j){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,L.f3M)(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return at(this._baseHref,P)}path(P=!1){const j=this._platformLocation.pathname+Zt(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&P?`${j}${ue}`:j}pushState(P,j,ue,ke){const rt=this.prepareExternalUrl(ue+Zt(ke));this._platformLocation.pushState(P,j,rt)}replaceState(P,j,ue,ke){const rt=this.prepareExternalUrl(ue+Zt(ke));this._platformLocation.replaceState(P,j,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return R.\u0275fac=function(P){return new(P||R)(L.LFG(Ne),L.LFG(xn,8))},R.\u0275prov=L.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Ut=(()=>{class R extends sn{constructor(P,j){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(P){const j=at(this._baseHref,P);return j.length>0?"#"+j:j}pushState(P,j,ue,ke){let rt=this.prepareExternalUrl(ue+Zt(ke));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(P,j,rt)}replaceState(P,j,ue,ke){let rt=this.prepareExternalUrl(ue+Zt(ke));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(P,j,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return R.\u0275fac=function(P){return new(P||R)(L.LFG(Ne),L.LFG(xn,8))},R.\u0275prov=L.Yz7({token:R,factory:R.\u0275fac}),R})(),Ot=(()=>{class R{constructor(P){this._subject=new L.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const j=this._locationStrategy.getBaseHref();this._baseHref=Ze(Dn(j)),this._locationStrategy.onPopState(ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:ue.state,type:ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,j=""){return this.path()==this.normalize(P+Zt(j))}normalize(P){return R.stripTrailingSlash(function Je(R,G){return R&&G.startsWith(R)?G.substring(R.length):G}(this._baseHref,Dn(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,j="",ue=null){this._locationStrategy.pushState(ue,"",P,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+Zt(j)),ue)}replaceState(P,j="",ue=null){this._locationStrategy.replaceState(ue,"",P,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+Zt(j)),ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)})),()=>{const j=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",j){this._urlChangeListeners.forEach(ue=>ue(P,j))}subscribe(P,j,ue){return this._subject.subscribe({next:P,error:j,complete:ue})}}return R.normalizeQueryParams=Zt,R.joinWithSlash=at,R.stripTrailingSlash=Ze,R.\u0275fac=function(P){return new(P||R)(L.LFG(sn))},R.\u0275prov=L.Yz7({token:R,factory:function(){return function Le(){return new Ot((0,L.LFG)(sn))}()},providedIn:"root"}),R})();function Dn(R){return R.replace(/\/index.html$/,"")}function Ar(R,G){G=encodeURIComponent(G);for(const P of R.split(";")){const j=P.indexOf("="),[ue,ke]=-1==j?[P,""]:[P.slice(0,j),P.slice(j+1)];if(ue.trim()===G)return decodeURIComponent(ke)}return null}let mi=(()=>{class R{constructor(P,j,ue,ke){this._iterableDiffers=P,this._keyValueDiffers=j,this._ngEl=ue,this._renderer=ke,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(P){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof P?P.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(P){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof P?P.split(/\s+/):P,this._rawClass&&((0,L.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const P=this._iterableDiffer.diff(this._rawClass);P&&this._applyIterableChanges(P)}else if(this._keyValueDiffer){const P=this._keyValueDiffer.diff(this._rawClass);P&&this._applyKeyValueChanges(P)}}_applyKeyValueChanges(P){P.forEachAddedItem(j=>this._toggleClass(j.key,j.currentValue)),P.forEachChangedItem(j=>this._toggleClass(j.key,j.currentValue)),P.forEachRemovedItem(j=>{j.previousValue&&this._toggleClass(j.key,!1)})}_applyIterableChanges(P){P.forEachAddedItem(j=>{if("string"!=typeof j.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,L.AaK)(j.item)}`);this._toggleClass(j.item,!0)}),P.forEachRemovedItem(j=>this._toggleClass(j.item,!1))}_applyClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(j=>this._toggleClass(j,!0)):Object.keys(P).forEach(j=>this._toggleClass(j,!!P[j])))}_removeClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(j=>this._toggleClass(j,!1)):Object.keys(P).forEach(j=>this._toggleClass(j,!1)))}_toggleClass(P,j){(P=P.trim())&&P.split(/\s+/g).forEach(ue=>{j?this._renderer.addClass(this._ngEl.nativeElement,ue):this._renderer.removeClass(this._ngEl.nativeElement,ue)})}}return R.\u0275fac=function(P){return new(P||R)(L.Y36(L.ZZ4),L.Y36(L.aQg),L.Y36(L.SBq),L.Y36(L.Qsj))},R.\u0275dir=L.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class Ur{constructor(G,P,j,ue){this.$implicit=G,this.ngForOf=P,this.index=j,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let al=(()=>{class R{constructor(P,j,ue){this._viewContainer=P,this._template=j,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const j=this._viewContainer;P.forEachOperation((ue,ke,rt)=>{if(null==ue.previousIndex)j.createEmbeddedView(this._template,new Ur(ue.item,this._ngForOf,-1,-1),null===rt?void 0:rt);else if(null==rt)j.remove(null===ke?void 0:ke);else if(null!==ke){const Vt=j.get(ke);j.move(Vt,rt),ri(Vt,ue)}});for(let ue=0,ke=j.length;ue<ke;ue++){const Vt=j.get(ue).context;Vt.index=ue,Vt.count=ke,Vt.ngForOf=this._ngForOf}P.forEachIdentityChange(ue=>{ri(j.get(ue.currentIndex),ue)})}static ngTemplateContextGuard(P,j){return!0}}return R.\u0275fac=function(P){return new(P||R)(L.Y36(L.s_b),L.Y36(L.Rgc),L.Y36(L.ZZ4))},R.\u0275dir=L.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function ri(R,G){R.context.$implicit=G.item}let ll=(()=>{class R{constructor(P,j){this._viewContainer=P,this._context=new os,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){zr("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){zr("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,j){return!0}}return R.\u0275fac=function(P){return new(P||R)(L.Y36(L.s_b),L.Y36(L.Rgc))},R.\u0275dir=L.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class os{constructor(){this.$implicit=null,this.ngIf=null}}function zr(R,G){if(G&&!G.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,L.AaK)(G)}'.`)}let Xo=(()=>{class R{}return R.\u0275fac=function(P){return new(P||R)},R.\u0275mod=L.oAB({type:R}),R.\u0275inj=L.cJS({}),R})();const Ko="browser";let Zo=(()=>{class R{}return R.\u0275prov=(0,L.Yz7)({token:R,providedIn:"root",factory:()=>new od((0,L.LFG)(Xe),window)}),R})();class od{constructor(G,P){this.document=G,this.window=P,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const P=function ad(R,G){const P=R.getElementById(G)||R.getElementsByName(G)[0];if(P)return P;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const j=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let ue=j.currentNode;for(;ue;){const ke=ue.shadowRoot;if(ke){const rt=ke.getElementById(G)||ke.querySelector(`[name="${G}"]`);if(rt)return rt}ue=j.nextNode()}}return null}(this.document,G);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=G)}}scrollToElement(G){const P=G.getBoundingClientRect(),j=P.left+this.window.pageXOffset,ue=P.top+this.window.pageYOffset,ke=this.offset();this.window.scrollTo(j-ke[0],ue-ke[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Jo(this.window.history)||Jo(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Jo(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Mi{}},529:(Xt,Be,W)=>{W.d(Be,{JF:()=>Ys,TP:()=>bn,Zn:()=>Fe,eN:()=>_t});var L=W(6895),B=W(8256),Re=W(9646),Ae=W(9751),Te=W(4351),Ge=W(9300),Xe=W(4004);class Ne{}class gt{}class it{constructor(oe){this.normalizedNames=new Map,this.lazyUpdate=null,oe?this.lazyInit="string"==typeof oe?()=>{this.headers=new Map,oe.split("\n").forEach(ie=>{const De=ie.indexOf(":");if(De>0){const ht=ie.slice(0,De),ln=ht.toLowerCase(),dn=ie.slice(De+1).trim();this.maybeSetNormalizedName(ht,ln),this.headers.has(ln)?this.headers.get(ln).push(dn):this.headers.set(ln,[dn])}})}:()=>{this.headers=new Map,Object.keys(oe).forEach(ie=>{let De=oe[ie];const ht=ie.toLowerCase();"string"==typeof De&&(De=[De]),De.length>0&&(this.headers.set(ht,De),this.maybeSetNormalizedName(ie,ht))})}:this.headers=new Map}has(oe){return this.init(),this.headers.has(oe.toLowerCase())}get(oe){this.init();const ie=this.headers.get(oe.toLowerCase());return ie&&ie.length>0?ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(oe){return this.init(),this.headers.get(oe.toLowerCase())||null}append(oe,ie){return this.clone({name:oe,value:ie,op:"a"})}set(oe,ie){return this.clone({name:oe,value:ie,op:"s"})}delete(oe,ie){return this.clone({name:oe,value:ie,op:"d"})}maybeSetNormalizedName(oe,ie){this.normalizedNames.has(ie)||this.normalizedNames.set(ie,oe)}init(){this.lazyInit&&(this.lazyInit instanceof it?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(oe=>this.applyUpdate(oe)),this.lazyUpdate=null))}copyFrom(oe){oe.init(),Array.from(oe.headers.keys()).forEach(ie=>{this.headers.set(ie,oe.headers.get(ie)),this.normalizedNames.set(ie,oe.normalizedNames.get(ie))})}clone(oe){const ie=new it;return ie.lazyInit=this.lazyInit&&this.lazyInit instanceof it?this.lazyInit:this,ie.lazyUpdate=(this.lazyUpdate||[]).concat([oe]),ie}applyUpdate(oe){const ie=oe.name.toLowerCase();switch(oe.op){case"a":case"s":let De=oe.value;if("string"==typeof De&&(De=[De]),0===De.length)return;this.maybeSetNormalizedName(oe.name,ie);const ht=("a"===oe.op?this.headers.get(ie):void 0)||[];ht.push(...De),this.headers.set(ie,ht);break;case"d":const ln=oe.value;if(ln){let dn=this.headers.get(ie);if(!dn)return;dn=dn.filter(gn=>-1===ln.indexOf(gn)),0===dn.length?(this.headers.delete(ie),this.normalizedNames.delete(ie)):this.headers.set(ie,dn)}else this.headers.delete(ie),this.normalizedNames.delete(ie)}}forEach(oe){this.init(),Array.from(this.normalizedNames.keys()).forEach(ie=>oe(this.normalizedNames.get(ie),this.headers.get(ie)))}}class vt{encodeKey(oe){return Zt(oe)}encodeValue(oe){return Zt(oe)}decodeKey(oe){return decodeURIComponent(oe)}decodeValue(oe){return decodeURIComponent(oe)}}const at=/%(\d[a-f0-9])/gi,Ze={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zt(Me){return encodeURIComponent(Me).replace(at,(oe,ie)=>Ze[ie]??oe)}function sn(Me){return`${Me}`}class xn{constructor(oe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=oe.encoder||new vt,oe.fromString){if(oe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mt(Me,oe){const ie=new Map;return Me.length>0&&Me.replace(/^\?/,"").split("&").forEach(ht=>{const ln=ht.indexOf("="),[dn,gn]=-1==ln?[oe.decodeKey(ht),""]:[oe.decodeKey(ht.slice(0,ln)),oe.decodeValue(ht.slice(ln+1))],en=ie.get(dn)||[];en.push(gn),ie.set(dn,en)}),ie}(oe.fromString,this.encoder)}else oe.fromObject?(this.map=new Map,Object.keys(oe.fromObject).forEach(ie=>{const De=oe.fromObject[ie],ht=Array.isArray(De)?De.map(sn):[sn(De)];this.map.set(ie,ht)})):this.map=null}has(oe){return this.init(),this.map.has(oe)}get(oe){this.init();const ie=this.map.get(oe);return ie?ie[0]:null}getAll(oe){return this.init(),this.map.get(oe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(oe,ie){return this.clone({param:oe,value:ie,op:"a"})}appendAll(oe){const ie=[];return Object.keys(oe).forEach(De=>{const ht=oe[De];Array.isArray(ht)?ht.forEach(ln=>{ie.push({param:De,value:ln,op:"a"})}):ie.push({param:De,value:ht,op:"a"})}),this.clone(ie)}set(oe,ie){return this.clone({param:oe,value:ie,op:"s"})}delete(oe,ie){return this.clone({param:oe,value:ie,op:"d"})}toString(){return this.init(),this.keys().map(oe=>{const ie=this.encoder.encodeKey(oe);return this.map.get(oe).map(De=>ie+"="+this.encoder.encodeValue(De)).join("&")}).filter(oe=>""!==oe).join("&")}clone(oe){const ie=new xn({encoder:this.encoder});return ie.cloneFrom=this.cloneFrom||this,ie.updates=(this.updates||[]).concat(oe),ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(oe=>this.map.set(oe,this.cloneFrom.map.get(oe))),this.updates.forEach(oe=>{switch(oe.op){case"a":case"s":const ie=("a"===oe.op?this.map.get(oe.param):void 0)||[];ie.push(sn(oe.value)),this.map.set(oe.param,ie);break;case"d":if(void 0===oe.value){this.map.delete(oe.param);break}{let De=this.map.get(oe.param)||[];const ht=De.indexOf(sn(oe.value));-1!==ht&&De.splice(ht,1),De.length>0?this.map.set(oe.param,De):this.map.delete(oe.param)}}}),this.cloneFrom=this.updates=null)}}class Ut{constructor(){this.map=new Map}set(oe,ie){return this.map.set(oe,ie),this}get(oe){return this.map.has(oe)||this.map.set(oe,oe.defaultValue()),this.map.get(oe)}delete(oe){return this.map.delete(oe),this}has(oe){return this.map.has(oe)}keys(){return this.map.keys()}}function Le(Me){return typeof ArrayBuffer<"u"&&Me instanceof ArrayBuffer}function Je(Me){return typeof Blob<"u"&&Me instanceof Blob}function Dn(Me){return typeof FormData<"u"&&Me instanceof FormData}class Qe{constructor(oe,ie,De,ht){let ln;if(this.url=ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=oe.toUpperCase(),function Ot(Me){switch(Me){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ht?(this.body=void 0!==De?De:null,ln=ht):ln=De,ln&&(this.reportProgress=!!ln.reportProgress,this.withCredentials=!!ln.withCredentials,ln.responseType&&(this.responseType=ln.responseType),ln.headers&&(this.headers=ln.headers),ln.context&&(this.context=ln.context),ln.params&&(this.params=ln.params)),this.headers||(this.headers=new it),this.context||(this.context=new Ut),this.params){const dn=this.params.toString();if(0===dn.length)this.urlWithParams=ie;else{const gn=ie.indexOf("?");this.urlWithParams=ie+(-1===gn?"?":gn<ie.length-1?"&":"")+dn}}else this.params=new xn,this.urlWithParams=ie}serializeBody(){return null===this.body?null:Le(this.body)||Je(this.body)||Dn(this.body)||function ct(Me){return typeof URLSearchParams<"u"&&Me instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xn?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dn(this.body)?null:Je(this.body)?this.body.type||null:Le(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xn?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(oe={}){const ie=oe.method||this.method,De=oe.url||this.url,ht=oe.responseType||this.responseType,ln=void 0!==oe.body?oe.body:this.body,dn=void 0!==oe.withCredentials?oe.withCredentials:this.withCredentials,gn=void 0!==oe.reportProgress?oe.reportProgress:this.reportProgress;let en=oe.headers||this.headers,Ni=oe.params||this.params;const Tn=oe.context??this.context;return void 0!==oe.setHeaders&&(en=Object.keys(oe.setHeaders).reduce((Vn,Cn)=>Vn.set(Cn,oe.setHeaders[Cn]),en)),oe.setParams&&(Ni=Object.keys(oe.setParams).reduce((Vn,Cn)=>Vn.set(Cn,oe.setParams[Cn]),Ni)),new Qe(ie,De,ln,{params:Ni,headers:en,context:Tn,reportProgress:gn,responseType:ht,withCredentials:dn})}}var Tt=(()=>((Tt=Tt||{})[Tt.Sent=0]="Sent",Tt[Tt.UploadProgress=1]="UploadProgress",Tt[Tt.ResponseHeader=2]="ResponseHeader",Tt[Tt.DownloadProgress=3]="DownloadProgress",Tt[Tt.Response=4]="Response",Tt[Tt.User=5]="User",Tt))();class me{constructor(oe,ie=200,De="OK"){this.headers=oe.headers||new it,this.status=void 0!==oe.status?oe.status:ie,this.statusText=oe.statusText||De,this.url=oe.url||null,this.ok=this.status>=200&&this.status<300}}class _e extends me{constructor(oe={}){super(oe),this.type=Tt.ResponseHeader}clone(oe={}){return new _e({headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class Fe extends me{constructor(oe={}){super(oe),this.type=Tt.Response,this.body=void 0!==oe.body?oe.body:null}clone(oe={}){return new Fe({body:void 0!==oe.body?oe.body:this.body,headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class xe extends me{constructor(oe){super(oe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${oe.url||"(unknown url)"}`:`Http failure response for ${oe.url||"(unknown url)"}: ${oe.status} ${oe.statusText}`,this.error=oe.error||null}}function Mt(Me,oe){return{body:oe,headers:Me.headers,context:Me.context,observe:Me.observe,params:Me.params,reportProgress:Me.reportProgress,responseType:Me.responseType,withCredentials:Me.withCredentials}}let _t=(()=>{class Me{constructor(ie){this.handler=ie}request(ie,De,ht={}){let ln;if(ie instanceof Qe)ln=ie;else{let en,Ni;en=ht.headers instanceof it?ht.headers:new it(ht.headers),ht.params&&(Ni=ht.params instanceof xn?ht.params:new xn({fromObject:ht.params})),ln=new Qe(ie,De,void 0!==ht.body?ht.body:null,{headers:en,context:ht.context,params:Ni,reportProgress:ht.reportProgress,responseType:ht.responseType||"json",withCredentials:ht.withCredentials})}const dn=(0,Re.of)(ln).pipe((0,Te.b)(en=>this.handler.handle(en)));if(ie instanceof Qe||"events"===ht.observe)return dn;const gn=dn.pipe((0,Ge.h)(en=>en instanceof Fe));switch(ht.observe||"body"){case"body":switch(ln.responseType){case"arraybuffer":return gn.pipe((0,Xe.U)(en=>{if(null!==en.body&&!(en.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return en.body}));case"blob":return gn.pipe((0,Xe.U)(en=>{if(null!==en.body&&!(en.body instanceof Blob))throw new Error("Response is not a Blob.");return en.body}));case"text":return gn.pipe((0,Xe.U)(en=>{if(null!==en.body&&"string"!=typeof en.body)throw new Error("Response is not a string.");return en.body}));default:return gn.pipe((0,Xe.U)(en=>en.body))}case"response":return gn;default:throw new Error(`Unreachable: unhandled observe type ${ht.observe}}`)}}delete(ie,De={}){return this.request("DELETE",ie,De)}get(ie,De={}){return this.request("GET",ie,De)}head(ie,De={}){return this.request("HEAD",ie,De)}jsonp(ie,De){return this.request("JSONP",ie,{params:(new xn).append(De,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ie,De={}){return this.request("OPTIONS",ie,De)}patch(ie,De,ht={}){return this.request("PATCH",ie,Mt(ht,De))}post(ie,De,ht={}){return this.request("POST",ie,Mt(ht,De))}put(ie,De,ht={}){return this.request("PUT",ie,Mt(ht,De))}}return Me.\u0275fac=function(ie){return new(ie||Me)(B.LFG(Ne))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})();class Jt{constructor(oe,ie){this.next=oe,this.interceptor=ie}handle(oe){return this.interceptor.intercept(oe,this.next)}}const bn=new B.OlP("HTTP_INTERCEPTORS");let Ei=(()=>{class Me{intercept(ie,De){return De.handle(ie)}}return Me.\u0275fac=function(ie){return new(ie||Me)},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const Nt=/^\)\]\}',?\n/;let ii=(()=>{class Me{constructor(ie){this.xhrFactory=ie}handle(ie){if("JSONP"===ie.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ae.y(De=>{const ht=this.xhrFactory.build();if(ht.open(ie.method,ie.urlWithParams),ie.withCredentials&&(ht.withCredentials=!0),ie.headers.forEach((Qn,Bn)=>ht.setRequestHeader(Qn,Bn.join(","))),ie.headers.has("Accept")||ht.setRequestHeader("Accept","application/json, text/plain, */*"),!ie.headers.has("Content-Type")){const Qn=ie.detectContentTypeHeader();null!==Qn&&ht.setRequestHeader("Content-Type",Qn)}if(ie.responseType){const Qn=ie.responseType.toLowerCase();ht.responseType="json"!==Qn?Qn:"text"}const ln=ie.serializeBody();let dn=null;const gn=()=>{if(null!==dn)return dn;const Qn=ht.statusText||"OK",Bn=new it(ht.getAllResponseHeaders()),Rt=function Wt(Me){return"responseURL"in Me&&Me.responseURL?Me.responseURL:/^X-Request-URL:/m.test(Me.getAllResponseHeaders())?Me.getResponseHeader("X-Request-URL"):null}(ht)||ie.url;return dn=new _e({headers:Bn,status:ht.status,statusText:Qn,url:Rt}),dn},en=()=>{let{headers:Qn,status:Bn,statusText:Rt,url:Ri}=gn(),Fi=null;204!==Bn&&(Fi=typeof ht.response>"u"?ht.responseText:ht.response),0===Bn&&(Bn=Fi?200:0);let ar=Bn>=200&&Bn<300;if("json"===ie.responseType&&"string"==typeof Fi){const fo=Fi;Fi=Fi.replace(Nt,"");try{Fi=""!==Fi?JSON.parse(Fi):null}catch(Qi){Fi=fo,ar&&(ar=!1,Fi={error:Qi,text:Fi})}}ar?(De.next(new Fe({body:Fi,headers:Qn,status:Bn,statusText:Rt,url:Ri||void 0})),De.complete()):De.error(new xe({error:Fi,headers:Qn,status:Bn,statusText:Rt,url:Ri||void 0}))},Ni=Qn=>{const{url:Bn}=gn(),Rt=new xe({error:Qn,status:ht.status||0,statusText:ht.statusText||"Unknown Error",url:Bn||void 0});De.error(Rt)};let Tn=!1;const Vn=Qn=>{Tn||(De.next(gn()),Tn=!0);let Bn={type:Tt.DownloadProgress,loaded:Qn.loaded};Qn.lengthComputable&&(Bn.total=Qn.total),"text"===ie.responseType&&!!ht.responseText&&(Bn.partialText=ht.responseText),De.next(Bn)},Cn=Qn=>{let Bn={type:Tt.UploadProgress,loaded:Qn.loaded};Qn.lengthComputable&&(Bn.total=Qn.total),De.next(Bn)};return ht.addEventListener("load",en),ht.addEventListener("error",Ni),ht.addEventListener("timeout",Ni),ht.addEventListener("abort",Ni),ie.reportProgress&&(ht.addEventListener("progress",Vn),null!==ln&&ht.upload&&ht.upload.addEventListener("progress",Cn)),ht.send(ln),De.next({type:Tt.Sent}),()=>{ht.removeEventListener("error",Ni),ht.removeEventListener("abort",Ni),ht.removeEventListener("load",en),ht.removeEventListener("timeout",Ni),ie.reportProgress&&(ht.removeEventListener("progress",Vn),null!==ln&&ht.upload&&ht.upload.removeEventListener("progress",Cn)),ht.readyState!==ht.DONE&&ht.abort()}})}}return Me.\u0275fac=function(ie){return new(ie||Me)(B.LFG(L.JF))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const Jn=new B.OlP("XSRF_COOKIE_NAME"),Dr=new B.OlP("XSRF_HEADER_NAME");class ns{}let mn=(()=>{class Me{constructor(ie,De,ht){this.doc=ie,this.platform=De,this.cookieName=ht,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ie=this.doc.cookie||"";return ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,L.Mx)(ie,this.cookieName),this.lastCookieString=ie),this.lastToken}}return Me.\u0275fac=function(ie){return new(ie||Me)(B.LFG(L.K0),B.LFG(B.Lbi),B.LFG(Jn))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})(),js=(()=>{class Me{constructor(ie,De){this.tokenService=ie,this.headerName=De}intercept(ie,De){const ht=ie.url.toLowerCase();if("GET"===ie.method||"HEAD"===ie.method||ht.startsWith("http://")||ht.startsWith("https://"))return De.handle(ie);const ln=this.tokenService.getToken();return null!==ln&&!ie.headers.has(this.headerName)&&(ie=ie.clone({headers:ie.headers.set(this.headerName,ln)})),De.handle(ie)}}return Me.\u0275fac=function(ie){return new(ie||Me)(B.LFG(ns),B.LFG(Dr))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})(),Di=(()=>{class Me{constructor(ie,De){this.backend=ie,this.injector=De,this.chain=null}handle(ie){if(null===this.chain){const De=this.injector.get(bn,[]);this.chain=De.reduceRight((ht,ln)=>new Jt(ht,ln),this.backend)}return this.chain.handle(ie)}}return Me.\u0275fac=function(ie){return new(ie||Me)(B.LFG(gt),B.LFG(B.zs3))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac}),Me})(),Yi=(()=>{class Me{static disable(){return{ngModule:Me,providers:[{provide:js,useClass:Ei}]}}static withOptions(ie={}){return{ngModule:Me,providers:[ie.cookieName?{provide:Jn,useValue:ie.cookieName}:[],ie.headerName?{provide:Dr,useValue:ie.headerName}:[]]}}}return Me.\u0275fac=function(ie){return new(ie||Me)},Me.\u0275mod=B.oAB({type:Me}),Me.\u0275inj=B.cJS({providers:[js,{provide:bn,useExisting:js,multi:!0},{provide:ns,useClass:mn},{provide:Jn,useValue:"XSRF-TOKEN"},{provide:Dr,useValue:"X-XSRF-TOKEN"}]}),Me})(),Ys=(()=>{class Me{}return Me.\u0275fac=function(ie){return new(ie||Me)},Me.\u0275mod=B.oAB({type:Me}),Me.\u0275inj=B.cJS({providers:[_t,{provide:Ne,useClass:Di},ii,{provide:gt,useExisting:ii}],imports:[Yi.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Me})()},8256:(Xt,Be,W)=>{W.d(Be,{QbO:()=>wy,tb:()=>Da,AFp:()=>Uo,ip1:()=>ax,CZH:()=>Fp,hGG:()=>yD,z2F:()=>Cy,sBO:()=>Nh,Sil:()=>UM,_Vd:()=>Pd,EJc:()=>kM,Xts:()=>Ki,SBq:()=>Wl,lqb:()=>Z,qLn:()=>cu,vpe:()=>Fo,XFs:()=>Me,OlP:()=>gi,zs3:()=>Zl,ZZ4:()=>vx,aQg:()=>Sc,soG:()=>zo,YKP:()=>ry,h0i:()=>mc,PXZ:()=>QE,R0b:()=>Ws,FiY:()=>qc,Lbi:()=>by,g9A:()=>xy,Qsj:()=>Of,FYo:()=>Lf,JOm:()=>Sr,tp0:()=>Xc,Rgc:()=>Ah,dDg:()=>KE,eoX:()=>KM,GfV:()=>Ld,s_b:()=>Ep,ifc:()=>Tn,MMx:()=>gc,Lck:()=>E_,eFA:()=>Ty,G48:()=>rD,Gpc:()=>Hn,f3M:()=>sm,_c5:()=>gD,c2e:()=>FM,zSh:()=>n0,wAp:()=>fn,vHH:()=>Je,lri:()=>cx,rWj:()=>XM,D6c:()=>vD,cg1:()=>Nu,kL8:()=>ph,dqk:()=>Vn,sIi:()=>qd,CqO:()=>kv,QGY:()=>Mg,QP$:()=>il,F4k:()=>Fv,RDi:()=>kl,AaK:()=>Zt,qOj:()=>mg,TTD:()=>Xo,_Bn:()=>S_,jDz:()=>A_,xp6:()=>C0,uIk:()=>Zd,ekj:()=>sh,Suo:()=>mM,Xpm:()=>qs,lG2:()=>is,Yz7:()=>Jn,cJS:()=>ns,oAB:()=>Wo,Yjl:()=>Yr,Y36:()=>vu,_UZ:()=>tp,qZA:()=>ep,TgZ:()=>Jd,EpF:()=>Nv,n5z:()=>Gc,LFG:()=>Xi,$8M:()=>uf,$Z:()=>H0,NdJ:()=>Lo,CRH:()=>my,oxw:()=>Vv,Q6J:()=>_g,WLB:()=>Qw,kEZ:()=>cy,iGM:()=>Rh,KtG:()=>cd,Jf7:()=>u0,CHM:()=>ld,LSH:()=>Vr,YNc:()=>Pv,_uU:()=>Fg,Oqu:()=>ch,Gf:()=>Ap});var L=W(8189),B=W(8421),Re=W(515),Ae=W(3269),Te=W(2076),Xe=W(7579),Ne=W(727),gt=W(9751),it=W(930),Y=W(4482);function mt(i,r,...o){if(!0===r)return void i();if(!1===r)return;const u=new it.Hp({next:()=>{u.unsubscribe(),i()}});return r(...o).subscribe(u)}function at(i){for(let r in i)if(i[r]===at)return r;throw Error("Could not find renamed property on target object.")}function Ze(i,r){for(const o in r)r.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=r[o])}function Zt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Zt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const r=i.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function sn(i,r){return null==i||""===i?null===r?"":r:null==r||""===r?i:i+" "+r}const xn=at({__forward_ref__:at});function Hn(i){return i.__forward_ref__=Hn,i.toString=function(){return Zt(this())},i}function Ut(i){return Ot(i)?i():i}function Ot(i){return"function"==typeof i&&i.hasOwnProperty(xn)&&i.__forward_ref__===Hn}class Je extends Error{constructor(r,o){super(function Dn(i,r){return`NG0${Math.abs(i)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function ct(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,r){throw new Je(-201,!1)}function St(i,r){null==i&&function We(i,r,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,i,null,"!=")}function Jn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ns(i){return{providers:i.providers||[],imports:i.imports||[]}}function mn(i){return js(i,Yi)||js(i,Go)}function js(i,r){return i.hasOwnProperty(r)?i[r]:null}function ho(i){return i&&(i.hasOwnProperty(Ys)||i.hasOwnProperty(ws))?i[Ys]:null}const Yi=at({\u0275prov:at}),Ys=at({\u0275inj:at}),Go=at({ngInjectableDef:at}),ws=at({ngInjectorDef:at});var Me=(()=>((Me=Me||{})[Me.Default=0]="Default",Me[Me.Host=1]="Host",Me[Me.Self=2]="Self",Me[Me.SkipSelf=4]="SkipSelf",Me[Me.Optional=8]="Optional",Me))();let oe;function De(i){const r=oe;return oe=i,r}function ht(i,r,o){const u=mn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Me.Optional?null:void 0!==r?r:void Fe(Zt(i))}function dn(i){return{toString:i}.toString()}var gn=(()=>((gn=gn||{})[gn.OnPush=0]="OnPush",gn[gn.Default=1]="Default",gn))(),Tn=(()=>{return(i=Tn||(Tn={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Tn;var i})();const Vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Bn={},Rt=[],Ri=at({\u0275cmp:at}),Fi=at({\u0275dir:at}),ar=at({\u0275pipe:at}),fo=at({\u0275mod:at}),Qi=at({\u0275fac:at}),Tr=at({__NG_ELEMENT_ID__:at});let ol=0;function qs(i){return dn(()=>{const o=!0===i.standalone,u={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Rt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Tn.Emulated,id:"c"+ol++,styles:i.styles||Rt,_:null,setInput:null,schemas:i.schemas||null,tView:null},m=i.dependencies,v=i.features;return h.inputs=Ms(i.inputs,u),h.outputs=Ms(i.outputs),v&&v.forEach(S=>S(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(po).filter(mo):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(ne).filter(mo):null,h})}function po(i){return fe(i)||le(i)}function mo(i){return null!==i}function Wo(i){return dn(()=>({type:i.type,bootstrap:i.bootstrap||Rt,declarations:i.declarations||Rt,imports:i.imports||Rt,exports:i.exports||Rt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ms(i,r){if(null==i)return Bn;const o={};for(const u in i)if(i.hasOwnProperty(u)){let h=i[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),o[h]=u,r&&(r[h]=m)}return o}const is=qs;function Yr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function fe(i){return i[Ri]||null}function le(i){return i[Fi]||null}function ne(i){return i[ar]||null}function ye(i,r){const o=i[fo]||null;if(!o&&!0===r)throw new Error(`Type ${Zt(i)} does not have '\u0275mod' property.`);return o}function ui(i){return Array.isArray(i)&&"object"==typeof i[1]}function wr(i){return Array.isArray(i)&&!0===i[1]}function as(i){return 0!=(8&i.flags)}function Js(i){return 2==(2&i.flags)}function Qs(i){return 1==(1&i.flags)}function _i(i){return null!==i.template}function Tc(i){return 0!=(256&i[2])}function Ir(i,r){return i.hasOwnProperty(Qi)?i[Qi]:null}class Ia{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Xo(){return Ko}function Ko(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ac),pl}function pl(){const i=Pa(this),r=i?.current;if(r){const o=i.previous;if(o===Bn)i.previous=r;else for(let u in r)o[u]=r[u];i.current=null,this.ngOnChanges(r)}}function Ac(i,r,o,u){const h=Pa(i)||function Wh(i,r){return i[Ra]=r}(i,{previous:Bn,current:null}),m=h.current||(h.current={}),v=h.previous,S=this.declaredInputs[o],C=v[S];m[S]=new Ia(C&&C.currentValue,r,v===Bn),i[u]=r}Xo.ngInherit=!0;const Ra="__ngSimpleChanges__";function Pa(i){return i[Ra]||null}function Mi(i){for(;Array.isArray(i);)i=i[0];return i}function P(i,r){return Mi(r[i])}function j(i,r){return Mi(r[i.index])}function ke(i,r){return i.data[r]}function Vt(i,r){const o=r[i];return ui(o)?o:o[0]}function xi(i){return 4==(4&i[2])}function ti(i){return 64==(64&i[2])}function Rn(i,r){return null==r?null:i[r]}function Hi(i){i[18]=0}function si(i,r){i[5]+=r;let o=i,u=i[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const Et={lFrame:vl(null),bindingsEnabled:!0};function cs(){return Et.bindingsEnabled}function et(){return Et.lFrame.lView}function Un(){return Et.lFrame.tView}function ld(i){return Et.lFrame.contextLView=i,i[8]}function cd(i){return Et.lFrame.contextLView=null,i}function Ti(){let i=cr();for(;null!==i&&64===i.type;)i=i.parent;return i}function cr(){return Et.lFrame.currentTNode}function Rs(i,r){const o=Et.lFrame;o.currentTNode=i,o.isParent=r}function ud(){return Et.lFrame.isParent}function ur(){const i=Et.lFrame;let r=i.bindingRootIndex;return-1===r&&(r=i.bindingRootIndex=i.tView.bindingStartIndex),r}function ea(){return Et.lFrame.bindingIndex++}function Wp(i,r){const o=Et.lFrame;o.bindingIndex=o.bindingRootIndex=i,Oc(r)}function Oc(i){Et.lFrame.currentDirectiveIndex=i}function dd(){return Et.lFrame.currentQueryIndex}function Nc(i){Et.lFrame.currentQueryIndex=i}function qh(i){const r=i[1];return 2===r.type?r.declTNode:1===r.type?i[6]:null}function Fc(i,r,o){if(o&Me.SkipSelf){let h=r,m=i;for(;!(h=h.parent,null!==h||o&Me.Host||(h=qh(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;r=h,i=m}const u=Et.lFrame=Bc();return u.currentTNode=r,u.lView=i,!0}function kc(i){const r=Bc(),o=i[1];Et.lFrame=r,r.currentTNode=o.firstChild,r.lView=i,r.tView=o,r.contextLView=i,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Bc(){const i=Et.lFrame,r=null===i?null:i.child;return null===r?vl(i):r}function vl(i){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=r),r}function Xh(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Kh=Xh;function Uc(){const i=Xh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function _r(){return Et.lFrame.selectedIndex}function xo(i){Et.lFrame.selectedIndex=i}function Ci(){const i=Et.lFrame;return ke(i.tView,i.selectedIndex)}function na(i,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const m=i.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:S,ngAfterViewInit:C,ngAfterViewChecked:O,ngOnDestroy:H}=m;v&&(i.contentHooks||(i.contentHooks=[])).push(-o,v),S&&((i.contentHooks||(i.contentHooks=[])).push(o,S),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,S)),C&&(i.viewHooks||(i.viewHooks=[])).push(-o,C),O&&((i.viewHooks||(i.viewHooks=[])).push(o,O),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,O)),null!=H&&(i.destroyHooks||(i.destroyHooks=[])).push(o,H)}}function ia(i,r,o){bo(i,r,3,o)}function ra(i,r,o,u){(3&i[2])===o&&bo(i,r,o,u)}function Fa(i,r){let o=i[2];(3&o)===r&&(o&=2047,o+=1,i[2]=o)}function bo(i,r,o,u){const m=u??-1,v=r.length-1;let S=0;for(let C=void 0!==u?65535&i[18]:0;C<v;C++)if("number"==typeof r[C+1]){if(S=r[C],null!=u&&S>=u)break}else r[C]<0&&(i[18]+=65536),(S<m||-1==m)&&($p(i,o,r,C),i[18]=(4294901760&i[18])+C+2),C++}function $p(i,r,o,u){const h=o[u]<0,m=o[u+1],S=i[h?-o[u]:o[u]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===r){i[2]+=2048;try{m.call(S)}finally{}}}else try{m.call(S)}finally{}}class Ml{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function El(i,r,o){let u=0;for(;u<o.length;){const h=o[u];if("number"==typeof h){if(0!==h)break;u++;const m=o[u++],v=o[u++],S=o[u++];i.setAttribute(r,v,S,m)}else{const m=h,v=o[++u];Xp(m)?i.setProperty(r,m,v):i.setAttribute(r,m,v),u++}}return u}function Qh(i){return 3===i||4===i||6===i}function Xp(i){return 64===i.charCodeAt(0)}function oa(i,r){if(null!==r&&0!==r.length)if(null===i||0===i.length)i=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const h=r[u];"number"==typeof h?o=h:0===o||ef(i,o,h,null,-1===o||2===o?r[++u]:null)}}return i}function ef(i,r,o,u,h){let m=0,v=i.length;if(-1===r)v=-1;else for(;m<i.length;){const S=i[m++];if("number"==typeof S){if(S===r){v=-1;break}if(S>r){v=m-1;break}}}for(;m<i.length;){const S=i[m];if("number"==typeof S)break;if(S===o){if(null===u)return void(null!==h&&(i[m+1]=h));if(u===i[m+1])return void(i[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==v&&(i.splice(v,0,r),m=v+1),i.splice(m++,0,o),null!==u&&i.splice(m++,0,u),null!==h&&i.splice(m++,0,h)}function Ua(i){return-1!==i}function us(i){return 32767&i}function qr(i,r){let o=function ds(i){return i>>16}(i),u=r;for(;o>0;)u=u[15],o--;return u}let zc=!0;function Dl(i){const r=zc;return zc=i,r}let nf=0;const hs={};function Ps(i,r){const o=Hc(i,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(i.injectorIndex=r.length,Tl(u.data,i),Tl(r,null),Tl(u.blueprint,null));const h=aa(i,r),m=i.injectorIndex;if(Ua(h)){const v=us(h),S=qr(h,r),C=S[1].data;for(let O=0;O<8;O++)r[m+O]=S[v+O]|C[v+O]}return r[m+8]=h,m}function Tl(i,r){i.push(0,0,0,0,0,0,0,0,r)}function Hc(i,r){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===r[i.injectorIndex+8]?-1:i.injectorIndex}function aa(i,r){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,h=r;for(;null!==h;){if(u=gd(h),null===u)return-1;if(o++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function la(i,r,o){!function Kp(i,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Tr)&&(u=o[Tr]),null==u&&(u=o[Tr]=nf++);const h=255&u;r.data[i+(h>>5)]|=1<<h}(i,r,o)}function rf(i,r,o){if(o&Me.Optional)return i;Fe()}function Cl(i,r,o,u){if(o&Me.Optional&&void 0===u&&(u=null),0==(o&(Me.Self|Me.Host))){const h=i[9],m=De(void 0);try{return h?h.get(r,u,o&Me.Optional):ht(r,u,o&Me.Optional)}finally{De(m)}}return rf(u,0,o)}function sf(i,r,o,u=Me.Default,h){if(null!==i){if(1024&r[2]){const v=function Jp(i,r,o,u,h){let m=i,v=r;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const S=pd(m,v,o,u|Me.Self,hs);if(S!==hs)return S;let C=m.parent;if(!C){const O=v[21];if(O){const H=O.get(o,hs,u);if(H!==hs)return H}C=gd(v),v=v[15]}m=C}return h}(i,r,o,u,hs);if(v!==hs)return v}const m=pd(i,r,o,u,hs);if(m!==hs)return m}return Cl(r,o,u,h)}function pd(i,r,o,u,h){const m=function lf(i){if("string"==typeof i)return i.charCodeAt(0)||0;const r=i.hasOwnProperty(Tr)?i[Tr]:void 0;return"number"==typeof r?r>=0?255&r:md:r}(o);if("function"==typeof m){if(!Fc(r,i,u))return u&Me.Host?rf(h,0,u):Cl(r,o,u,h);try{const v=m(u);if(null!=v||u&Me.Optional)return v;Fe()}finally{Kh()}}else if("number"==typeof m){let v=null,S=Hc(i,r),C=-1,O=u&Me.Host?r[16][6]:null;for((-1===S||u&Me.SkipSelf)&&(C=-1===S?aa(i,r):r[S+8],-1!==C&&cf(u,!1)?(v=r[1],S=us(C),r=qr(C,r)):S=-1);-1!==S;){const H=r[1];if(dr(m,S,H.data)){const X=af(S,r,o,v,u,O);if(X!==hs)return X}C=r[S+8],-1!==C&&cf(u,r[1].data[S+8]===O)&&dr(m,S,r)?(v=H,S=us(C),r=qr(C,r)):S=-1}}return h}function af(i,r,o,u,h,m){const v=r[1],S=v.data[i+8],H=Vc(S,v,o,null==u?Js(S)&&zc:u!=v&&0!=(3&S.type),h&Me.Host&&m===S);return null!==H?Al(r,v,H,S):hs}function Vc(i,r,o,u,h){const m=i.providerIndexes,v=r.data,S=1048575&m,C=i.directiveStart,H=m>>20,ce=h?S+H:i.directiveEnd;for(let ve=u?S:S+H;ve<ce;ve++){const je=v[ve];if(ve<C&&o===je||ve>=C&&je.type===o)return ve}if(h){const ve=v[C];if(ve&&_i(ve)&&ve.type===o)return C}return null}function Al(i,r,o,u){let h=i[o];const m=r.data;if(function Yp(i){return i instanceof Ml}(h)){const v=h;v.resolving&&function Tt(i,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${i}`:"";throw new Je(-200,`Circular dependency in DI detected for ${i}${o}`)}(function Qe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ct(i)}(m[o]));const S=Dl(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?De(v.injectImpl):null;Fc(i,u,Me.Default);try{h=i[o]=v.factory(void 0,m,i,u),r.firstCreatePass&&o>=u.directiveStart&&function wl(i,r,o){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=r.type.prototype;if(u){const v=Ko(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,v)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,h),m&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m))}(o,m[o],r)}finally{null!==C&&De(C),Dl(S),v.resolving=!1,Kh()}}return h}function dr(i,r,o){return!!(o[r+(i>>5)]&1<<i)}function cf(i,r){return!(i&Me.Self||i&Me.Host&&r)}class ca{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return sf(this._tNode,this._lView,r,u,o)}}function md(){return new ca(Ti(),et())}function Gc(i){return dn(()=>{const r=i.prototype.constructor,o=r[Qi]||Il(r),u=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==u;){const m=h[Qi]||Il(h);if(m&&m!==o)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Il(i){return Ot(i)?()=>{const r=Il(Ut(i));return r&&r()}:Ir(i)}function gd(i){const r=i[1],o=r.type;return 2===o?r.declTNode:1===o?i[6]:null}function uf(i){return function Zp(i,r){if("class"===r)return i.classes;if("style"===r)return i.styles;const o=i.attrs;if(o){const u=o.length;let h=0;for(;h<u;){const m=o[h];if(Qh(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof o[h];)h++;else{if(m===r)return o[h+1];h+=2}}}return null}(Ti(),i)}const Ls="__parameters__";function Pl(i,r,o){return dn(()=>{const u=function nr(i){return function(...o){if(i){const u=i(...o);for(const h in u)this[h]=u[h]}}}(r);function h(...m){if(this instanceof h)return u.apply(this,m),this;const v=new h(...m);return S.annotation=v,S;function S(C,O,H){const X=C.hasOwnProperty(Ls)?C[Ls]:Object.defineProperty(C,Ls,{value:[]})[Ls];for(;X.length<=H;)X.push(null);return(X[H]=X[H]||[]).push(v),C}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class gi{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Jn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function qn(i,r){void 0===r&&(r=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(r===i&&(r=i.slice(0,o)),qn(u,r)):r!==i&&r.push(u)}return r}function fs(i,r){i.forEach(o=>Array.isArray(o)?fs(o,r):r(o))}function em(i,r,o){r>=i.length?i.push(o):i.splice(r,0,o)}function Os(i,r){return r>=i.length-1?i.pop():i.splice(r,1)[0]}function re(i,r,o){let u=bt(i,r);return u>=0?i[1|u]=o:(u=~u,function A(i,r,o,u){let h=i.length;if(h==r)i.push(o,u);else if(1===h)i.push(u,i[0]),i[0]=o;else{for(h--,i.push(i[h-1],i[h]);h>r;)i[h]=i[h-2],h--;i[r]=o,i[r+1]=u}}(i,u,r,o)),u}function Ce(i,r){const o=bt(i,r);if(o>=0)return i[1|o]}function bt(i,r){return function zt(i,r,o){let u=0,h=i.length>>o;for(;h!==u;){const m=u+(h-u>>1),v=i[m<<o];if(r===v)return m<<o;v>r?h=m:u=m+1}return~(h<<o)}(i,r,1)}const xd={},tm="__NG_DI_FLAG__",mf="ngTempTokenPath",im=/\n/gm,gf="__source";let $c;function Nl(i){const r=$c;return $c=i,r}function Vy(i,r=Me.Default){if(void 0===$c)throw new Je(-203,!1);return null===$c?ht(i,void 0,r):$c.get(i,r&Me.Optional?null:void 0,r)}function Xi(i,r=Me.Default){return(function ie(){return oe}()||Vy)(Ut(i),r)}function sm(i,r=Me.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Xi(i,r)}function yf(i){const r=[];for(let o=0;o<i.length;o++){const u=Ut(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Je(900,!1);let h,m=Me.Default;for(let v=0;v<u.length;v++){const S=u[v],C=Wy(S);"number"==typeof C?-1===C?h=S.token:m|=C:h=S}r.push(Xi(h,m))}else r.push(Xi(u))}return r}function Yc(i,r){return i[tm]=r,i.prototype[tm]=r,i}function Wy(i){return i[tm]}const qc=Yc(Pl("Optional"),8),Xc=Yc(Pl("SkipSelf"),4);let hm;function kl(i){hm=i}class Ex{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bl(i){return i instanceof Ex?i.changingThisBreaksApplicationSecurity:i}const Jy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ul=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function Vr(i){const r=function tu(){const i=et();return i&&i[12]}();return r?r.sanitize(ir.URL,i)||"":function Ed(i,r){const o=function bf(i){return i instanceof Ex&&i.getTypeName()||null}(i);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(i,"URL")?Bl(i):function hr(i){return(i=String(i)).match(Jy)||i.match(Ul)?i:"unsafe:"+i}(ct(i))}const Ki=new gi("ENVIRONMENT_INITIALIZER"),Fs=new gi("INJECTOR",-1),Cd=new gi("INJECTOR_DEF_TYPES");class Tf{get(r,o=xd){if(o===xd){const u=new Error(`NullInjectorError: No provider for ${Zt(r)}!`);throw u.name="NullInjectorError",u}return o}}function Cf(...i){return{\u0275providers:kt(0,i)}}function kt(i,...r){const o=[],u=new Set;let h;return fs(r,m=>{const v=m;Af(v,o,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&Hl(h,o),o}function Hl(i,r){for(let o=0;o<i.length;o++){const{providers:h}=i[o];fs(h,m=>{r.push(m)})}}function Af(i,r,o,u){if(!(i=Ut(i)))return!1;let h=null,m=ho(i);const v=!m&&fe(i);if(m||v){if(v&&!v.standalone)return!1;h=i}else{const C=i.ngModule;if(m=ho(C),!m)return!1;h=C}const S=u.has(h);if(v){if(S)return!1;if(u.add(h),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const O of C)Af(O,r,o,u)}}else{if(!m)return!1;{if(null!=m.imports&&!S){let O;u.add(h);try{fs(m.imports,H=>{Af(H,r,o,u)&&(O||(O=[]),O.push(H))})}finally{}void 0!==O&&Hl(O,r)}if(!S){const O=Ir(h)||(()=>new h);r.push({provide:h,useFactory:O,deps:Rt},{provide:Cd,useValue:h,multi:!0},{provide:Ki,useValue:()=>Xi(h),multi:!0})}const C=m.providers;null==C||S||fs(C,H=>{r.push(H)})}}return h!==i&&void 0!==i.providers}const wm=at({provide:String,useValue:at});function Mm(i){return null!==i&&"object"==typeof i&&wm in i}function ms(i){return"function"==typeof i}const n0=new gi("Set Injector scope."),Id={},FS={};let r0;function fr(){return void 0===r0&&(r0=new Tf),r0}class Z{}class If extends Z{constructor(r,o,u,h){super(),this.parent=o,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,To(r,v=>this.processProvider(v)),this.records.set(Fs,Wa(void 0,this)),h.has("environment")&&this.records.set(Z,Wa(void 0,this));const m=this.records.get(n0);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Cd.multi,Rt,Me.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Nl(this),u=De(void 0);try{return r()}finally{Nl(o),De(u)}}get(r,o=xd,u=Me.Default){this.assertNotDestroyed();const h=Nl(this),m=De(void 0);try{if(!(u&Me.SkipSelf)){let S=this.records.get(r);if(void 0===S){const C=function ru(i){return"function"==typeof i||"object"==typeof i&&i instanceof gi}(r)&&mn(r);S=C&&this.injectableDefInScope(C)?Wa(Rf(r),Id):null,this.records.set(r,S)}if(null!=S)return this.hydrate(r,S)}return(u&Me.Self?fr():this.parent).get(r,o=u&Me.Optional&&o===xd?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[mf]=v[mf]||[]).unshift(Zt(r)),h)throw v;return function jy(i,r,o,u){const h=i[mf];throw r[gf]&&h.unshift(r[gf]),i.message=function $y(i,r,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=Zt(r);if(Array.isArray(r))h=r.map(Zt).join(" -> ");else if("object"==typeof r){let m=[];for(let v in r)if(r.hasOwnProperty(v)){let S=r[v];m.push(v+":"+("string"==typeof S?JSON.stringify(S):Zt(S)))}h=`{${m.join(", ")}}`}return`${o}${u?"("+u+")":""}[${h}]: ${i.replace(im,"\n  ")}`}("\n"+i.message,h,o,u),i.ngTokenPath=h,i[mf]=null,i}(v,r,"R3InjectorError",this.source)}throw v}finally{De(m),Nl(h)}}resolveInjectorInitializers(){const r=Nl(this),o=De(void 0);try{const u=this.get(Ki.multi,Rt,Me.Self);for(const h of u)h()}finally{Nl(r),De(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(Zt(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processProvider(r){let o=ms(r=Ut(r))?r:Ut(r&&r.provide);const u=function fa(i){return Mm(i)?Wa(void 0,i.useValue):Wa(Ga(i),Id)}(r);if(ms(r)||!0!==r.multi)this.records.get(o);else{let h=this.records.get(o);h||(h=Wa(void 0,Id,!0),h.factory=()=>yf(h.multi),this.records.set(o,h)),o=r,h.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===Id&&(o.value=FS,o.value=o.factory()),"object"==typeof o.value&&o.value&&function iu(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ut(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Rf(i){const r=mn(i),o=null!==r?r.factory:Ir(i);if(null!==o)return o;if(i instanceof gi)throw new Je(204,!1);if(i instanceof Function)return function Vl(i){const r=i.length;if(r>0)throw function b(i,r){const o=[];for(let u=0;u<i;u++)o.push(r);return o}(r,"?"),new Je(204,!1);const o=function Di(i){const r=i&&(i[Yi]||i[Go]);if(r){const o=function $s(i){if(i.hasOwnProperty("name"))return i.name;const r=(""+i).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Je(204,!1)}function Ga(i,r,o){let u;if(ms(i)){const h=Ut(i);return Ir(h)||Rf(h)}if(Mm(i))u=()=>Ut(i.useValue);else if(function hi(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...yf(i.deps||[]));else if(function ks(i){return!(!i||!i.useExisting)}(i))u=()=>Xi(Ut(i.useExisting));else{const h=Ut(i&&(i.useClass||i.provide));if(!function nu(i){return!!i.deps}(i))return Ir(h)||Rf(h);u=()=>new h(...yf(i.deps))}return u}function Wa(i,r,o=!1){return{factory:i,value:r,multi:o?[]:void 0}}function ja(i){return!!i.\u0275providers}function To(i,r){for(const o of i)Array.isArray(o)?To(o,r):ja(o)?To(o.\u0275providers,r):r(o)}class su{}class Em{resolveComponentFactory(r){throw function Pf(i){const r=Error(`No component factory found for ${Zt(i)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=i,r}(r)}}let Pd=(()=>{class i{}return i.NULL=new Em,i})();function s0(){return pa(Ti(),et())}function pa(i,r){return new Wl(j(i,r))}let Wl=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=s0,i})();function jl(i){return i instanceof Wl?i.nativeElement:i}class Lf{}let Of=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Ya(){const i=et(),o=Vt(Ti().index,i);return(ui(o)?o:i)[11]}(),i})(),Dm=(()=>{class i{}return i.\u0275prov=Jn({token:i,providedIn:"root",factory:()=>null}),i})();class Ld{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Tm=new Ld("14.1.3"),au={};function Im(i){return i.ngOriginalError}class cu{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&Im(r);for(;o&&Im(o);)o=Im(o);return o||null}}const io=new Map;let uu=0;const Jr="__ngContext__";function Kn(i,r){ui(r)?(i[Jr]=r[20],function c0(i){io.set(i[20],i)}(r)):i[Jr]=r}function qa(i){const r=i[Jr];return"number"==typeof r?function Ff(i){return io.get(i)||null}(r):r||null}function Gi(i){const r=qa(i);return r?ui(r)?r:r.lView:null}const jS=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Vn))();function u0(i){return i.ownerDocument.defaultView}function Zi(i){return i instanceof Function?i():i}var Sr=(()=>((Sr=Sr||{})[Sr.Important=1]="Important",Sr[Sr.DashCase=2]="DashCase",Sr))();function Ro(i,r){return undefined(i,r)}function Xa(i){const r=i[3];return wr(r)?r[3]:r}function hu(i){return kd(i[13])}function fu(i){return kd(i[4])}function kd(i){for(;null!==i&&!wr(i);)i=i[4];return i}function ga(i,r,o,u,h){if(null!=u){let m,v=!1;wr(u)?m=u:ui(u)&&(v=!0,u=u[0]);const S=Mi(u);0===i&&null!==o?null==h?m0(r,o,S):_a(r,o,S,h||null,!0):1===i&&null!==o?_a(r,o,S,h||null,!0):2===i?function x0(i,r,o){const u=Kl(i,r);u&&function Xl(i,r,o,u){i.removeChild(r,o,u)}(i,u,r,o)}(r,S,v):3===i&&r.destroyNode(S),null!=m&&function $x(i,r,o,u,h){const m=o[7];m!==Mi(o)&&ga(r,i,u,m,h);for(let S=10;S<o.length;S++){const C=o[S];Hd(C[1],C,i,r,u,m)}}(r,i,m,o,h)}}function ya(i,r,o){return i.createElement(r,o)}function va(i,r){const o=i[9],u=o.indexOf(r),h=r[3];512&r[2]&&(r[2]&=-513,si(h,-1)),o.splice(u,1)}function Bd(i,r){if(i.length<=10)return;const o=10+r,u=i[o];if(u){const h=u[17];null!==h&&h!==i&&va(h,u),r>0&&(i[o-1][4]=u[4]);const m=Os(i,10+r);!function pu(i,r){Hd(i,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const v=m[19];null!==v&&v.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function pr(i,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Hd(i,r,o,3,null,null),function Hx(i){let r=i[13];if(!r)return Ka(i[1],i);for(;r;){let o=null;if(ui(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==i;)ui(r)&&Ka(r[1],r),r=r[3];null===r&&(r=i),ui(r)&&Ka(r[1],r),o=r&&r[4]}r=o}}(r)}}function Ka(i,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Wx(i,r){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const h=r[o[u]];if(!(h instanceof Ml)){const m=o[u+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const S=h[m[v]],C=m[v+1];try{C.call(S)}finally{}}else try{m.call(h)}finally{}}}}(i,r),function mu(i,r){const o=i.cleanup,u=r[7];let h=-1;if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const v=o[m+1],S="function"==typeof v?v(r):Mi(r[v]),C=u[h=o[m+2]],O=o[m+3];"boolean"==typeof O?S.removeEventListener(o[m],C,O):O>=0?u[h=O]():u[h=-O].unsubscribe(),m+=2}else{const v=u[h=o[m+1]];o[m].call(v)}if(null!==u){for(let m=h+1;m<u.length;m++)(0,u[m])();r[7]=null}}(i,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&wr(r[3])){o!==r[3]&&va(o,r);const u=r[19];null!==u&&u.detachView(i)}!function Lm(i){io.delete(i[20])}(r)}}function Ud(i,r,o){return function p0(i,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const h=i.data[u.directiveStart].encapsulation;if(h===Tn.None||h===Tn.Emulated)return null}return j(u,o)}(i,r.parent,o)}function _a(i,r,o,u,h){i.insertBefore(r,o,u,h)}function m0(i,r,o){i.appendChild(r,o)}function g0(i,r,o,u,h){null!==u?_a(i,r,o,u,h):m0(i,r,o)}function Kl(i,r){return i.parentNode(r)}let gu=function y0(i,r,o){return 40&i.type?j(i,o):null};function zf(i,r,o,u){const h=Ud(i,u,r),m=r[11],S=function Vm(i,r,o){return gu(i,r,o)}(u.parent||r[6],u,r);if(null!=h)if(Array.isArray(o))for(let C=0;C<o.length;C++)g0(m,h,o[C],S,!1);else g0(m,h,o,S,!1)}function Hf(i,r){if(null!==r){const o=r.type;if(3&o)return j(r,i);if(4&o)return Wm(-1,i[r.index]);if(8&o){const u=r.child;if(null!==u)return Hf(i,u);{const h=i[r.index];return wr(h)?Wm(-1,h):Mi(h)}}if(32&o)return Ro(r,i)()||Mi(i[r.index]);{const u=_0(i,r);return null!==u?Array.isArray(u)?u[0]:Hf(Xa(i[16]),u):Hf(i,r.next)}}return null}function _0(i,r){return null!==r?i[16][6].projection[r.projection]:null}function Wm(i,r){const o=10+i+1;if(o<r.length){const u=r[o],h=u[1].firstChild;if(null!==h)return Hf(u,h)}return r[7]}function jm(i,r,o,u,h,m,v){for(;null!=o;){const S=u[o.index],C=o.type;if(v&&0===r&&(S&&Kn(Mi(S),u),o.flags|=4),64!=(64&o.flags))if(8&C)jm(i,r,o.child,u,h,m,!1),ga(r,i,h,S,m);else if(32&C){const O=Ro(o,u);let H;for(;H=O();)ga(r,i,h,H,m);ga(r,i,h,S,m)}else 16&C?b0(i,r,u,o,h,m):ga(r,i,h,S,m);o=v?o.projectionNext:o.next}}function Hd(i,r,o,u,h,m){jm(o,u,i.firstChild,r,h,m,!1)}function b0(i,r,o,u,h,m){const v=o[16],C=v[6].projection[u.projection];if(Array.isArray(C))for(let O=0;O<C.length;O++)ga(r,i,h,C[O],m);else jm(i,r,C,v[3],h,m,!0)}function w0(i,r,o){i.setAttribute(r,"style",o)}function $m(i,r,o){""===o?i.removeAttribute(r,"class"):i.setAttribute(r,"class",o)}function M0(i,r,o){let u=i.length;for(;;){const h=i.indexOf(r,o);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const m=r.length;if(h+m===u||i.charCodeAt(h+m)<=32)return h}o=h+1}}const S0="ng-template";function qx(i,r,o){let u=0;for(;u<i.length;){let h=i[u++];if(o&&"class"===h){if(h=i[u],-1!==M0(h.toLowerCase(),r,0))return!0}else if(1===h){for(;u<i.length&&"string"==typeof(h=i[u++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function E0(i){return 4===i.type&&i.value!==S0}function Xx(i,r,o){return r===(4!==i.type||o?i.value:S0)}function Kx(i,r,o){let u=4;const h=i.attrs||[],m=function Qx(i){for(let r=0;r<i.length;r++)if(Qh(i[r]))return r;return i.length}(h);let v=!1;for(let S=0;S<r.length;S++){const C=r[S];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!Xx(i,C,o)||""===C&&1===r.length){if(so(u))return!1;v=!0}}else{const O=8&u?C:r[++S];if(8&u&&null!==i.attrs){if(!qx(i.attrs,O,o)){if(so(u))return!1;v=!0}continue}const X=Zx(8&u?"class":C,h,E0(i),o);if(-1===X){if(so(u))return!1;v=!0;continue}if(""!==O){let ce;ce=X>m?"":h[X+1].toLowerCase();const ve=8&u?ce:null;if(ve&&-1!==M0(ve,O,0)||2&u&&O!==ce){if(so(u))return!1;v=!0}}}}else{if(!v&&!so(u)&&!so(C))return!1;if(v&&so(C))continue;v=!1,u=C|1&u}}return so(u)||v}function so(i){return 0==(1&i)}function Zx(i,r,o,u){if(null===r)return-1;let h=0;if(u||!o){let m=!1;for(;h<r.length;){const v=r[h];if(v===i)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let S=r[++h];for(;"string"==typeof S;)S=r[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function eb(i,r){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,i)}function D0(i,r,o=!1){for(let u=0;u<r.length;u++)if(Kx(i,r[u],o))return!0;return!1}function T0(i,r){return i?":not("+r.trim()+")":r}function nb(i){let r=i[0],o=1,u=2,h="",m=!1;for(;o<i.length;){let v=i[o];if("string"==typeof v)if(2&u){const S=i[++o];h+="["+v+(S.length>0?'="'+S+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!so(v)&&(r+=T0(m,h),h=""),u=v,m=m||!so(u);o++}return""!==h&&(r+=T0(m,h)),r}const An={};function C0(i){A0(Un(),et(),_r()+i,!1)}function A0(i,r,o,u){if(!u)if(3==(3&r[2])){const m=i.preOrderCheckHooks;null!==m&&ia(r,m,o)}else{const m=i.preOrderHooks;null!==m&&ra(r,m,0,o)}xo(o)}function L0(i,r=null,o=null,u){const h=O0(i,r,o,u);return h.resolveInjectorInitializers(),h}function O0(i,r=null,o=null,u,h=new Set){const m=[o||Rt,Cf(i)];return u=u||("object"==typeof i?void 0:Zt(i)),new If(m,r||fr(),u||null,h)}let Zl=(()=>{class i{static create(o,u){if(Array.isArray(o))return L0({name:""},u,o,"");{const h=o.name??"";return L0({name:h},o.parent,o.providers,h)}}}return i.THROW_IF_NOT_FOUND=xd,i.NULL=new Tf,i.\u0275prov=Jn({token:i,providedIn:"any",factory:()=>Xi(Fs)}),i.__NG_ELEMENT_ID__=-1,i})();function vu(i,r=Me.Default){const o=et();return null===o?Xi(i,r):sf(Ti(),o,Ut(i),r)}function H0(){throw new Error("invalid")}function Gf(i,r){return i<<17|r<<2}function oo(i){return i>>17&32767}function Zm(i){return 2|i}function xa(i){return(131068&i)>>2}function Jm(i,r){return-131069&i|r<<2}function Qm(i){return 1|i}function Lb(i,r){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u],m=o[u+1];if(-1!==m){const v=i.data[m];Nc(h),v.contentQueries(2,r[m],m)}}}function Ft(i,r,o,u,h,m,v,S,C,O,H){const X=r.blueprint.slice();return X[0]=h,X[2]=76|u,(null!==H||i&&1024&i[2])&&(X[2]|=1024),Hi(X),X[3]=X[15]=i,X[8]=o,X[10]=v||i&&i[10],X[11]=S||i&&i[11],X[12]=C||i&&i[12]||null,X[9]=O||i&&i[9]||null,X[6]=m,X[20]=function du(){return uu++}(),X[21]=H,X[16]=2==r.type?i[16]:X,X}function Gr(i,r,o,u,h){let m=i.data[r];if(null===m)m=function ig(i,r,o,u,h){const m=cr(),v=ud(),C=i.data[r]=function tv(i,r,o,u,h,m){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,o,r,u,h);return null===i.firstChild&&(i.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(i,r,o,u,h),function ta(){return Et.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=o,m.value=u,m.attrs=h;const v=function Is(){const i=Et.lFrame,r=i.currentTNode;return i.isParent?r:r.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Rs(m,!0),m}function _u(i,r,o,u){if(0===o)return-1;const h=r.length;for(let m=0;m<o;m++)r.push(u),i.blueprint.push(u),i.data.push(null);return h}function $f(i,r,o){kc(r);try{const u=i.viewQuery;null!==u&&hg(1,u,o);const h=i.template;null!==h&&J0(i,r,h,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Lb(i,r),i.staticViewQueries&&hg(2,i.viewQuery,o);const m=i.components;null!==m&&function $n(i,r){for(let o=0;o<r.length;o++)Gb(i,r[o])}(r,m)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{r[2]&=-5,Uc()}}function Vd(i,r,o,u){const h=r[2];if(128!=(128&h)){kc(r);try{Hi(r),function Qo(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&J0(i,r,o,2,u);const v=3==(3&h);if(v){const O=i.preOrderCheckHooks;null!==O&&ia(r,O,null)}else{const O=i.preOrderHooks;null!==O&&ra(r,O,0,null),Fa(r,0)}if(function Wr(i){for(let r=hu(i);null!==r;r=fu(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const h=o[u],m=h[3];0==(512&h[2])&&si(m,1),h[2]|=512}}}(r),function xu(i){for(let r=hu(i);null!==r;r=fu(r))for(let o=10;o<r.length;o++){const u=r[o],h=u[1];ti(u)&&Vd(h,u,h.template,u[8])}}(r),null!==i.contentQueries&&Lb(i,r),v){const O=i.contentCheckHooks;null!==O&&ia(r,O)}else{const O=i.contentHooks;null!==O&&ra(r,O,1),Fa(r,1)}!function lE(i,r){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const h=o[u];if(h<0)xo(~h);else{const m=h,v=o[++u],S=o[++u];Wp(v,m),S(2,r[m])}}}finally{xo(-1)}}(i,r);const S=i.components;null!==S&&function cE(i,r){for(let o=0;o<r.length;o++)jr(i,r[o])}(r,S);const C=i.viewQuery;if(null!==C&&hg(2,C,u),v){const O=i.viewCheckHooks;null!==O&&ia(r,O)}else{const O=i.viewHooks;null!==O&&ra(r,O,2),Fa(r,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,si(r[3],-1))}finally{Uc()}}}function Ob(i,r,o,u){const h=r[10],v=xi(r);try{!v&&h.begin&&h.begin(),v&&$f(i,r,u),Vd(i,r,o,u)}finally{!v&&h.end&&h.end()}}function J0(i,r,o,u,h){const m=_r(),v=2&u;try{xo(-1),v&&r.length>22&&A0(i,r,22,!1),o(u,h)}finally{xo(m)}}function Za(i,r,o){!cs()||(function kb(i,r,o,u){const h=o.directiveStart,m=o.directiveEnd;i.firstCreatePass||Ps(o,r),Kn(u,r);const v=o.initialInputs;for(let S=h;S<m;S++){const C=i.data[S],O=_i(C);O&&lv(r,o,C);const H=Al(r,i,S,o);Kn(H,r),null!==v&&cv(0,S-h,H,C,0,v),O&&(Vt(o.index,r)[8]=H)}}(i,r,o,j(o,r)),128==(128&o.flags)&&function Bb(i,r,o){const u=o.directiveStart,h=o.directiveEnd,m=o.index,v=function jp(){return Et.lFrame.currentDirectiveIndex}();try{xo(m);for(let S=u;S<h;S++){const C=i.data[S],O=r[S];Oc(S),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&av(C,O)}}finally{xo(-1),Oc(v)}}(i,r,o))}function Yf(i,r,o=j){const u=r.localNames;if(null!==u){let h=r.index+1;for(let m=0;m<u.length;m+=2){const v=u[m+1],S=-1===v?o(r,i):i[v];i[h++]=S}}}function Ja(i){const r=i.tView;return null===r||r.incompleteFirstPass?i.tView=Wd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):r}function Wd(i,r,o,u,h,m,v,S,C,O){const H=22+u,X=H+h,ce=function Q0(i,r){const o=[];for(let u=0;u<r;u++)o.push(u<i?null:An);return o}(H,X),ve="function"==typeof O?O():O;return ce[1]={type:i,blueprint:ce,template:o,queries:null,viewQuery:S,declTNode:r,data:ce.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:X,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ve,incompleteFirstPass:!1}}function tc(i,r,o,u){const h=fv(r);null===o?h.push(u):(h.push(o),i.firstCreatePass&&pv(i).push(u,h.length-1))}function rg(i,r,o){for(let u in i)if(i.hasOwnProperty(u)){const h=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,h):o[u]=[r,h]}return o}function nv(i,r){const u=r.directiveEnd,h=i.data,m=r.attrs,v=[];let S=null,C=null;for(let O=r.directiveStart;O<u;O++){const H=h[O],X=H.inputs,ce=null===m||E0(r)?null:uv(X,m);v.push(ce),S=rg(X,O,S),C=rg(H.outputs,O,C)}null!==S&&(S.hasOwnProperty("class")&&(r.flags|=16),S.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=S,r.outputs=C}function rv(i,r){const o=Vt(r,i);16&o[2]||(o[2]|=32)}function og(i,r,o,u){let h=!1;if(cs()){const m=function Ub(i,r,o){const u=i.directiveRegistry;let h=null;if(u)for(let m=0;m<u.length;m++){const v=u[m];D0(o,v.selectors,!1)&&(h||(h=[]),la(Ps(o,r),i,v.type),_i(v)?(qf(i,o),h.unshift(v)):h.push(v))}return h}(i,r,o),v=null===u?null:{"":-1};if(null!==m){h=!0,ag(o,i.data.length,m.length);for(let H=0;H<m.length;H++){const X=m[H];X.providersResolver&&X.providersResolver(X)}let S=!1,C=!1,O=_u(i,r,m.length,null);for(let H=0;H<m.length;H++){const X=m[H];o.mergedAttrs=oa(o.mergedAttrs,X.hostAttrs),lg(i,o,r,O,X),Hb(O,X,v),null!==X.contentQueries&&(o.flags|=8),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(o.flags|=128);const ce=X.type.prototype;!S&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),S=!0),!C&&(ce.ngOnChanges||ce.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),C=!0),O++}nv(i,o)}v&&function zb(i,r,o){if(r){const u=i.localNames=[];for(let h=0;h<r.length;h+=2){const m=o[r[h+1]];if(null==m)throw new Je(-301,!1);u.push(r[h],m)}}}(o,u,v)}return o.mergedAttrs=oa(o.mergedAttrs,o.attrs),h}function ov(i,r,o,u,h,m){const v=m.hostBindings;if(v){let S=i.hostBindingOpCodes;null===S&&(S=i.hostBindingOpCodes=[]);const C=~r.index;(function Fb(i){let r=i.length;for(;r>0;){const o=i[--r];if("number"==typeof o&&o<0)return o}return 0})(S)!=C&&S.push(C),S.push(u,h,v)}}function av(i,r){null!==i.hostBindings&&i.hostBindings(1,r)}function qf(i,r){r.flags|=2,(i.components||(i.components=[])).push(r.index)}function Hb(i,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=i;_i(r)&&(o[""]=i)}}function ag(i,r,o){i.flags|=1,i.directiveStart=r,i.directiveEnd=r+o,i.providerIndexes=r}function lg(i,r,o,u,h){i.data[u]=h;const m=h.factory||(h.factory=Ir(h.type)),v=new Ml(m,_i(h),vu);i.blueprint[u]=v,o[u]=v,ov(i,r,0,u,_u(i,o,h.hostVars,An),h)}function lv(i,r,o){const u=j(r,i),h=Ja(o),m=i[10],v=Kf(i,Ft(i,h,null,o.onPush?32:16,u,r,m,m.createRenderer(u,o),null,null,null));i[r.index]=v}function ao(i,r,o,u,h,m){const v=j(i,r);!function Xf(i,r,o,u,h,m,v){if(null==m)i.removeAttribute(r,h,o);else{const S=null==v?ct(m):v(m,u||"",h);i.setAttribute(r,h,S,o)}}(r[11],v,m,i.value,o,u,h)}function cv(i,r,o,u,h,m){const v=m[r];if(null!==v){const S=u.setInput;for(let C=0;C<v.length;){const O=v[C++],H=v[C++],X=v[C++];null!==S?u.setInput(o,X,O,H):o[H]=X}}}function uv(i,r){let o=null,u=0;for(;u<r.length;){const h=r[u];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,i[h],r[u+1])),u+=2}else u+=2;else u+=4}return o}function cg(i,r,o,u){return new Array(i,!0,!1,r,null,0,u,o,null,null)}function jr(i,r){const o=Vt(r,i);if(ti(o)){const u=o[1];48&o[2]?Vd(u,o,u.template,o[8]):o[5]>0&&bu(o)}}function bu(i){for(let u=hu(i);null!==u;u=fu(u))for(let h=10;h<u.length;h++){const m=u[h];if(ti(m))if(512&m[2]){const v=m[1];Vd(v,m,v.template,m[8])}else m[5]>0&&bu(m)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const h=Vt(o[u],i);ti(h)&&h[5]>0&&bu(h)}}function Gb(i,r){const o=Vt(r,i),u=o[1];(function Wb(i,r){for(let o=r.length;o<i.blueprint.length;o++)r.push(i.blueprint[o])})(u,o),$f(u,o,o[8])}function Kf(i,r){return i[13]?i[14][4]=r:i[13]=r,i[14]=r,r}function ug(i){for(;i;){i[2]|=32;const r=Xa(i);if(Tc(i)&&!r)return i;i=r}return null}function hv(i){!function dv(i){for(let r=0;r<i.components.length;r++){const o=i.components[r],u=Gi(o);if(null!==u){const h=u[1];Ob(h,u,h.template,o)}}}(i[8])}function hg(i,r,o){Nc(0),r(i,o)}const $b=(()=>Promise.resolve(null))();function fv(i){return i[7]||(i[7]=[])}function pv(i){return i.cleanup||(i.cleanup=[])}function gv(i,r){const o=i[9],u=o?o.get(cu,null):null;u&&u.handleError(r)}function fg(i,r,o,u,h){for(let m=0;m<o.length;){const v=o[m++],S=o[m++],C=r[v],O=i.data[v];null!==O.setInput?O.setInput(C,h,u,S):C[S]=h}}function Zf(i,r,o){let u=o?i.styles:null,h=o?i.classes:null,m=0;if(null!==r)for(let v=0;v<r.length;v++){const S=r[v];"number"==typeof S?m=S:1==m?h=sn(h,S):2==m&&(u=sn(u,S+": "+r[++v]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=h:i.classesWithoutHost=h}function Jf(i,r,o,u,h=!1){for(;null!==o;){const m=r[o.index];if(null!==m&&u.push(Mi(m)),wr(m))for(let S=10;S<m.length;S++){const C=m[S],O=C[1].firstChild;null!==O&&Jf(C[1],C,O,u)}const v=o.type;if(8&v)Jf(i,r,o.child,u);else if(32&v){const S=Ro(o,r);let C;for(;C=S();)u.push(C)}else if(16&v){const S=_0(r,o);if(Array.isArray(S))u.push(...S);else{const C=Xa(r[16]);Jf(C[1],C,S,u,!0)}}o=h?o.projectionNext:o.next}return u}class jd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Jf(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(wr(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(Bd(r,u),Os(o,u))}this._attachedToViewContainer=!1}pr(this._lView[1],this._lView)}onDestroy(r){tc(this._lView[1],this._lView,null,r)}markForCheck(){ug(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function dg(i,r,o){const u=r[10];u.begin&&u.begin();try{Vd(i,r,i.template,o)}catch(h){throw gv(r,h),h}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zx(i,r){Hd(i,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=r}}class Yb extends jd{constructor(r){super(r),this._view=r}detectChanges(){hv(this._view)}checkNoChanges(){}get context(){return null}}class pg extends Pd{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=fe(r);return new $d(o,this.ngModule)}}function yv(i){const r=[];for(let o in i)i.hasOwnProperty(o)&&r.push({propName:i[o],templateName:o});return r}class Xb{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const h=this.injector.get(r,au,u);return h!==au||o===au?h:this.parentInjector.get(r,o,u)}}class $d extends su{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function ib(i){return i.map(nb).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return yv(this.componentDef.inputs)}get outputs(){return yv(this.componentDef.outputs)}create(r,o,u,h){let m=(h=h||this.ngModule)instanceof Z?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new Xb(r,m):r,S=v.get(Lf,null);if(null===S)throw new Je(407,!1);const C=v.get(Dm,null),O=S.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",X=u?function ec(i,r,o){return i.selectRootElement(r,o===Tn.ShadowDom)}(O,u,this.componentDef.encapsulation):ya(S.createRenderer(null,this.componentDef),H,function qb(i){const r=i.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(H)),ce=this.componentDef.onPush?288:272,ve=function ew(i,r){return{components:[],scheduler:i||jS,clean:$b,playerHandler:r||null,flags:0}}(),je=Wd(0,null,null,1,0,null,null,null,null,null),ft=Ft(null,je,ve,ce,null,null,S,O,C,v,null);let Lt,jt;kc(ft);try{const on=function Jb(i,r,o,u,h,m){const v=o[1];o[22]=i;const C=Gr(v,22,2,"#host",null),O=C.mergedAttrs=r.hostAttrs;null!==O&&(Zf(C,O,!0),null!==i&&(El(h,i,O),null!==C.classes&&$m(h,i,C.classes),null!==C.styles&&w0(h,i,C.styles)));const H=u.createRenderer(i,r),X=Ft(o,Ja(r),null,r.onPush?32:16,o[22],C,u,H,m||null,null,null);return v.firstCreatePass&&(la(Ps(C,o),v,r.type),qf(v,C),ag(C,o.length,1)),Kf(o,X),o[22]=X}(X,this.componentDef,ft,S,O);if(X)if(u)El(O,X,["ng-version",Tm.full]);else{const{attrs:ut,classes:cn}=function rb(i){const r=[],o=[];let u=1,h=2;for(;u<i.length;){let m=i[u];if("string"==typeof m)2===h?""!==m&&r.push(m,i[++u]):8===h&&o.push(m);else{if(!so(h))break;h=m}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);ut&&El(O,X,ut),cn&&cn.length>0&&$m(O,X,cn.join(" "))}if(jt=ke(je,22),void 0!==o){const ut=jt.projection=[];for(let cn=0;cn<this.ngContentSelectors.length;cn++){const Nn=o[cn];ut.push(null!=Nn?Array.from(Nn):null)}}Lt=function Qb(i,r,o,u,h){const m=o[1],v=function sg(i,r,o){const u=Ti();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),lg(i,u,r,_u(i,r,1,null),o),nv(i,u));const h=Al(r,i,u.directiveStart,u);Kn(h,r);const m=j(u,r);return m&&Kn(m,r),h}(m,o,r);if(u.components.push(v),i[8]=v,null!==h)for(const C of h)C(v,r);if(r.contentQueries){const C=Ti();r.contentQueries(1,v,C.directiveStart)}const S=Ti();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(xo(S.index),ov(o[1],S,0,S.directiveStart,S.directiveEnd,r),av(r,v)),v}(on,this.componentDef,ft,ve,[tw]),$f(je,ft,null)}finally{Uc()}return new Zb(this.componentType,Lt,pa(jt,ft),ft,jt)}}class Zb extends class Gl{}{constructor(r,o,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=o,this.hostView=this.changeDetectorRef=new Yb(h),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[r])){const m=this._rootLView;fg(m[1],m,h,r,o),rv(m,this._tNode.index)}}get injector(){return new ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function tw(){const i=Ti();na(et()[1],i)}function mg(i){let r=function vv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;r;){let h;if(_i(i))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Je(903,!1);h=r.\u0275dir}if(h){if(o){u.push(h);const v=i;v.inputs=gg(i.inputs),v.declaredInputs=gg(i.declaredInputs),v.outputs=gg(i.outputs);const S=h.hostBindings;S&&yg(i,S);const C=h.viewQuery,O=h.contentQueries;if(C&&iw(i,C),O&&rw(i,O),Ze(i.inputs,h.inputs),Ze(i.declaredInputs,h.declaredInputs),Ze(i.outputs,h.outputs),_i(h)&&h.data.animation){const H=i.data;H.animation=(H.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const S=m[v];S&&S.ngInherit&&S(i),S===mg&&(o=!1)}}r=Object.getPrototypeOf(r)}!function nw(i){let r=0,o=null;for(let u=i.length-1;u>=0;u--){const h=i[u];h.hostVars=r+=h.hostVars,h.hostAttrs=oa(h.hostAttrs,o=oa(o,h.hostAttrs))}}(u)}function gg(i){return i===Bn?{}:i===Rt?[]:i}function iw(i,r){const o=i.viewQuery;i.viewQuery=o?(u,h)=>{r(u,h),o(u,h)}:r}function rw(i,r){const o=i.contentQueries;i.contentQueries=o?(u,h,m)=>{r(u,h,m),o(u,h,m)}:r}function yg(i,r){const o=i.hostBindings;i.hostBindings=o?(u,h)=>{r(u,h),o(u,h)}:r}let Yd=null;function nc(){if(!Yd){const i=Vn.Symbol;if(i&&i.iterator)Yd=i.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Yd=u)}}}return Yd}function qd(i){return!!vg(i)&&(Array.isArray(i)||!(i instanceof Map)&&nc()in i)}function vg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Po(i,r,o){return i[r]=o}function rr(i,r,o){return!Object.is(i[r],o)&&(i[r]=o,!0)}function Qa(i,r,o,u){const h=rr(i,r,o);return rr(i,r+1,u)||h}function Zd(i,r,o,u){const h=et();return rr(h,ea(),r)&&(Un(),ao(Ci(),h,i,r,o,u)),Zd}function Pv(i,r,o,u,h,m,v,S){const C=et(),O=Un(),H=i+22,X=O.firstCreatePass?function Rv(i,r,o,u,h,m,v,S,C){const O=r.consts,H=Gr(r,i,4,v||null,Rn(O,S));og(r,o,H,Rn(O,C)),na(r,H);const X=H.tViews=Wd(2,H,u,h,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,O);return null!==r.queries&&(r.queries.template(r,H),X.queries=r.queries.embeddedTView(H)),H}(H,O,C,r,o,u,h,m,v):O.data[H];Rs(X,!1);const ce=C[11].createComment("");zf(O,C,ce,X),Kn(ce,C),Kf(C,C[H]=cg(ce,C,ce,X)),Qs(X)&&Za(O,C,X),null!=v&&Yf(C,X,S)}function _g(i,r,o){const u=et();return rr(u,ea(),r)&&function Fr(i,r,o,u,h,m,v,S){const C=j(r,o);let H,O=r.inputs;!S&&null!=O&&(H=O[u])?(fg(i,o,H,u,h),Js(r)&&rv(o,r.index)):3&r.type&&(u=function iv(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),h=null!=v?v(h,r.value||"",u):h,m.setProperty(C,u,h))}(Un(),Ci(),u,i,r,u[11],o,!1),_g}function xg(i,r,o,u,h){const v=h?"class":"style";fg(i,o,r.inputs[v],v,u)}function Jd(i,r,o,u){const h=et(),m=Un(),v=22+i,S=h[11],C=h[v]=ya(S,r,function Na(){return Et.lFrame.currentNamespace}()),O=m.firstCreatePass?function dw(i,r,o,u,h,m,v){const S=r.consts,O=Gr(r,i,2,h,Rn(S,m));return og(r,o,O,Rn(S,v)),null!==O.attrs&&Zf(O,O.attrs,!1),null!==O.mergedAttrs&&Zf(O,O.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,O),O}(v,m,h,0,r,o,u):m.data[v];Rs(O,!0);const H=O.mergedAttrs;null!==H&&El(S,C,H);const X=O.classes;null!==X&&$m(S,C,X);const ce=O.styles;return null!==ce&&w0(S,C,ce),64!=(64&O.flags)&&zf(m,h,C,O),0===function vo(){return Et.lFrame.elementDepthCount}()&&Kn(C,h),function _o(){Et.lFrame.elementDepthCount++}(),Qs(O)&&(Za(m,h,O),function Gd(i,r,o){if(as(r)){const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const v=i.data[m];v.contentQueries&&v.contentQueries(1,o[m],m)}}}(m,O,h)),null!==u&&Yf(h,O),Jd}function ep(){let i=Ti();ud()?function Pc(){Et.lFrame.isParent=!1}():(i=i.parent,Rs(i,!1));const r=i;!function yl(){Et.lFrame.elementDepthCount--}();const o=Un();return o.firstCreatePass&&(na(o,i),as(i)&&o.queries.elementEnd(i)),null!=r.classesWithoutHost&&function Ba(i){return 0!=(16&i.flags)}(r)&&xg(o,r,et(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function sa(i){return 0!=(32&i.flags)}(r)&&xg(o,r,et(),r.stylesWithoutHost,!1),ep}function tp(i,r,o,u){return Jd(i,r,o,u),ep(),tp}function Nv(){return et()}function Mg(i){return!!i&&"function"==typeof i.then}function Fv(i){return!!i&&"function"==typeof i.subscribe}const kv=Fv;function Lo(i,r,o,u){const h=et(),m=Un(),v=Ti();return function Uv(i,r,o,u,h,m,v,S){const C=Qs(u),H=i.firstCreatePass&&pv(i),X=r[8],ce=fv(r);let ve=!0;if(3&u.type||S){const Lt=j(u,r),jt=S?S(Lt):Lt,on=ce.length,ut=S?Nn=>S(Mi(Nn[u.index])):u.index;let cn=null;if(!S&&C&&(cn=function Sg(i,r,o,u){const h=i.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===o&&h[m+1]===u){const S=r[7],C=h[m+2];return S.length>C?S[C]:null}"string"==typeof v&&(m+=2)}return null}(i,r,h,u.index)),null!==cn)(cn.__ngLastListenerFn__||cn).__ngNextListenerFn__=m,cn.__ngLastListenerFn__=m,ve=!1;else{m=Hv(u,r,X,m,!1);const Nn=o.listen(jt,h,m);ce.push(m,Nn),H&&H.push(h,ut,on,on+1)}}else m=Hv(u,r,X,m,!1);const je=u.outputs;let ft;if(ve&&null!==je&&(ft=je[h])){const Lt=ft.length;if(Lt)for(let jt=0;jt<Lt;jt+=2){const ai=r[ft[jt]][ft[jt+1]].subscribe(m),Ec=ce.length;ce.push(m,ai),H&&H.push(h,u.index,Ec,-(Ec+1))}}}(m,h,h[11],v,i,r,0,u),Lo}function zv(i,r,o,u){try{return!1!==o(u)}catch(h){return gv(i,h),!1}}function Hv(i,r,o,u,h){return function m(v){if(v===Function)return u;ug(2&i.flags?Vt(i.index,r):r);let C=zv(r,0,u,v),O=m.__ngNextListenerFn__;for(;O;)C=zv(r,0,O,v)&&C,O=O.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Vv(i=1){return function hd(i){return(Et.lFrame.contextLView=function _l(i,r){for(;i>0;)r=r[15],i--;return r}(i,Et.lFrame.contextLView))[8]}(i)}function Tg(i,r,o,u,h){const m=i[o+1],v=null===r;let S=u?oo(m):xa(m),C=!1;for(;0!==S&&(!1===C||v);){const H=i[S+1];rp(i[S],r)&&(C=!0,i[S+1]=u?Qm(H):Zm(H)),S=u?oo(H):xa(H)}C&&(i[o+1]=u?Zm(m):Qm(m))}function rp(i,r){return null===i||null==r||(Array.isArray(i)?i[1]:i)===r||!(!Array.isArray(i)||"string"!=typeof r)&&bt(i,r)>=0}function sh(i,r){return function $r(i,r,o,u){const h=et(),m=Un(),v=function eo(i){const r=Et.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+i,o}(2);m.firstUpdatePass&&function oh(i,r,o,u){const h=i.data;if(null===h[o+1]){const m=h[_r()],v=function Pg(i,r){return r>=i.expandoStartIndex}(i,o);(function op(i,r){return 0!=(i.flags&(r?16:32))})(m,u)&&null===r&&!v&&(r=!1),r=function ah(i,r,o,u){const h=function La(i){const r=Et.lFrame.currentDirectiveIndex;return-1===r?null:i[r]}(i);let m=u?r.residualClasses:r.residualStyles;if(null===h)0===(u?r.classBindings:r.styleBindings)&&(o=Iu(o=sp(null,i,r,o,u),r.attrs,u),m=null);else{const v=r.directiveStylingLast;if(-1===v||i[v]!==h)if(o=sp(h,i,r,o,u),null===m){let C=function vw(i,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==xa(u))return i[oo(u)]}(i,r,u);void 0!==C&&Array.isArray(C)&&(C=sp(null,i,r,C[1],u),C=Iu(C,r.attrs,u),function es(i,r,o,u){i[oo(o?r.classBindings:r.styleBindings)]=u}(i,r,u,C))}else m=function Xv(i,r,o){let u;const h=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<h;m++)u=Iu(u,i[m].hostAttrs,o);return Iu(u,r.attrs,o)}(i,r,u)}return void 0!==m&&(u?r.residualClasses=m:r.residualStyles=m),o}(h,m,r,u),function Au(i,r,o,u,h,m){let v=m?r.classBindings:r.styleBindings,S=oo(v),C=xa(v);i[u]=o;let H,O=!1;if(Array.isArray(o)){const X=o;H=X[1],(null===H||bt(X,H)>0)&&(O=!0)}else H=o;if(h)if(0!==C){const ce=oo(i[S+1]);i[u+1]=Gf(ce,S),0!==ce&&(i[ce+1]=Jm(i[ce+1],u)),i[S+1]=function Mb(i,r){return 131071&i|r<<17}(i[S+1],u)}else i[u+1]=Gf(S,0),0!==S&&(i[S+1]=Jm(i[S+1],u)),S=u;else i[u+1]=Gf(C,0),0===S?S=u:i[C+1]=Jm(i[C+1],u),C=u;O&&(i[u+1]=Zm(i[u+1])),Tg(i,H,u,!0),Tg(i,H,u,!1),function th(i,r,o,u,h){const m=h?i.residualClasses:i.residualStyles;null!=m&&"string"==typeof r&&bt(m,r)>=0&&(o[u+1]=Qm(o[u+1]))}(r,H,i,u,m),v=Gf(S,C),m?r.classBindings=v:r.styleBindings=v}(h,m,r,o,v,u)}}(m,i,v,u),r!==An&&rr(h,v,r)&&function Og(i,r,o,u,h,m,v,S){if(!(3&r.type))return;const C=i.data,O=C[S+1];Ru(function W0(i){return 1==(1&i)}(O)?Ng(C,r,o,h,xa(O),v):void 0)||(Ru(m)||function G0(i){return 2==(2&i)}(O)&&(m=Ng(C,null,o,h,S,v)),function Yx(i,r,o,u,h){if(r)h?i.addClass(o,u):i.removeClass(o,u);else{let m=-1===u.indexOf("-")?void 0:Sr.DashCase;null==h?i.removeStyle(o,u,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Sr.Important),i.setStyle(o,u,h,m))}}(u,v,P(_r(),o),h,m))}(m,m.data[_r()],h,h[11],i,h[v+1]=function Kv(i,r){return null==i||("string"==typeof r?i+=r:"object"==typeof i&&(i=Zt(Bl(i)))),i}(r,o),u,v)}(i,r,null,!0),sh}function sp(i,r,o,u,h){let m=null;const v=o.directiveEnd;let S=o.directiveStylingLast;for(-1===S?S=o.directiveStart:S++;S<v&&(m=r[S],u=Iu(u,m.hostAttrs,h),m!==i);)S++;return null!==i&&(o.directiveStylingLast=S),u}function Iu(i,r,o){const u=o?1:2;let h=-1;if(null!==r)for(let m=0;m<r.length;m++){const v=r[m];"number"==typeof v?h=v:h===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),re(i,v,!!o||r[++m]))}return void 0===i?null:i}function Ng(i,r,o,u,h,m){const v=null===r;let S;for(;h>0;){const C=i[h],O=Array.isArray(C),H=O?C[1]:C,X=null===H;let ce=o[h+1];ce===An&&(ce=X?Rt:void 0);let ve=X?Ce(ce,u):H===u?ce:void 0;if(O&&!Ru(ve)&&(ve=Ce(C,u)),Ru(ve)&&(S=ve,v))return S;const je=i[h+1];h=v?oo(je):xa(je)}if(null!==r){let C=m?r.residualClasses:r.residualStyles;null!=C&&(S=Ce(C,u))}return S}function Ru(i){return void 0!==i}function Fg(i,r=""){const o=et(),u=Un(),h=i+22,m=u.firstCreatePass?Gr(u,h,1,r,null):u.data[h],v=o[h]=function Er(i,r){return i.createText(r)}(o[11],r);zf(u,o,v,m),Rs(m,!1)}function ch(i){return Pu("",i,""),ch}function Pu(i,r,o){const u=et(),h=function Mu(i,r,o,u){return rr(i,ea(),o)?r+ct(o)+u:An}(u,i,r,o);return h!==An&&function ba(i,r,o){const u=P(r,i);!function f0(i,r,o){i.setValue(r,o)}(i[11],u,o)}(u,_r(),h),Pu}const Oo=void 0;var Ou=["en",[["a","p"],["AM","PM"],Oo],[["AM","PM"],Oo,Oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oo,"{1} 'at' {0}",Oo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function up(i){const o=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let wa={};function Nu(i){const r=function Fu(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=dp(r);if(o)return o;const u=r.split("-")[0];if(o=dp(u),o)return o;if("en"===u)return Ou;throw new Je(701,!1)}function ph(i){return Nu(i)[fn.PluralCase]}function dp(i){return i in wa||(wa[i]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[i]),wa[i]}var fn=(()=>((fn=fn||{})[fn.LocaleId=0]="LocaleId",fn[fn.DayPeriodsFormat=1]="DayPeriodsFormat",fn[fn.DayPeriodsStandalone=2]="DayPeriodsStandalone",fn[fn.DaysFormat=3]="DaysFormat",fn[fn.DaysStandalone=4]="DaysStandalone",fn[fn.MonthsFormat=5]="MonthsFormat",fn[fn.MonthsStandalone=6]="MonthsStandalone",fn[fn.Eras=7]="Eras",fn[fn.FirstDayOfWeek=8]="FirstDayOfWeek",fn[fn.WeekendRange=9]="WeekendRange",fn[fn.DateFormat=10]="DateFormat",fn[fn.TimeFormat=11]="TimeFormat",fn[fn.DateTimeFormat=12]="DateTimeFormat",fn[fn.NumberSymbols=13]="NumberSymbols",fn[fn.NumberFormats=14]="NumberFormats",fn[fn.CurrencyCode=15]="CurrencyCode",fn[fn.CurrencySymbol=16]="CurrencySymbol",fn[fn.CurrencyName=17]="CurrencyName",fn[fn.Currencies=18]="Currencies",fn[fn.Directionality=19]="Directionality",fn[fn.PluralCase=20]="PluralCase",fn[fn.ExtraData=21]="ExtraData",fn))();const vs="en-US";let i_=vs;function Gs(i,r,o,u,h){if(i=Ut(i),Array.isArray(i))for(let m=0;m<i.length;m++)Gs(i[m],r,o,u,h);else{const m=Un(),v=et();let S=ms(i)?i:Ut(i.provide),C=Ga(i);const O=Ti(),H=1048575&O.providerIndexes,X=O.directiveStart,ce=O.providerIndexes>>20;if(ms(i)||!i.multi){const ve=new Ml(C,h,vu),je=$u(S,r,h?H:H+ce,X);-1===je?(la(Ps(O,v),m,S),M_(m,i,r.length),r.push(S),O.directiveStart++,O.directiveEnd++,h&&(O.providerIndexes+=1048576),o.push(ve),v.push(ve)):(o[je]=ve,v[je]=ve)}else{const ve=$u(S,r,H+ce,X),je=$u(S,r,H,H+ce),ft=ve>=0&&o[ve],Lt=je>=0&&o[je];if(h&&!Lt||!h&&!ft){la(Ps(O,v),m,S);const jt=function wp(i,r,o,u,h){const m=new Ml(i,o,vu);return m.multi=[],m.index=r,m.componentProviders=0,Yw(m,h,u&&!o),m}(h?bE:xE,o.length,h,u,C);!h&&Lt&&(o[je].providerFactory=jt),M_(m,i,r.length,0),r.push(S),O.directiveStart++,O.directiveEnd++,h&&(O.providerIndexes+=1048576),o.push(jt),v.push(jt)}else M_(m,i,ve>-1?ve:je,Yw(o[h?je:ve],C,!h&&u));!h&&u&&Lt&&o[je].componentProviders++}}}function M_(i,r,o,u){const h=ms(r),m=function Sm(i){return!!i.useClass}(r);if(h||m){const C=(m?Ut(r.useClass):r).prototype.ngOnDestroy;if(C){const O=i.destroyHooks||(i.destroyHooks=[]);if(!h&&r.multi){const H=O.indexOf(o);-1===H?O.push(o,[u,C]):O[H+1].push(u,C)}else O.push(o,C)}}}function Yw(i,r,o){return o&&i.componentProviders++,i.multi.push(r)-1}function $u(i,r,o,u){for(let h=o;h<u;h++)if(r[h]===i)return h;return-1}function xE(i,r,o,u){return iy(this.multi,[])}function bE(i,r,o,u){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,S=Al(o,o[1],this.providerFactory.index,u);m=S.slice(0,v),iy(h,m);for(let C=v;C<S.length;C++)m.push(S[C])}else m=[],iy(h,m);return m}function iy(i,r){for(let o=0;o<i.length;o++)r.push((0,i[o])());return r}function S_(i,r=[]){return o=>{o.providersResolver=(u,h)=>function $w(i,r,o){const u=Un();if(u.firstCreatePass){const h=_i(i);Gs(o,u.data,u.blueprint,h,!0),Gs(r,u.data,u.blueprint,h,!1)}}(u,h?h(i):i,r)}}class mc{}class ry{}function E_(i,r){return new T_(i,r??null)}class T_ extends mc{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pg(this);const u=ye(r);this._bootstrapComponents=Zi(u.bootstrap),this._r3Injector=O0(r,o,[{provide:mc,useValue:this},{provide:Pd,useValue:this.componentFactoryResolver}],Zt(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Mp extends ry{constructor(r){super(),this.moduleType=r}create(r){return new T_(this.moduleType,r)}}class C_ extends mc{constructor(r,o,u){super(),this.componentFactoryResolver=new pg(this),this.instance=null;const h=new If([...r,{provide:mc,useValue:this},{provide:Pd,useValue:this.componentFactoryResolver}],o||fr(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function gc(i,r,o=null){return new C_(i,r,o).injector}let sy=(()=>{class i{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=kt(0,o.type),h=u.length>0?gc([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,h)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Jn({token:i,providedIn:"environment",factory:()=>new i(Xi(Z))}),i})();function A_(i){i.getStandaloneInjector=r=>r.get(sy).getOrCreateStandaloneInjector(i)}function Qw(i,r,o,u,h){return function tl(i,r,o,u,h,m,v){const S=r+o;return Qa(i,S,h,m)?Po(i,S+2,v?u.call(v,h,m):u(h,m)):Yu(i,S+2)}(et(),ur(),i,r,o,u,h)}function cy(i,r,o,u,h,m){return function tM(i,r,o,u,h,m,v,S){const C=r+o;return function Kd(i,r,o,u,h){const m=Qa(i,r,o,u);return rr(i,r+2,h)||m}(i,C,h,m,v)?Po(i,C+3,S?u.call(S,h,m,v):u(h,m,v)):Yu(i,C+3)}(et(),ur(),i,r,o,u,h,m)}function Yu(i,r){const o=i[r];return o===An?void 0:o}function dy(i){return r=>{setTimeout(i,void 0,r)}}const Fo=class oM extends Xe.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let h=r,m=o||(()=>null),v=u;if(r&&"object"==typeof r){const C=r;h=C.next?.bind(C),m=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(m=dy(m),h&&(h=dy(h)),v&&(v=dy(v)));const S=super.subscribe({next:h,error:m,complete:v});return r instanceof Ne.w0&&r.add(S),S}};function aM(){return this._results[nc()]()}class hy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=nc(),u=hy.prototype;u[o]||(u[o]=aM)}get changes(){return this._changes||(this._changes=new Fo)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const h=qn(r);(this._changesDetected=!function pf(i,r,o){if(i.length!==r.length)return!1;for(let u=0;u<i.length;u++){let h=i[u],m=r[u];if(o&&(h=o(h),m=o(m)),m!==h)return!1}return!0}(u._results,h,o))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ah=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ai,i})();const lM=Ah,cM=class extends lM{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,h=Ft(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(u)),$f(u,h,r),new jd(h)}};function Ai(){return fy(Ti(),et())}function fy(i,r){return 4&i.type?new cM(r,i,pa(i,r)):null}let Ep=(()=>{class i{}return i.__NG_ELEMENT_ID__=uM,i})();function uM(){return dM(Ti(),et())}const AE=Ep,py=class extends AE{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return pa(this._hostTNode,this._hostLView)}get injector(){return new ca(this._hostTNode,this._hostLView)}get parentInjector(){const r=aa(this._hostTNode,this._hostLView);if(Ua(r)){const o=qr(r,this._hostLView),u=us(r);return new ca(o[1].data[u+8],o)}return new ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=U_(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let h,m;"number"==typeof u?h=u:null!=u&&(h=u.index,m=u.injector);const v=r.createEmbeddedView(o||{},m);return this.insert(v,h),v}createComponent(r,o,u,h,m){const v=r&&!function Ol(i){return"function"==typeof i}(r);let S;if(v)S=o;else{const X=o||{};S=X.index,u=X.injector,h=X.projectableNodes,m=X.environmentInjector||X.ngModuleRef}const C=v?r:new $d(fe(r)),O=u||this.parentInjector;if(!m&&null==C.ngModule){const ce=(v?O:this.parentInjector).get(Z,null);ce&&(m=ce)}const H=C.create(O,h,void 0,m);return this.insert(H.hostView,S),H}insert(r,o){const u=r._lView,h=u[1];if(function bi(i){return wr(i[3])}(u)){const H=this.indexOf(r);if(-1!==H)this.detach(H);else{const X=u[3],ce=new py(X,X[6],X[3]);ce.detach(ce.indexOf(r))}}const m=this._adjustIndex(o),v=this._lContainer;!function Vx(i,r,o,u){const h=10+u,m=o.length;u>0&&(o[h-1][4]=r),u<m-10?(r[4]=o[h],em(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const v=r[17];null!==v&&o!==v&&function Gx(i,r){const o=i[9];r[16]!==r[3][3][16]&&(i[2]=!0),null===o?i[9]=[r]:o.push(r)}(v,r);const S=r[19];null!==S&&S.insertView(i),r[2]|=64}(h,u,v,m);const S=Wm(m,v),C=u[11],O=Kl(C,v[7]);return null!==O&&function Nr(i,r,o,u,h,m){u[0]=h,u[6]=r,Hd(i,u,o,1,h,m)}(h,v[6],C,u,O,S),r.attachToViewContainerRef(),em(z_(v),m,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=U_(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Bd(this._lContainer,o);u&&(Os(z_(this._lContainer),o),pr(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=Bd(this._lContainer,o);return u&&null!=Os(z_(this._lContainer),o)?new jd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function U_(i){return i[8]}function z_(i){return i[8]||(i[8]=[])}function dM(i,r){let o;const u=r[i.index];if(wr(u))o=u;else{let h;if(8&i.type)h=Mi(u);else{const m=r[11];h=m.createComment("");const v=j(i,r);_a(m,Kl(m,v),h,function Hm(i,r){return i.nextSibling(r)}(m,v),!1)}r[i.index]=o=cg(u,r,h,i),Kf(r,o)}return new py(o,i,r)}class Ih{constructor(r){this.queryList=r,this.matches=null}clone(){return new Ih(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dp{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let m=0;m<u;m++){const v=o.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new Dp(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==gM(r,o).matches&&this.queries[o].setDirty()}}class fM{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class Tp{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const h=null!==o?o.length:0,m=this.getByIndex(u).embeddedTView(r,h);m&&(m.indexInDeclarationView=u,null!==o?o.push(m):o=[m])}return null!==o?new Tp(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class H_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new H_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(r,o,V_(o,m)),this.matchTNodeWithReadOption(r,o,Vc(o,r,m,!1,!1))}else u===Ah?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Vc(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Wl||h===Ep||h===Ah&&4&o.type)this.addMatch(o.index,-2);else{const m=Vc(o,r,h,!1,!1);null!==m&&this.addMatch(o.index,m)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function V_(i,r){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function PE(i,r,o,u){return-1===o?function Cp(i,r){return 11&i.type?pa(i,r):4&i.type?fy(i,r):null}(r,i):-2===o?function G_(i,r,o){return o===Wl?pa(r,i):o===Ah?fy(r,i):o===Ep?dM(r,i):void 0}(i,r,u):Al(i,i[1],o,r)}function pM(i,r,o,u){const h=r[19].queries[u];if(null===h.matches){const m=i.data,v=o.matches,S=[];for(let C=0;C<v.length;C+=2){const O=v[C];S.push(O<0?null:PE(r,m[O],v[C+1],o.metadata.read))}h.matches=S}return h.matches}function ko(i,r,o,u){const h=i.queries.getByIndex(o),m=h.matches;if(null!==m){const v=pM(i,r,h,o);for(let S=0;S<m.length;S+=2){const C=m[S];if(C>0)u.push(v[S/2]);else{const O=m[S+1],H=r[-C];for(let X=10;X<H.length;X++){const ce=H[X];ce[17]===ce[3]&&ko(ce[1],ce,O,u)}if(null!==H[9]){const X=H[9];for(let ce=0;ce<X.length;ce++){const ve=X[ce];ko(ve[1],ve,O,u)}}}}}return u}function Rh(i){const r=et(),o=Un(),u=dd();Nc(u+1);const h=gM(o,u);if(i.dirty&&xi(r)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const m=h.crossesNgTemplate?ko(o,r,u,[]):pM(o,r,h,u);i.reset(m,jl),i.notifyOnChanges()}return!0}return!1}function Ap(i,r,o){const u=Un();u.firstCreatePass&&(gy(u,new fM(i,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),W_(u,et(),r)}function mM(i,r,o,u){const h=Un();if(h.firstCreatePass){const m=Ti();gy(h,new fM(r,o,u),m.index),function j_(i,r){const o=i.contentQueries||(i.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,r)}(h,i),2==(2&o)&&(h.staticContentQueries=!0)}W_(h,et(),o)}function my(){return function LE(i,r){return i[19].queries[r].queryList}(et(),dd())}function W_(i,r,o){const u=new hy(4==(4&o));tc(i,r,u,u.destroy),null===r[19]&&(r[19]=new Dp),r[19].queries.push(new Ih(u))}function gy(i,r,o){null===i.queries&&(i.queries=new Tp),i.queries.track(new H_(r,o))}function gM(i,r){return i.queries.getByIndex(r)}function il(i){const r=fe(i)||le(i)||ne(i);return null!==r&&r.standalone}function Np(...i){}const ax=new gi("Application Initializer");let Fp=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Np,this.reject=Np,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Mg(m))o.push(m);else if(kv(m)){const v=new Promise((S,C)=>{m.subscribe({complete:S,error:C})});o.push(v)}}Promise.all(o).then(()=>{u()}).catch(h=>{this.reject(h)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(Xi(ax,8))},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uo=new gi("AppId",{providedIn:"root",factory:function Xu(){return`${kp()}${kp()}${kp()}`}});function kp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xy=new gi("Platform Initializer"),by=new gi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Da=new gi("appBootstrapListener"),wy=new gi("AnimationModuleType");let FM=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zo=new gi("LocaleId",{providedIn:"root",factory:()=>sm(zo,Me.Optional|Me.SkipSelf)||function Lh(){return typeof $localize<"u"&&$localize.locale||vs}()}),kM=new gi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class My{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let UM=(()=>{class i{compileModuleSync(o){return new Mp(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),m=Zi(ye(o).declarations).reduce((v,S)=>{const C=fe(S);return C&&v.push(new $d(C)),v},[]);return new My(u,m)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const GM=(()=>Promise.resolve(0))();function Ta(i){typeof Zone>"u"?GM.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ws{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&o,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function WM(){let i=Vn.requestAnimationFrame,r=Vn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&r){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function _n(i){const r=()=>{!function $M(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,lx(i),i.isCheckStableRunning=!0,Dy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),lx(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,h,m,v,S)=>{try{return YM(i),o.invokeTask(h,m,v,S)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||i.shouldCoalesceRunChangeDetection)&&r(),qM(i)}},onInvoke:(o,u,h,m,v,S,C)=>{try{return YM(i),o.invoke(h,m,v,S,C)}finally{i.shouldCoalesceRunChangeDetection&&r(),qM(i)}},onHasTask:(o,u,h,m)=>{o.hasTask(h,m),u===h&&("microTask"==m.change?(i._hasPendingMicrotasks=m.microTask,lx(i),Dy(i)):"macroTask"==m.change&&(i.hasPendingMacrotasks=m.macroTask))},onHandleError:(o,u,h,m)=>(o.handleError(h,m),i.runOutsideAngular(()=>i.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ws.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(Ws.isInAngularZone())throw new Je(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,r,jM,Np,Np);try{return m.runTask(v,o,u)}finally{m.cancelTask(v)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const jM={};function Dy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function lx(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function YM(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function qM(i){i._nesting--,Dy(i)}class XE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,h){return r.apply(o,u)}}const cx=new gi(""),XM=new gi("");let ux,KE=(()=>{class i{constructor(o,u,h){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ux||(function ZE(i){ux=i}(h),h.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ws.assertNotInAngularZone(),Ta(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ta(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:m,updateCb:h})}whenStable(o,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,h){return[]}}return i.\u0275fac=function(o){return new(o||i)(Xi(Ws),Xi(KM),Xi(XM))},i.\u0275prov=Jn({token:i,factory:i.\u0275fac}),i})(),KM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return ux?.findTestabilityInTree(this,o,u)??null}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),wc=null;const ZM=new gi("AllowMultipleToken"),dx=new gi("PlatformDestroyListeners");class QE{constructor(r,o){this.name=r,this.token=o}}function Ty(i,r,o=[]){const u=`Platform: ${r}`,h=new gi(u);return(m=[])=>{let v=fx();if(!v||v.injector.get(ZM,!1)){const S=[...o,...m,{provide:h,useValue:!0}];i?i(S):function eD(i){if(wc&&!wc.get(ZM,!1))throw new Je(400,!1);wc=i;const r=i.get(Ca);(function QM(i){const r=i.get(xy,null);r&&r.forEach(o=>o())})(i)}(function tS(i=[],r){return Zl.create({name:r,providers:[{provide:n0,useValue:"platform"},{provide:dx,useValue:new Set([()=>wc=null])},...i]})}(S,u))}return function nD(i){const r=fx();if(!r)throw new Je(401,!1);return r}()}}function fx(){return wc?.get(Ca)??null}let Ca=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const h=function Oh(i,r){let o;return o="noop"===i?new XE:("zone.js"===i?void 0:i)||new Ws(r),o}(u?.ngZone,function Mc(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),m=[{provide:Ws,useValue:h}];return h.run(()=>{const v=Zl.create({providers:m,parent:this.injector,name:o.moduleType.name}),S=o.create(v),C=S.injector.get(cu,null);if(!C)throw new Je(402,!1);return h.runOutsideAngular(()=>{const O=h.onError.subscribe({next:H=>{C.handleError(H)}});S.onDestroy(()=>{Ay(this._modules,S),O.unsubscribe()})}),function nS(i,r,o){try{const u=o();return Mg(u)?u.catch(h=>{throw r.runOutsideAngular(()=>i.handleError(h)),h}):u}catch(u){throw r.runOutsideAngular(()=>i.handleError(u)),u}}(C,h,()=>{const O=S.injector.get(Fp);return O.runInitializers(),O.donePromise.then(()=>(function r_(i){St(i,"Expected localeId to be defined"),"string"==typeof i&&(i_=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(zo,vs)||vs),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const h=iS({},u);return function hx(i,r,o){const u=new Mp(o);return Promise.resolve(u)}(0,0,o).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(o){const u=o.injector.get(Cy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new Je(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(dx,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(Xi(Zl))},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function iS(i,r){return Array.isArray(r)?r.reduce(iS,i):{...i,...r}}let Cy=(()=>{class i{constructor(o,u,h){this._zone=o,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new gt.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),v=new gt.y(S=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ws.assertNotInAngularZone(),Ta(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{C.unsubscribe(),O.unsubscribe()}});this.isStable=function Ge(...i){const r=(0,Ae.yG)(i),o=(0,Ae._6)(i,1/0),u=i;return u.length?1===u.length?(0,B.Xf)(u[0]):(0,L.J)(o)((0,Te.D)(u,r)):Re.E}(m,v.pipe(function vt(i={}){const{connector:r=(()=>new Xe.x),resetOnError:o=!0,resetOnComplete:u=!0,resetOnRefCountZero:h=!0}=i;return m=>{let v,S,C,O=0,H=!1,X=!1;const ce=()=>{S?.unsubscribe(),S=void 0},ve=()=>{ce(),v=C=void 0,H=X=!1},je=()=>{const ft=v;ve(),ft?.unsubscribe()};return(0,Y.e)((ft,Lt)=>{O++,!X&&!H&&ce();const jt=C=C??r();Lt.add(()=>{O--,0===O&&!X&&!H&&(S=mt(je,h))}),jt.subscribe(Lt),!v&&O>0&&(v=new it.Hp({next:on=>jt.next(on),error:on=>{X=!0,ce(),S=mt(ve,o,on),jt.error(on)},complete:()=>{H=!0,ce(),S=mt(ve,u),jt.complete()}}),(0,B.Xf)(ft).subscribe(v))})(m)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const h=o instanceof su;if(!this._injector.get(Fp).done)throw!h&&il(o),new Je(405,false);let v;v=h?o:this._injector.get(Pd).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const S=function JE(i){return i.isBoundToModule}(v)?void 0:this._injector.get(mc),O=v.create(Zl.NULL,[],u||v.selector,S),H=O.location.nativeElement,X=O.injector.get(cx,null);return X?.registerApplication(H),O.onDestroy(()=>{this.detachView(O.hostView),Ay(this.components,O),X?.unregisterApplication(H)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new Je(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ay(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Da,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ay(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Je(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(o){return new(o||i)(Xi(Ws),Xi(Z),Xi(cu))},i.\u0275prov=Jn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ay(i,r){const o=i.indexOf(r);o>-1&&i.splice(o,1)}let sS=!0;function rD(){sS=!1}let Nh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bp,i})();function Bp(i){return function sD(i,r,o){if(Js(i)&&!o){const u=Vt(i.index,r);return new jd(u,u)}return 47&i.type?new jd(r[16],r):null}(Ti(),et(),16==(16&i))}class uS{constructor(){}supports(r){return qd(r)}create(r){return new uD(r)}}const gx=(i,r)=>r;class uD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||gx}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,h=0,m=null;for(;o||u;){const v=!u||o&&o.currentIndex<hS(u,h,m)?o:u,S=hS(v,h,m),C=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(o=o._next,null==v.previousIndex)h++;else{m||(m=[]);const O=S-h,H=C-h;if(O!=H){for(let ce=0;ce<O;ce++){const ve=ce<m.length?m[ce]:m[ce]=0,je=ve+ce;H<=je&&je<O&&(m[ce]=ve+1)}m[v.previousIndex]=H-O}}S!==C&&r(v,S,C)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!qd(r))throw new Je(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,m,v,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)m=r[S],v=this._trackByFn(S,m),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,m,v,S)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,v,S),u=!0),o=o._next}else h=0,function ow(i,r){if(Array.isArray(i))for(let o=0;o<i.length;o++)r(i[o]);else{const o=i[nc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,S=>{v=this._trackByFn(h,S),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,S,v,h)),Object.is(o.item,S)||this._addIdentityChange(o,S)):(o=this._mismatch(o,S,v,h),u=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,h){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,m,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,m,h)):r=this._addAfter(new dD(o,u),m,h),r}_verifyReinsertion(r,o,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?r=this._reinsertAfter(m,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,m=r._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new dS),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dS),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class dD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yx{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class dS{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new yx,this.map.set(o,u)),u.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hS(i,r,o){const u=i.previousIndex;if(null===u)return u;let h=0;return o&&u<o.length&&(h=o[u]),u+r+h}class fS{constructor(){}supports(r){return r instanceof Map||vg(r)}create(){return new hD}}class hD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||vg(r)))throw new Je(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const m=this._getOrCreateRecordForKey(h,u);o=this._insertBeforeOrAppend(o,m)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const u=new fD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class fD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pS(){return new vx([new uS])}let vx=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const h=u.factories.slice();o=o.concat(h)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||pS()),deps:[[i,new Xc,new qc]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(null!=u)return u;throw new Je(901,!1)}}return i.\u0275prov=Jn({token:i,providedIn:"root",factory:pS}),i})();function Qu(){return new Sc([new fS])}let Sc=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const h=u.factories.slice();o=o.concat(h)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Qu()),deps:[[i,new Xc,new qc]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(u)return u;throw new Je(901,!1)}}return i.\u0275prov=Jn({token:i,providedIn:"root",factory:Qu}),i})();const gD=Ty(null,"core",[]);let yD=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(Xi(Cy))},i.\u0275mod=Wo({type:i}),i.\u0275inj=ns({}),i})();function vD(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},1481:(Xt,Be,W)=>{W.d(Be,{Dx:()=>oe,b2:()=>Yi,q6:()=>js,se:()=>xe});var L=W(6895),B=W(8256);class Re extends L.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ae extends Re{static makeCurrent(){(0,L.HT)(new Ae)}onAndCancel(le,ne,ye){return le.addEventListener(ne,ye,!1),()=>{le.removeEventListener(ne,ye,!1)}}dispatchEvent(le,ne){le.dispatchEvent(ne)}remove(le){le.parentNode&&le.parentNode.removeChild(le)}createElement(le,ne){return(ne=ne||this.getDefaultDocument()).createElement(le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(le){return le.nodeType===Node.ELEMENT_NODE}isShadowRoot(le){return le instanceof DocumentFragment}getGlobalEventTarget(le,ne){return"window"===ne?window:"document"===ne?le:"body"===ne?le.body:null}getBaseHref(le){const ne=function Ge(){return Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null}();return null==ne?null:function Ne(fe){Xe=Xe||document.createElement("a"),Xe.setAttribute("href",fe);const le=Xe.pathname;return"/"===le.charAt(0)?le:`/${le}`}(ne)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(le){return(0,L.Mx)(document.cookie,le)}}let Xe,Te=null;const gt=new B.OlP("TRANSITION_ID"),Y=[{provide:B.ip1,useFactory:function it(fe,le,ne){return()=>{ne.get(B.CZH).donePromise.then(()=>{const ye=(0,L.q)(),$e=le.querySelectorAll(`style[ng-transition="${fe}"]`);for(let ze=0;ze<$e.length;ze++)ye.remove($e[ze])})}},deps:[gt,L.K0,B.zs3],multi:!0}];let mt=(()=>{class fe{build(){return new XMLHttpRequest}}return fe.\u0275fac=function(ne){return new(ne||fe)},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const at=new B.OlP("EventManagerPlugins");let Ze=(()=>{class fe{constructor(ne,ye){this._zone=ye,this._eventNameToPlugin=new Map,ne.forEach($e=>$e.manager=this),this._plugins=ne.slice().reverse()}addEventListener(ne,ye,$e){return this._findPluginFor(ye).addEventListener(ne,ye,$e)}addGlobalEventListener(ne,ye,$e){return this._findPluginFor(ye).addGlobalEventListener(ne,ye,$e)}getZone(){return this._zone}_findPluginFor(ne){const ye=this._eventNameToPlugin.get(ne);if(ye)return ye;const $e=this._plugins;for(let ze=0;ze<$e.length;ze++){const Pt=$e[ze];if(Pt.supports(ne))return this._eventNameToPlugin.set(ne,Pt),Pt}throw new Error(`No event manager plugin found for event ${ne}`)}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(at),B.LFG(B.R0b))},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class Zt{constructor(le){this._doc=le}addGlobalEventListener(le,ne,ye){const $e=(0,L.q)().getGlobalEventTarget(this._doc,le);if(!$e)throw new Error(`Unsupported event target ${$e} for event ${ne}`);return this.addEventListener($e,ne,ye)}}let sn=(()=>{class fe{constructor(){this._stylesSet=new Set}addStyles(ne){const ye=new Set;ne.forEach($e=>{this._stylesSet.has($e)||(this._stylesSet.add($e),ye.add($e))}),this.onStylesAdded(ye)}onStylesAdded(ne){}getAllStyles(){return Array.from(this._stylesSet)}}return fe.\u0275fac=function(ne){return new(ne||fe)},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})(),xn=(()=>{class fe extends sn{constructor(ne){super(),this._doc=ne,this._hostNodes=new Map,this._hostNodes.set(ne.head,[])}_addStylesToHost(ne,ye,$e){ne.forEach(ze=>{const Pt=this._doc.createElement("style");Pt.textContent=ze,$e.push(ye.appendChild(Pt))})}addHost(ne){const ye=[];this._addStylesToHost(this._stylesSet,ne,ye),this._hostNodes.set(ne,ye)}removeHost(ne){const ye=this._hostNodes.get(ne);ye&&ye.forEach(Hn),this._hostNodes.delete(ne)}onStylesAdded(ne){this._hostNodes.forEach((ye,$e)=>{this._addStylesToHost(ne,$e,ye)})}ngOnDestroy(){this._hostNodes.forEach(ne=>ne.forEach(Hn))}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(L.K0))},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();function Hn(fe){(0,L.q)().remove(fe)}const Ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ot=/%COMP%/g;function me(fe,le,ne){for(let ye=0;ye<le.length;ye++){let $e=le[ye];Array.isArray($e)?me(fe,$e,ne):($e=$e.replace(Ot,fe),ne.push($e))}return ne}function _e(fe){return le=>{if("__ngUnwrap__"===le)return fe;!1===fe(le)&&(le.preventDefault(),le.returnValue=!1)}}let xe=(()=>{class fe{constructor(ne,ye,$e){this.eventManager=ne,this.sharedStylesHost=ye,this.appId=$e,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(ne)}createRenderer(ne,ye){if(!ne||!ye)return this.defaultRenderer;switch(ye.encapsulation){case B.ifc.Emulated:{let $e=this.rendererByCompId.get(ye.id);return $e||($e=new Ei(this.eventManager,this.sharedStylesHost,ye,this.appId),this.rendererByCompId.set(ye.id,$e)),$e.applyToHost(ne),$e}case 1:case B.ifc.ShadowDom:return new Mn(this.eventManager,this.sharedStylesHost,ne,ye);default:if(!this.rendererByCompId.has(ye.id)){const $e=me(ye.id,ye.styles,[]);this.sharedStylesHost.addStyles($e),this.rendererByCompId.set(ye.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(Ze),B.LFG(xn),B.LFG(B.AFp))},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class Mt{constructor(le){this.eventManager=le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(le,ne){return ne?document.createElementNS(Ut[ne]||ne,le):document.createElement(le)}createComment(le){return document.createComment(le)}createText(le){return document.createTextNode(le)}appendChild(le,ne){(bn(le)?le.content:le).appendChild(ne)}insertBefore(le,ne,ye){le&&(bn(le)?le.content:le).insertBefore(ne,ye)}removeChild(le,ne){le&&le.removeChild(ne)}selectRootElement(le,ne){let ye="string"==typeof le?document.querySelector(le):le;if(!ye)throw new Error(`The selector "${le}" did not match any elements`);return ne||(ye.textContent=""),ye}parentNode(le){return le.parentNode}nextSibling(le){return le.nextSibling}setAttribute(le,ne,ye,$e){if($e){ne=$e+":"+ne;const ze=Ut[$e];ze?le.setAttributeNS(ze,ne,ye):le.setAttribute(ne,ye)}else le.setAttribute(ne,ye)}removeAttribute(le,ne,ye){if(ye){const $e=Ut[ye];$e?le.removeAttributeNS($e,ne):le.removeAttribute(`${ye}:${ne}`)}else le.removeAttribute(ne)}addClass(le,ne){le.classList.add(ne)}removeClass(le,ne){le.classList.remove(ne)}setStyle(le,ne,ye,$e){$e&(B.JOm.DashCase|B.JOm.Important)?le.style.setProperty(ne,ye,$e&B.JOm.Important?"important":""):le.style[ne]=ye}removeStyle(le,ne,ye){ye&B.JOm.DashCase?le.style.removeProperty(ne):le.style[ne]=""}setProperty(le,ne,ye){le[ne]=ye}setValue(le,ne){le.nodeValue=ne}listen(le,ne,ye){return"string"==typeof le?this.eventManager.addGlobalEventListener(le,ne,_e(ye)):this.eventManager.addEventListener(le,ne,_e(ye))}}function bn(fe){return"TEMPLATE"===fe.tagName&&void 0!==fe.content}class Ei extends Mt{constructor(le,ne,ye,$e){super(le),this.component=ye;const ze=me($e+"-"+ye.id,ye.styles,[]);ne.addStyles(ze),this.contentAttr=function Qe(fe){return"_ngcontent-%COMP%".replace(Ot,fe)}($e+"-"+ye.id),this.hostAttr=function Tt(fe){return"_nghost-%COMP%".replace(Ot,fe)}($e+"-"+ye.id)}applyToHost(le){super.setAttribute(le,this.hostAttr,"")}createElement(le,ne){const ye=super.createElement(le,ne);return super.setAttribute(ye,this.contentAttr,""),ye}}class Mn extends Mt{constructor(le,ne,ye,$e){super(le),this.sharedStylesHost=ne,this.hostEl=ye,this.shadowRoot=ye.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ze=me($e.id,$e.styles,[]);for(let Pt=0;Pt<ze.length;Pt++){const Sn=document.createElement("style");Sn.textContent=ze[Pt],this.shadowRoot.appendChild(Sn)}}nodeOrShadowRoot(le){return le===this.hostEl?this.shadowRoot:le}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(le,ne){return super.appendChild(this.nodeOrShadowRoot(le),ne)}insertBefore(le,ne,ye){return super.insertBefore(this.nodeOrShadowRoot(le),ne,ye)}removeChild(le,ne){return super.removeChild(this.nodeOrShadowRoot(le),ne)}parentNode(le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(le)))}}let ki=(()=>{class fe extends Zt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,ye,$e){return ne.addEventListener(ye,$e,!1),()=>this.removeEventListener(ne,ye,$e)}removeEventListener(ne,ye,$e){return ne.removeEventListener(ye,$e)}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(L.K0))},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const $i=["alt","control","meta","shift"],Oi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ji={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let St=(()=>{class fe extends Zt{constructor(ne){super(ne)}supports(ne){return null!=fe.parseEventName(ne)}addEventListener(ne,ye,$e){const ze=fe.parseEventName(ye),Pt=fe.eventCallback(ze.fullKey,$e,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,L.q)().onAndCancel(ne,ze.domEventName,Pt))}static parseEventName(ne){const ye=ne.toLowerCase().split("."),$e=ye.shift();if(0===ye.length||"keydown"!==$e&&"keyup"!==$e)return null;const ze=fe._normalizeKey(ye.pop());let Pt="";if($i.forEach(ci=>{const Cr=ye.indexOf(ci);Cr>-1&&(ye.splice(Cr,1),Pt+=ci+".")}),Pt+=ze,0!=ye.length||0===ze.length)return null;const Sn={};return Sn.domEventName=$e,Sn.fullKey=Pt,Sn}static getEventFullKey(ne){let ye="",$e=function We(fe){let le=fe.key;if(null==le){if(le=fe.keyIdentifier,null==le)return"Unidentified";le.startsWith("U+")&&(le=String.fromCharCode(parseInt(le.substring(2),16)),3===fe.location&&Ji.hasOwnProperty(le)&&(le=Ji[le]))}return Oi[le]||le}(ne);return $e=$e.toLowerCase()," "===$e?$e="space":"."===$e&&($e="dot"),$i.forEach(ze=>{ze!=$e&&(0,pn[ze])(ne)&&(ye+=ze+".")}),ye+=$e,ye}static eventCallback(ne,ye,$e){return ze=>{fe.getEventFullKey(ze)===ne&&$e.runGuarded(()=>ye(ze))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(L.K0))},fe.\u0275prov=B.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const js=(0,B.eFA)(B._c5,"browser",[{provide:B.Lbi,useValue:L.bD},{provide:B.g9A,useValue:function Jn(){Ae.makeCurrent()},multi:!0},{provide:L.K0,useFactory:function ns(){return(0,B.RDi)(document),document},deps:[]}]),Di=new B.OlP(""),$s=[{provide:B.rWj,useClass:class vt{addToWindow(le){B.dqk.getAngularTestability=(ye,$e=!0)=>{const ze=le.findTestabilityInTree(ye,$e);if(null==ze)throw new Error("Could not find testability for element.");return ze},B.dqk.getAllAngularTestabilities=()=>le.getAllTestabilities(),B.dqk.getAllAngularRootElements=()=>le.getAllRootElements(),B.dqk.frameworkStabilizers||(B.dqk.frameworkStabilizers=[]),B.dqk.frameworkStabilizers.push(ye=>{const $e=B.dqk.getAllAngularTestabilities();let ze=$e.length,Pt=!1;const Sn=function(ci){Pt=Pt||ci,ze--,0==ze&&ye(Pt)};$e.forEach(function(ci){ci.whenStable(Sn)})})}findTestabilityInTree(le,ne,ye){return null==ne?null:le.getTestability(ne)??(ye?(0,L.q)().isShadowRoot(ne)?this.findTestabilityInTree(le,ne.host,!0):this.findTestabilityInTree(le,ne.parentElement,!0):null)}},deps:[]},{provide:B.lri,useClass:B.dDg,deps:[B.R0b,B.eoX,B.rWj]},{provide:B.dDg,useClass:B.dDg,deps:[B.R0b,B.eoX,B.rWj]}],ho=[{provide:B.zSh,useValue:"root"},{provide:B.qLn,useFactory:function Dr(){return new B.qLn},deps:[]},{provide:at,useClass:ki,multi:!0,deps:[L.K0,B.R0b,B.Lbi]},{provide:at,useClass:St,multi:!0,deps:[L.K0]},{provide:xe,useClass:xe,deps:[Ze,xn,B.AFp]},{provide:B.FYo,useExisting:xe},{provide:sn,useExisting:xn},{provide:xn,useClass:xn,deps:[L.K0]},{provide:Ze,useClass:Ze,deps:[at,B.R0b]},{provide:L.JF,useClass:mt,deps:[]},[]];let Yi=(()=>{class fe{constructor(ne){}static withServerTransition(ne){return{ngModule:fe,providers:[{provide:B.AFp,useValue:ne.appId},{provide:gt,useExisting:B.AFp},Y]}}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(Di,12))},fe.\u0275mod=B.oAB({type:fe}),fe.\u0275inj=B.cJS({providers:[...ho,...$s],imports:[L.ez,B.hGG]}),fe})(),oe=(()=>{class fe{constructor(ne){this._doc=ne}getTitle(){return this._doc.title}setTitle(ne){this._doc.title=ne||""}}return fe.\u0275fac=function(ne){return new(ne||fe)(B.LFG(L.K0))},fe.\u0275prov=B.Yz7({token:fe,factory:function(ne){let ye=null;return ye=ne?new ne:function Me(){return new oe((0,B.LFG)(L.K0))}(),ye},providedIn:"root"}),fe})();typeof window<"u"&&window},7121:(Xt,Be,W)=>{W.d(Be,{gz:()=>As,F0:()=>dr,Bz:()=>za,lC:()=>R});var L=W(8256);const Re=(0,W(3888).d)(b=>function(){b(this),this.name="EmptyError",this.message="no elements in sequence"});var Ae=W(9751),Te=W(4742),Ge=W(2076),Xe=W(4671),Ne=W(3268),gt=W(3269),it=W(1810),Y=W(5403),vt=W(9672);function mt(...b){const w=(0,gt.yG)(b),_=(0,gt.jO)(b),{args:A,keys:I}=(0,Te.D)(b);if(0===A.length)return(0,Ge.D)([],w);const V=new Ae.y(function at(b,w,_=Xe.y){return A=>{Ze(w,()=>{const{length:I}=b,V=new Array(I);let K=I,re=I;for(let Ce=0;Ce<I;Ce++)Ze(w,()=>{const bt=(0,Ge.D)(b[Ce],w);let Pn=!1;bt.subscribe((0,Y.x)(A,zt=>{V[Ce]=zt,Pn||(Pn=!0,re--),re||A.next(_(V.slice()))},()=>{--K||A.complete()}))},A)},A)}}(A,w,I?K=>(0,it.n)(I,K):Xe.y));return _?V.pipe((0,Ne.Z)(_)):V}function Ze(b,w,_){b?(0,vt.f)(_,b,w):w()}var Zt=W(8421);function sn(b){return new Ae.y(w=>{(0,Zt.Xf)(b()).subscribe(w)})}var xn=W(727),Hn=W(4482);function Ut(){return(0,Hn.e)((b,w)=>{let _=null;b._refCount++;const A=(0,Y.x)(w,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(_=null);const I=b._connection,V=_;_=null,I&&(!V||I===V)&&I.unsubscribe(),w.unsubscribe()});b.subscribe(A),A.closed||(_=b.connect())})}class Ot extends Ae.y{constructor(w,_){super(),this.source=w,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new xn.w0;const _=this.getSubject();w.add(this.source.subscribe((0,Y.x)(_,void 0,()=>{this._teardown(),_.complete()},A=>{this._teardown(),_.error(A)},()=>this._teardown()))),w.closed&&(this._connection=null,w=xn.w0.EMPTY)}return w}refCount(){return Ut()(this)}}var Le=W(9646),Je=W(1135),Dn=W(7272),ct=W(9635),Qe=W(2843),Tt=W(515),me=W(7579),_e=W(6895),xe=W(9300),Mt=W(5698);function _t(b){return(0,Hn.e)((w,_)=>{let A=!1;w.subscribe((0,Y.x)(_,I=>{A=!0,_.next(I)},()=>{A||_.next(b),_.complete()}))})}function Jt(b=bn){return(0,Hn.e)((w,_)=>{let A=!1;w.subscribe((0,Y.x)(_,I=>{A=!0,_.next(I)},()=>A?_.complete():_.error(b())))})}function bn(){return new Re}function Ei(b,w){const _=arguments.length>=2;return A=>A.pipe(b?(0,xe.h)((I,V)=>b(I,V,A)):Xe.y,(0,Mt.q)(1),_?_t(w):Jt(()=>new Re))}function Mn(b,w,_,A,I){return(V,K)=>{let re=_,Ce=w,bt=0;V.subscribe((0,Y.x)(K,Pn=>{const zt=bt++;Ce=re?b(Ce,Pn,zt):(re=!0,Pn),A&&K.next(Ce)},I&&(()=>{re&&K.next(Ce),K.complete()})))}}function ki(b,w){return(0,Hn.e)(Mn(b,w,arguments.length>=2,!0))}function $i(b){return b<=0?()=>Tt.E:(0,Hn.e)((w,_)=>{let A=[];w.subscribe((0,Y.x)(_,I=>{A.push(I),b<A.length&&A.shift()},()=>{for(const I of A)_.next(I);_.complete()},void 0,()=>{A=null}))})}function Zn(b,w){const _=arguments.length>=2;return A=>A.pipe(b?(0,xe.h)((I,V)=>b(I,V,A)):Xe.y,$i(1),_?_t(w):Jt(()=>new Re))}function Ji(b){return(0,Hn.e)((w,_)=>{try{w.subscribe(_)}finally{_.add(b)}})}var pn=W(4004),St=W(3900),We=W(5577),Nt=W(4351),Wt=W(8505),ii=W(262),Jn=W(9718),Dr=W(8189),ns=W(1481);const mn="primary";class js{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_[0]:_}return null}getAll(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Di(b){return new js(b)}function $s(b,w,_){const A=_.path.split("/");if(A.length>b.length||"full"===_.pathMatch&&(w.hasChildren()||A.length<b.length))return null;const I={};for(let V=0;V<A.length;V++){const K=A[V],re=b[V];if(K.startsWith(":"))I[K.substring(1)]=re;else if(K!==re.path)return null}return{consumed:b.slice(0,A.length),posParams:I}}function Yi(b,w){const _=b?Object.keys(b):void 0,A=w?Object.keys(w):void 0;if(!_||!A||_.length!=A.length)return!1;let I;for(let V=0;V<_.length;V++)if(I=_[V],!Ys(b[I],w[I]))return!1;return!0}function Ys(b,w){if(Array.isArray(b)&&Array.isArray(w)){if(b.length!==w.length)return!1;const _=[...b].sort(),A=[...w].sort();return _.every((I,V)=>A[V]===I)}return b===w}function Go(b){return Array.prototype.concat.apply([],b)}function ws(b){return b.length>0?b[b.length-1]:null}function oe(b,w){for(const _ in b)b.hasOwnProperty(_)&&w(b[_],_)}function ie(b){return(0,L.CqO)(b)?b:(0,L.QGY)(b)?(0,Ge.D)(Promise.resolve(b)):(0,Le.of)(b)}const ln={exact:function Ni(b,w,_){if(!ar(b.segments,w.segments)||!Qn(b.segments,w.segments,_)||b.numberOfChildren!==w.numberOfChildren)return!1;for(const A in w.children)if(!b.children[A]||!Ni(b.children[A],w.children[A],_))return!1;return!0},subset:Vn},dn={exact:function en(b,w){return Yi(b,w)},subset:function Tn(b,w){return Object.keys(w).length<=Object.keys(b).length&&Object.keys(w).every(_=>Ys(b[_],w[_]))},ignored:()=>!0};function gn(b,w,_){return ln[_.paths](b.root,w.root,_.matrixParams)&&dn[_.queryParams](b.queryParams,w.queryParams)&&!("exact"===_.fragment&&b.fragment!==w.fragment)}function Vn(b,w,_){return Cn(b,w,w.segments,_)}function Cn(b,w,_,A){if(b.segments.length>_.length){const I=b.segments.slice(0,_.length);return!(!ar(I,_)||w.hasChildren()||!Qn(I,_,A))}if(b.segments.length===_.length){if(!ar(b.segments,_)||!Qn(b.segments,_,A))return!1;for(const I in w.children)if(!b.children[I]||!Vn(b.children[I],w.children[I],A))return!1;return!0}{const I=_.slice(0,b.segments.length),V=_.slice(b.segments.length);return!!(ar(b.segments,I)&&Qn(b.segments,I,A)&&b.children[mn])&&Cn(b.children[mn],w,V,A)}}function Qn(b,w,_){return w.every((A,I)=>dn[_](b[I].parameters,A.parameters))}class Bn{constructor(w,_,A){this.root=w,this.queryParams=_,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Di(this.queryParams)),this._queryParamMap}toString(){return ol.serialize(this)}}class Rt{constructor(w,_){this.segments=w,this.children=_,this.parent=null,oe(_,(A,I)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qs(this)}}class Ri{constructor(w,_){this.path=w,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Di(this.parameters)),this._parameterMap}toString(){return Yr(this)}}function ar(b,w){return b.length===w.length&&b.every((_,A)=>_.path===w[A].path)}let Qi=(()=>{class b{}return b.\u0275fac=function(_){return new(_||b)},b.\u0275prov=L.Yz7({token:b,factory:function(){return new Tr},providedIn:"root"}),b})();class Tr{parse(w){const _=new ci(w);return new Bn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(w){const _=`/${Xs(w.root,!0)}`,A=function le(b){const w=Object.keys(b).map(_=>{const A=b[_];return Array.isArray(A)?A.map(I=>`${mo(_)}=${mo(I)}`).join("&"):`${mo(_)}=${mo(A)}`}).filter(_=>!!_);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${_}${A}${"string"==typeof w.fragment?`#${function Wo(b){return encodeURI(b)}(w.fragment)}`:""}`}}const ol=new Tr;function qs(b){return b.segments.map(w=>Yr(w)).join("/")}function Xs(b,w){if(!b.hasChildren())return qs(b);if(w){const _=b.children[mn]?Xs(b.children[mn],!1):"",A=[];return oe(b.children,(I,V)=>{V!==mn&&A.push(`${V}:${Xs(I,!1)}`)}),A.length>0?`${_}(${A.join("//")})`:_}{const _=function fo(b,w){let _=[];return oe(b.children,(A,I)=>{I===mn&&(_=_.concat(w(A,I)))}),oe(b.children,(A,I)=>{I!==mn&&(_=_.concat(w(A,I)))}),_}(b,(A,I)=>I===mn?[Xs(b.children[mn],!1)]:[`${I}:${Xs(A,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[mn]?`${qs(b)}/${_[0]}`:`${qs(b)}/(${_.join("//")})`}}function po(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mo(b){return po(b).replace(/%3B/gi,";")}function jo(b){return po(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ms(b){return decodeURIComponent(b)}function is(b){return Ms(b.replace(/\+/g,"%20"))}function Yr(b){return`${jo(b.path)}${function fe(b){return Object.keys(b).map(w=>`;${jo(w)}=${jo(b[w])}`).join("")}(b.parameters)}`}const ne=/^[^\/()?;=#]+/;function ye(b){const w=b.match(ne);return w?w[0]:""}const $e=/^[^=?&#]+/,Pt=/^[^&#]+/;class ci{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(w.length>0||Object.keys(_).length>0)&&(A[mn]=new Rt(w,_)),A}parseSegment(){const w=ye(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new L.vHH(4009,!1);return this.capture(w),new Ri(Ms(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const _=ye(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const I=ye(this.remaining);I&&(A=I,this.capture(A))}w[Ms(_)]=Ms(A)}parseQueryParam(w){const _=function ze(b){const w=b.match($e);return w?w[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const K=function Sn(b){const w=b.match(Pt);return w?w[0]:""}(this.remaining);K&&(A=K,this.capture(A))}const I=is(_),V=is(A);if(w.hasOwnProperty(I)){let K=w[I];Array.isArray(K)||(K=[K],w[I]=K),K.push(V)}else w[I]=V}parseParens(w){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=ye(this.remaining),I=this.remaining[A.length];if("/"!==I&&")"!==I&&";"!==I)throw new L.vHH(4010,!1);let V;A.indexOf(":")>-1?(V=A.slice(0,A.indexOf(":")),this.capture(V),this.capture(":")):w&&(V=mn);const K=this.parseChildren();_[V]=1===Object.keys(K).length?K[mn]:new Rt([],K),this.consumeOptional("//")}return _}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new L.vHH(4011,!1)}}function Cr(b){return b.segments.length>0?new Rt([],{[mn]:b}):b}function vi(b){const w={};for(const A of Object.keys(b.children)){const V=vi(b.children[A]);(V.segments.length>0||V.hasChildren())&&(w[A]=V)}return function gr(b){if(1===b.numberOfChildren&&b.children[mn]){const w=b.children[mn];return new Rt(b.segments.concat(w.segments),w.children)}return b}(new Rt(b.segments,w))}function ei(b){return b instanceof Bn}function go(b,w,_,A,I){if(0===_.length)return mi(w.root,w.root,w.root,A,I);const V=function lr(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Ds(!0,0,b);let w=0,_=!1;const A=b.reduce((I,V,K)=>{if("object"==typeof V&&null!=V){if(V.outlets){const re={};return oe(V.outlets,(Ce,bt)=>{re[bt]="string"==typeof Ce?Ce.split("/"):Ce}),[...I,{outlets:re}]}if(V.segmentPath)return[...I,V.segmentPath]}return"string"!=typeof V?[...I,V]:0===K?(V.split("/").forEach((re,Ce)=>{0==Ce&&"."===re||(0==Ce&&""===re?_=!0:".."===re?w++:""!=re&&I.push(re))}),I):[...I,V]},[]);return new Ds(_,w,A)}(_);return V.toRoot()?mi(w.root,w.root,new Rt([],{}),A,I):function K(Ce){const bt=function ri(b,w,_,A){if(b.isAbsolute)return new Ur(w.root,!0,0);if(-1===A)return new Ur(_,_===w.root,0);return function yr(b,w,_){let A=b,I=w,V=_;for(;V>I;){if(V-=I,A=A.parent,!A)throw new L.vHH(4005,!1);I=A.segments.length}return new Ur(A,!1,I-V)}(_,A+(Es(b.commands[0])?0:1),b.numberOfDoubleDots)}(V,w,b.snapshot?._urlSegment,Ce),Pn=bt.processChildren?zr(bt.segmentGroup,bt.index,V.commands):os(bt.segmentGroup,bt.index,V.commands);return mi(w.root,bt.segmentGroup,Pn,A,I)}(b.snapshot?._lastPathIndex)}function Es(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function Ar(b){return"object"==typeof b&&null!=b&&b.outlets}function mi(b,w,_,A,I){let K,V={};A&&oe(A,(Ce,bt)=>{V[bt]=Array.isArray(Ce)?Ce.map(Pn=>`${Pn}`):`${Ce}`}),K=b===w?_:ss(b,w,_);const re=Cr(vi(K));return new Bn(re,V,I)}function ss(b,w,_){const A={};return oe(b.children,(I,V)=>{A[V]=I===w?_:ss(I,w,_)}),new Rt(b.segments,A)}class Ds{constructor(w,_,A){if(this.isAbsolute=w,this.numberOfDoubleDots=_,this.commands=A,w&&A.length>0&&Es(A[0]))throw new L.vHH(4003,!1);const I=A.find(Ar);if(I&&I!==ws(A))throw new L.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ur{constructor(w,_,A){this.segmentGroup=w,this.processChildren=_,this.index=A}}function os(b,w,_){if(b||(b=new Rt([],{})),0===b.segments.length&&b.hasChildren())return zr(b,w,_);const A=function Ks(b,w,_){let A=0,I=w;const V={match:!1,pathIndex:0,commandIndex:0};for(;I<b.segments.length;){if(A>=_.length)return V;const K=b.segments[I],re=_[A];if(Ar(re))break;const Ce=`${re}`,bt=A<_.length-1?_[A+1]:null;if(I>0&&void 0===Ce)break;if(Ce&&bt&&"object"==typeof bt&&void 0===bt.outlets){if(!Bh(Ce,bt,K))return V;A+=2}else{if(!Bh(Ce,{},K))return V;A++}I++}return{match:!0,pathIndex:I,commandIndex:A}}(b,w,_),I=_.slice(A.commandIndex);if(A.match&&A.pathIndex<b.segments.length){const V=new Rt(b.segments.slice(0,A.pathIndex),{});return V.children[mn]=new Rt(b.segments.slice(A.pathIndex),b.children),zr(V,0,I)}return A.match&&0===I.length?new Rt(b.segments,{}):A.match&&!b.hasChildren()?Ts(b,w,_):A.match?zr(b,0,I):Ts(b,w,_)}function zr(b,w,_){if(0===_.length)return new Rt(b.segments,{});{const A=function ll(b){return Ar(b[0])?b[0].outlets:{[mn]:b}}(_),I={};return oe(A,(V,K)=>{"string"==typeof V&&(V=[V]),null!==V&&(I[K]=os(b.children[K],w,V))}),oe(b.children,(V,K)=>{void 0===A[K]&&(I[K]=V)}),new Rt(b.segments,I)}}function Ts(b,w,_){const A=b.segments.slice(0,w);let I=0;for(;I<_.length;){const V=_[I];if(Ar(V)){const Ce=Zs(V.outlets);return new Rt(A,Ce)}if(0===I&&Es(_[0])){A.push(new Ri(b.segments[w].path,tr(_[0]))),I++;continue}const K=Ar(V)?V.outlets[mn]:`${V}`,re=I<_.length-1?_[I+1]:null;K&&re&&Es(re)?(A.push(new Ri(K,tr(re))),I+=2):(A.push(new Ri(K,{})),I++)}return new Rt(A,{})}function Zs(b){const w={};return oe(b,(_,A)=>{"string"==typeof _&&(_=[_]),null!==_&&(w[A]=Ts(new Rt([],{}),0,_))}),w}function tr(b){const w={};return oe(b,(_,A)=>w[A]=`${_}`),w}function Bh(b,w,_){return b==_.path&&Yi(w,_.parameters)}class ui{constructor(w,_){this.id=w,this.url=_}}class wr extends ui{constructor(w,_,A="imperative",I=null){super(w,_),this.type=0,this.navigationTrigger=A,this.restoredState=I}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class as extends ui{constructor(w,_,A){super(w,_),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Js extends ui{constructor(w,_,A,I){super(w,_),this.reason=A,this.code=I,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qs extends ui{constructor(w,_,A,I){super(w,_),this.error=A,this.target=I,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _i extends ui{constructor(w,_,A,I){super(w,_),this.urlAfterRedirects=A,this.state=I,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tc extends ui{constructor(w,_,A,I){super(w,_),this.urlAfterRedirects=A,this.state=I,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nd extends ui{constructor(w,_,A,I,V){super(w,_),this.urlAfterRedirects=A,this.state=I,this.shouldActivate=V,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class id extends ui{constructor(w,_,A,I){super(w,_),this.urlAfterRedirects=A,this.state=I,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cl extends ui{constructor(w,_,A,I){super(w,_),this.urlAfterRedirects=A,this.state=I,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rd{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uh{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zh{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hh{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vh{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gh{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sd{constructor(w,_,A){this.routerEvent=w,this.position=_,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ul{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const _=this.pathFromRoot(w);return _.length>1?_[_.length-2]:null}children(w){const _=Aa(w,this._root);return _?_.children.map(A=>A.value):[]}firstChild(w){const _=Aa(w,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(w){const _=$o(w,this._root);return _.length<2?[]:_[_.length-2].children.map(I=>I.value).filter(I=>I!==w)}pathFromRoot(w){return $o(w,this._root).map(_=>_.value)}}function Aa(b,w){if(b===w.value)return w;for(const _ of w.children){const A=Aa(b,_);if(A)return A}return null}function $o(b,w){if(b===w.value)return[w];for(const _ of w.children){const A=$o(b,_);if(A.length)return A.unshift(w),A}return[]}class Cs{constructor(w,_){this.value=w,this.children=_}toString(){return`TreeNode(${this.value})`}}function Yo(b){const w={};return b&&b.children.forEach(_=>w[_.value.outlet]=_),w}class Cc extends ul{constructor(w,_){super(w),this.snapshot=_,Xo(this,w)}toString(){return this.snapshot.toString()}}function dl(b,w){const _=function hl(b,w){const K=new Ir([],{},{},"",{},mn,w,null,b.root,-1,{});return new Ia("",new Cs(K,[]))}(b,w),A=new Je.X([new Ri("",{})]),I=new Je.X({}),V=new Je.X({}),K=new Je.X({}),re=new Je.X(""),Ce=new As(A,I,K,re,V,mn,w,_.root);return Ce.snapshot=_.root,new Cc(new Cs(Ce,[]),_)}class As{constructor(w,_,A,I,V,K,re,Ce){this.url=w,this.params=_,this.queryParams=A,this.fragment=I,this.data=V,this.outlet=K,this.component=re,this._futureSnapshot=Ce}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.U)(w=>Di(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.U)(w=>Di(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fl(b,w="emptyOnly"){const _=b.pathFromRoot;let A=0;if("always"!==w)for(A=_.length-1;A>=1;){const I=_[A],V=_[A-1];if(I.routeConfig&&""===I.routeConfig.path)A--;else{if(V.component)break;A--}}return function qo(b){return b.reduce((w,_)=>({params:{...w.params,..._.params},data:{...w.data,..._.data},resolve:{..._.data,...w.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(A))}class Ir{constructor(w,_,A,I,V,K,re,Ce,bt,Pn,zt,oi){this.url=w,this.params=_,this.queryParams=A,this.fragment=I,this.data=V,this.outlet=K,this.component=re,this.routeConfig=Ce,this._urlSegment=bt,this._lastPathIndex=Pn,this._correctedLastPathIndex=oi??Pn,this._resolve=zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Di(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Di(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ia extends ul{constructor(w,_){super(_),this.url=w,Xo(this,_)}toString(){return Ko(this._root)}}function Xo(b,w){w.value._routerState=b,w.children.forEach(_=>Xo(b,_))}function Ko(b){const w=b.children.length>0?` { ${b.children.map(Ko).join(", ")} } `:"";return`${b.value}${w}`}function pl(b){if(b.snapshot){const w=b.snapshot,_=b._futureSnapshot;b.snapshot=_,Yi(w.queryParams,_.queryParams)||b.queryParams.next(_.queryParams),w.fragment!==_.fragment&&b.fragment.next(_.fragment),Yi(w.params,_.params)||b.params.next(_.params),function ho(b,w){if(b.length!==w.length)return!1;for(let _=0;_<b.length;++_)if(!Yi(b[_],w[_]))return!1;return!0}(w.url,_.url)||b.url.next(_.url),Yi(w.data,_.data)||b.data.next(_.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Ac(b,w){const _=Yi(b.params,w.params)&&function Fi(b,w){return ar(b,w)&&b.every((_,A)=>Yi(_.parameters,w[A].parameters))}(b.url,w.url);return _&&!(!b.parent!=!w.parent)&&(!b.parent||Ac(b.parent,w.parent))}function Pa(b,w,_){if(_&&b.shouldReuseRoute(w.value,_.value.snapshot)){const A=_.value;A._futureSnapshot=w.value;const I=function Wh(b,w,_){return w.children.map(A=>{for(const I of _.children)if(b.shouldReuseRoute(A.value,I.value.snapshot))return Pa(b,A,I);return Pa(b,A)})}(b,w,_);return new Cs(A,I)}{if(b.shouldAttach(w.value)){const V=b.retrieve(w.value);if(null!==V){const K=V.route;return K.value._futureSnapshot=w.value,K.children=w.children.map(re=>Pa(b,re)),K}}const A=function Ic(b){return new As(new Je.X(b.url),new Je.X(b.params),new Je.X(b.queryParams),new Je.X(b.fragment),new Je.X(b.data),b.outlet,b.component,b)}(w.value),I=w.children.map(V=>Pa(b,V));return new Cs(A,I)}}const ml="ngNavigationCancelingError";function vr(b,w){const{redirectTo:_,navigationBehaviorOptions:A}=ei(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,I=Zo(!1,0,w);return I.url=_,I.navigationBehaviorOptions=A,I}function Zo(b,w,_){const A=new Error("NavigationCancelingError: "+(b||""));return A[ml]=!0,A.cancellationCode=w,_&&(A.url=_),A}function od(b){return Jo(b)&&ei(b.url)}function Jo(b){return b&&b[ml]}class ad{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new gl,this.attachRef=null}}let gl=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(_,A){const I=this.getOrCreateContext(_);I.outlet=A,this.contexts.set(_,I)}onChildOutletDestroyed(_){const A=this.getContext(_);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let A=this.getContext(_);return A||(A=new ad,this.contexts.set(_,A)),A}getContext(_){return this.contexts.get(_)||null}}return b.\u0275fac=function(_){return new(_||b)},b.\u0275prov=L.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Mi=!1;let R=(()=>{class b{constructor(_,A,I,V,K){this.parentContexts=_,this.location=A,this.changeDetector=V,this.environmentInjector=K,this.activated=null,this._activatedRoute=null,this.activateEvents=new L.vpe,this.deactivateEvents=new L.vpe,this.attachEvents=new L.vpe,this.detachEvents=new L.vpe,this.name=I||mn,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L.vHH(4012,Mi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L.vHH(4012,Mi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L.vHH(4012,Mi);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,A){this.activated=_,this._activatedRoute=A,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,A){if(this.isActivated)throw new L.vHH(4013,Mi);this._activatedRoute=_;const I=this.location,K=_._futureSnapshot.component,re=this.parentContexts.getOrCreateContext(this.name).children,Ce=new G(_,re,I.injector);if(A&&function P(b){return!!b.resolveComponentFactory}(A)){const bt=A.resolveComponentFactory(K);this.activated=I.createComponent(bt,I.length,Ce)}else this.activated=I.createComponent(K,{index:I.length,injector:Ce,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(_){return new(_||b)(L.Y36(gl),L.Y36(L.s_b),L.$8M("name"),L.Y36(L.sBO),L.Y36(L.lqb))},b.\u0275dir=L.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),b})();class G{constructor(w,_,A){this.route=w,this.childContexts=_,this.parent=A}get(w,_){return w===As?this.route:w===gl?this.childContexts:this.parent.get(w,_)}}let j=(()=>{class b{}return b.\u0275fac=function(_){return new(_||b)},b.\u0275cmp=L.Xpm({type:b,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,A){1&_&&L._UZ(0,"router-outlet")},dependencies:[R],encapsulation:2}),b})();function ue(b,w){return b.providers&&!b._injector&&(b._injector=(0,L.MMx)(b.providers,w,`Route: ${b.path}`)),b._injector??w}function si(b){const w=b.children&&b.children.map(si),_=w?{...b,children:w}:{...b};return!_.component&&!_.loadComponent&&(w||_.loadChildren)&&_.outlet&&_.outlet!==mn&&(_.component=j),_}function Et(b){return b.outlet||mn}function ls(b,w){const _=b.filter(A=>Et(A)===w);return _.push(...b.filter(A=>Et(A)!==w)),_}function Hr(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let w=b.parent;w;w=w.parent){const _=w.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class _o{constructor(w,_,A,I){this.routeReuseStrategy=w,this.futureState=_,this.currState=A,this.forwardEvent=I}activate(w){const _=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,A,w),pl(this.futureState.root),this.activateChildRoutes(_,A,w)}deactivateChildRoutes(w,_,A){const I=Yo(_);w.children.forEach(V=>{const K=V.value.outlet;this.deactivateRoutes(V,I[K],A),delete I[K]}),oe(I,(V,K)=>{this.deactivateRouteAndItsChildren(V,A)})}deactivateRoutes(w,_,A){const I=w.value,V=_?_.value:null;if(I===V)if(I.component){const K=A.getContext(I.outlet);K&&this.deactivateChildRoutes(w,_,K.children)}else this.deactivateChildRoutes(w,_,A);else V&&this.deactivateRouteAndItsChildren(_,A)}deactivateRouteAndItsChildren(w,_){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,_):this.deactivateRouteAndOutlet(w,_)}detachAndStoreRouteSubtree(w,_){const A=_.getContext(w.value.outlet),I=A&&w.value.component?A.children:_,V=Yo(w);for(const K of Object.keys(V))this.deactivateRouteAndItsChildren(V[K],I);if(A&&A.outlet){const K=A.outlet.detach(),re=A.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:K,route:w,contexts:re})}}deactivateRouteAndOutlet(w,_){const A=_.getContext(w.value.outlet),I=A&&w.value.component?A.children:_,V=Yo(w);for(const K of Object.keys(V))this.deactivateRouteAndItsChildren(V[K],I);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(w,_,A){const I=Yo(_);w.children.forEach(V=>{this.activateRoutes(V,I[V.value.outlet],A),this.forwardEvent(new Gh(V.value.snapshot))}),w.children.length&&this.forwardEvent(new Hh(w.value.snapshot))}activateRoutes(w,_,A){const I=w.value,V=_?_.value:null;if(pl(I),I===V)if(I.component){const K=A.getOrCreateContext(I.outlet);this.activateChildRoutes(w,_,K.children)}else this.activateChildRoutes(w,_,A);else if(I.component){const K=A.getOrCreateContext(I.outlet);if(this.routeReuseStrategy.shouldAttach(I.snapshot)){const re=this.routeReuseStrategy.retrieve(I.snapshot);this.routeReuseStrategy.store(I.snapshot,null),K.children.onOutletReAttached(re.contexts),K.attachRef=re.componentRef,K.route=re.route.value,K.outlet&&K.outlet.attach(re.componentRef,re.route.value),pl(re.route.value),this.activateChildRoutes(w,null,K.children)}else{const re=Hr(I.snapshot),Ce=re?.get(L._Vd)??null;K.attachRef=null,K.route=I,K.resolver=Ce,K.injector=re,K.outlet&&K.outlet.activateWith(I,K.injector),this.activateChildRoutes(w,null,K.children)}}else this.activateChildRoutes(w,null,A)}}class yl{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class cs{constructor(w,_){this.component=w,this.route=_}}function Rc(b,w,_){const A=b._root;return Un(A,w?w._root:null,_,[A.value])}function et(b,w,_){return(Hr(w)??_).get(b)}function Un(b,w,_,A,I={canDeactivateChecks:[],canActivateChecks:[]}){const V=Yo(w);return b.children.forEach(K=>{(function ld(b,w,_,A,I={canDeactivateChecks:[],canActivateChecks:[]}){const V=b.value,K=w?w.value:null,re=_?_.getContext(b.value.outlet):null;if(K&&V.routeConfig===K.routeConfig){const Ce=function cd(b,w,_){if("function"==typeof _)return _(b,w);switch(_){case"pathParamsChange":return!ar(b.url,w.url);case"pathParamsOrQueryParamsChange":return!ar(b.url,w.url)||!Yi(b.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ac(b,w)||!Yi(b.queryParams,w.queryParams);default:return!Ac(b,w)}}(K,V,V.routeConfig.runGuardsAndResolvers);Ce?I.canActivateChecks.push(new yl(A)):(V.data=K.data,V._resolvedData=K._resolvedData),Un(b,w,V.component?re?re.children:null:_,A,I),Ce&&re&&re.outlet&&re.outlet.isActivated&&I.canDeactivateChecks.push(new cs(re.outlet.component,K))}else K&&Ti(w,re,I),I.canActivateChecks.push(new yl(A)),Un(b,null,V.component?re?re.children:null:_,A,I)})(K,V[K.value.outlet],_,A.concat([K.value]),I),delete V[K.value.outlet]}),oe(V,(K,re)=>Ti(K,_.getContext(re),I)),I}function Ti(b,w,_){const A=Yo(b),I=b.value;oe(A,(V,K)=>{Ti(V,I.component?w?w.children.getContext(K):null:w,_)}),_.canDeactivateChecks.push(new cs(I.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,I))}function cr(b){return"function"==typeof b}function ur(b){return b instanceof Re||"EmptyError"===b?.name}const Rr=Symbol("INITIAL_VALUE");function Qo(){return(0,St.w)(b=>mt(b.map(w=>w.pipe((0,Mt.q)(1),function Fe(...b){const w=(0,gt.yG)(b);return(0,Hn.e)((_,A)=>{(w?(0,Dn.z)(b,_,w):(0,Dn.z)(b,_)).subscribe(A)})}(Rr)))).pipe((0,pn.U)(w=>{for(const _ of w)if(!0!==_){if(_===Rr)return Rr;if(!1===_||_ instanceof Bn)return _}return!0}),(0,xe.h)(w=>w!==Rr),(0,Mt.q)(1)))}function Nc(b){return(0,ct.z)((0,Wt.b)(w=>{if(ei(w))throw vr(0,w)}),(0,pn.U)(w=>!0===w))}const Fc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kc(b,w,_,A,I){const V=Bc(b,w,_);return V.matched?function qh(b,w,_,A){const I=w.canMatch;if(!I||0===I.length)return(0,Le.of)(!0);const V=I.map(K=>{const re=b.get(K),Ce=function jh(b){return b&&cr(b.canMatch)}(re)?re.canMatch(w,_):re(w,_);return ie(Ce)});return(0,Le.of)(V).pipe(Qo(),Nc())}(A=ue(w,A),w,_).pipe((0,pn.U)(K=>!0===K?V:{...Fc})):(0,Le.of)(V)}function Bc(b,w,_){if(""===w.path)return"full"===w.pathMatch&&(b.hasChildren()||_.length>0)?{...Fc}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const I=(w.matcher||$s)(_,b,w);if(!I)return{...Fc};const V={};oe(I.posParams,(re,Ce)=>{V[Ce]=re.path});const K=I.consumed.length>0?{...V,...I.consumed[I.consumed.length-1].parameters}:V;return{matched:!0,consumedSegments:I.consumed,remainingSegments:_.slice(I.consumed.length),parameters:K,positionalParamSegments:I.posParams??{}}}function vl(b,w,_,A,I="corrected"){if(_.length>0&&function Uc(b,w,_){return _.some(A=>_l(b,w,A)&&Et(A)!==mn)}(b,_,A)){const K=new Rt(w,function Kh(b,w,_,A){const I={};I[mn]=A,A._sourceSegment=b,A._segmentIndexShift=w.length;for(const V of _)if(""===V.path&&Et(V)!==mn){const K=new Rt([],{});K._sourceSegment=b,K._segmentIndexShift=w.length,I[Et(V)]=K}return I}(b,w,A,new Rt(_,b.children)));return K._sourceSegment=b,K._segmentIndexShift=w.length,{segmentGroup:K,slicedSegments:[]}}if(0===_.length&&function hd(b,w,_){return _.some(A=>_l(b,w,A))}(b,_,A)){const K=new Rt(b.segments,function Xh(b,w,_,A,I,V){const K={};for(const re of A)if(_l(b,_,re)&&!I[Et(re)]){const Ce=new Rt([],{});Ce._sourceSegment=b,Ce._segmentIndexShift="legacy"===V?b.segments.length:w.length,K[Et(re)]=Ce}return{...I,...K}}(b,w,_,A,b.children,I));return K._sourceSegment=b,K._segmentIndexShift=w.length,{segmentGroup:K,slicedSegments:_}}const V=new Rt(b.segments,b.children);return V._sourceSegment=b,V._segmentIndexShift=w.length,{segmentGroup:V,slicedSegments:_}}function _l(b,w,_){return(!(b.hasChildren()||w.length>0)||"full"!==_.pathMatch)&&""===_.path}function _r(b,w,_,A){return!!(Et(b)===A||A!==mn&&_l(w,_,b))&&("**"===b.path||Bc(w,b,_).matched)}function xo(b,w,_){return 0===w.length&&!b.children[_]}const Ci=!1;class fd{constructor(w){this.segmentGroup=w||null}}class Oa{constructor(w){this.urlTree=w}}function xl(b){return(0,Qe._)(new fd(b))}function bl(b){return(0,Qe._)(new Oa(b))}class ia{constructor(w,_,A,I,V){this.injector=w,this.configLoader=_,this.urlSerializer=A,this.urlTree=I,this.config=V,this.allowRedirects=!0}apply(){const w=vl(this.urlTree.root,[],[],this.config).segmentGroup,_=new Rt(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,_,mn).pipe((0,pn.U)(V=>this.createUrlTree(vi(V),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,ii.K)(V=>{if(V instanceof Oa)return this.allowRedirects=!1,this.match(V.urlTree);throw V instanceof fd?this.noMatchError(V):V}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,mn).pipe((0,pn.U)(I=>this.createUrlTree(vi(I),w.queryParams,w.fragment))).pipe((0,ii.K)(I=>{throw I instanceof fd?this.noMatchError(I):I}))}noMatchError(w){return new L.vHH(4002,Ci)}createUrlTree(w,_,A){const I=Cr(w);return new Bn(I,_,A)}expandSegmentGroup(w,_,A,I){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(w,_,A).pipe((0,pn.U)(V=>new Rt([],V))):this.expandSegment(w,A,_,A.segments,I,!0)}expandChildren(w,_,A){const I=[];for(const V of Object.keys(A.children))"primary"===V?I.unshift(V):I.push(V);return(0,Ge.D)(I).pipe((0,Nt.b)(V=>{const K=A.children[V],re=ls(_,V);return this.expandSegmentGroup(w,re,K,V).pipe((0,pn.U)(Ce=>({segment:Ce,outlet:V})))}),ki((V,K)=>(V[K.outlet]=K.segment,V),{}),Zn())}expandSegment(w,_,A,I,V,K){return(0,Ge.D)(A).pipe((0,Nt.b)(re=>this.expandSegmentAgainstRoute(w,_,A,re,I,V,K).pipe((0,ii.K)(bt=>{if(bt instanceof fd)return(0,Le.of)(null);throw bt}))),Ei(re=>!!re),(0,ii.K)((re,Ce)=>{if(ur(re))return xo(_,I,V)?(0,Le.of)(new Rt([],{})):xl(_);throw re}))}expandSegmentAgainstRoute(w,_,A,I,V,K,re){return _r(I,_,V,K)?void 0===I.redirectTo?this.matchSegmentAgainstRoute(w,_,I,V,K):re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,_,A,I,V,K):xl(_):xl(_)}expandSegmentAgainstRouteUsingRedirect(w,_,A,I,V,K){return"**"===I.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,A,I,K):this.expandRegularSegmentAgainstRouteUsingRedirect(w,_,A,I,V,K)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,_,A,I){const V=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?bl(V):this.lineralizeSegments(A,V).pipe((0,We.z)(K=>{const re=new Rt(K,{});return this.expandSegment(w,re,_,K,I,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,_,A,I,V,K){const{matched:re,consumedSegments:Ce,remainingSegments:bt,positionalParamSegments:Pn}=Bc(_,I,V);if(!re)return xl(_);const zt=this.applyRedirectCommands(Ce,I.redirectTo,Pn);return I.redirectTo.startsWith("/")?bl(zt):this.lineralizeSegments(I,zt).pipe((0,We.z)(oi=>this.expandSegment(w,_,A,oi.concat(bt),K,!1)))}matchSegmentAgainstRoute(w,_,A,I,V){return"**"===A.path?(w=ue(A,w),A.loadChildren?(A._loadedRoutes?(0,Le.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(w,A)).pipe((0,pn.U)(re=>(A._loadedRoutes=re.routes,A._loadedInjector=re.injector,new Rt(I,{})))):(0,Le.of)(new Rt(I,{}))):kc(_,A,I,w).pipe((0,St.w)(({matched:K,consumedSegments:re,remainingSegments:Ce})=>K?this.getChildConfig(w=A._injector??w,A,I).pipe((0,We.z)(Pn=>{const zt=Pn.injector??w,oi=Pn.routes,{segmentGroup:Lr,slicedSegments:qi}=vl(_,re,Ce,oi),da=new Rt(Lr.segments,Lr.children);if(0===qi.length&&da.hasChildren())return this.expandChildren(zt,oi,da).pipe((0,pn.U)(jc=>new Rt(re,jc)));if(0===oi.length&&0===qi.length)return(0,Le.of)(new Rt(re,{}));const ps=Et(A)===V;return this.expandSegment(zt,da,oi,qi,ps?mn:V,!0).pipe((0,pn.U)(Kr=>new Rt(re.concat(Kr.segments),Kr.children)))})):xl(_)))}getChildConfig(w,_,A){return _.children?(0,Le.of)({routes:_.children,injector:w}):_.loadChildren?void 0!==_._loadedRoutes?(0,Le.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function dd(b,w,_,A){const I=w.canLoad;if(void 0===I||0===I.length)return(0,Le.of)(!0);const V=I.map(K=>{const re=b.get(K),Ce=function Rs(b){return b&&cr(b.canLoad)}(re)?re.canLoad(w,_):re(w,_);return ie(Ce)});return(0,Le.of)(V).pipe(Qo(),Nc())}(w,_,A).pipe((0,We.z)(I=>I?this.configLoader.loadChildren(w,_).pipe((0,Wt.b)(V=>{_._loadedRoutes=V.routes,_._loadedInjector=V.injector})):function wl(b){return(0,Qe._)(Zo(Ci,3))}())):(0,Le.of)({routes:[],injector:w})}lineralizeSegments(w,_){let A=[],I=_.root;for(;;){if(A=A.concat(I.segments),0===I.numberOfChildren)return(0,Le.of)(A);if(I.numberOfChildren>1||!I.children[mn])return(0,Qe._)(new L.vHH(4e3,Ci));I=I.children[mn]}}applyRedirectCommands(w,_,A){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),w,A)}applyRedirectCreateUrlTree(w,_,A,I){const V=this.createSegmentGroup(w,_.root,A,I);return new Bn(V,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(w,_){const A={};return oe(w,(I,V)=>{if("string"==typeof I&&I.startsWith(":")){const re=I.substring(1);A[V]=_[re]}else A[V]=I}),A}createSegmentGroup(w,_,A,I){const V=this.createSegments(w,_.segments,A,I);let K={};return oe(_.children,(re,Ce)=>{K[Ce]=this.createSegmentGroup(w,re,A,I)}),new Rt(V,K)}createSegments(w,_,A,I){return _.map(V=>V.path.startsWith(":")?this.findPosParam(w,V,I):this.findOrReturn(V,A))}findPosParam(w,_,A){const I=A[_.path.substring(1)];if(!I)throw new L.vHH(4001,Ci);return I}findOrReturn(w,_){let A=0;for(const I of _){if(I.path===w.path)return _.splice(A),I;A++}return w}}class bo{}class Ml{constructor(w,_,A,I,V,K,re,Ce){this.injector=w,this.rootComponentType=_,this.config=A,this.urlTree=I,this.url=V,this.paramsInheritanceStrategy=K,this.relativeLinkResolution=re,this.urlSerializer=Ce}recognize(){const w=vl(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,mn).pipe((0,pn.U)(_=>{if(null===_)return null;const A=new Ir([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},mn,this.rootComponentType,null,this.urlTree.root,-1,{}),I=new Cs(A,_),V=new Ia(this.url,I);return this.inheritParamsAndData(V._root),V}))}inheritParamsAndData(w){const _=w.value,A=fl(_,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data),w.children.forEach(I=>this.inheritParamsAndData(I))}processSegmentGroup(w,_,A,I){return 0===A.segments.length&&A.hasChildren()?this.processChildren(w,_,A):this.processSegment(w,_,A,A.segments,I)}processChildren(w,_,A){return(0,Ge.D)(Object.keys(A.children)).pipe((0,Nt.b)(I=>{const V=A.children[I],K=ls(_,I);return this.processSegmentGroup(w,K,V,I)}),ki((I,V)=>I&&V?(I.push(...V),I):null),function Oi(b,w=!1){return(0,Hn.e)((_,A)=>{let I=0;_.subscribe((0,Y.x)(A,V=>{const K=b(V,I++);(K||w)&&A.next(V),!K&&A.complete()}))})}(I=>null!==I),_t(null),Zn(),(0,pn.U)(I=>{if(null===I)return null;const V=ka(I);return function Yp(b){b.sort((w,_)=>w.value.outlet===mn?-1:_.value.outlet===mn?1:w.value.outlet.localeCompare(_.value.outlet))}(V),V}))}processSegment(w,_,A,I,V){return(0,Ge.D)(_).pipe((0,Nt.b)(K=>this.processSegmentAgainstRoute(K._injector??w,K,A,I,V)),Ei(K=>!!K),(0,ii.K)(K=>{if(ur(K))return xo(A,I,V)?(0,Le.of)([]):(0,Le.of)(null);throw K}))}processSegmentAgainstRoute(w,_,A,I,V){if(_.redirectTo||!_r(_,A,I,V))return(0,Le.of)(null);let K;if("**"===_.path){const re=I.length>0?ws(I).parameters:{},Ce=qp(A)+I.length,bt=new Ir(I,re,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,El(_),Et(_),_.component??_._loadedComponent??null,_,sa(A),Ce,Qh(_),Ce);K=(0,Le.of)({snapshot:bt,consumedSegments:[],remainingSegments:[]})}else K=kc(A,_,I,w).pipe((0,pn.U)(({matched:re,consumedSegments:Ce,remainingSegments:bt,parameters:Pn})=>{if(!re)return null;const zt=qp(A)+Ce.length;return{snapshot:new Ir(Ce,Pn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,El(_),Et(_),_.component??_._loadedComponent??null,_,sa(A),zt,Qh(_),zt),consumedSegments:Ce,remainingSegments:bt}}));return K.pipe((0,St.w)(re=>{if(null===re)return(0,Le.of)(null);const{snapshot:Ce,consumedSegments:bt,remainingSegments:Pn}=re;w=_._injector??w;const zt=_._loadedInjector??w,oi=function Zh(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(_),{segmentGroup:Lr,slicedSegments:qi}=vl(A,bt,Pn,oi.filter(ps=>void 0===ps.redirectTo),this.relativeLinkResolution);if(0===qi.length&&Lr.hasChildren())return this.processChildren(zt,oi,Lr).pipe((0,pn.U)(ps=>null===ps?null:[new Cs(Ce,ps)]));if(0===oi.length&&0===qi.length)return(0,Le.of)([new Cs(Ce,[])]);const da=Et(_)===V;return this.processSegment(zt,oi,Lr,qi,da?mn:V).pipe((0,pn.U)(ps=>null===ps?null:[new Cs(Ce,ps)]))}))}}function Sl(b){const w=b.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function ka(b){const w=[],_=new Set;for(const A of b){if(!Sl(A)){w.push(A);continue}const I=w.find(V=>A.value.routeConfig===V.value.routeConfig);void 0!==I?(I.children.push(...A.children),_.add(I)):w.push(A)}for(const A of _){const I=ka(A.children);w.push(new Cs(A.value,I))}return w.filter(A=>!_.has(A))}function sa(b){let w=b;for(;w._sourceSegment;)w=w._sourceSegment;return w}function qp(b){let w=b,_=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,_+=w._segmentIndexShift??0;return _-1}function El(b){return b.data||{}}function Qh(b){return b.resolve||{}}const oa=Symbol("RouteTitle");function zc(b){return"string"==typeof b.title||null===b.title}function Dl(b){return(0,St.w)(w=>{const _=b(w);return _?(0,Ge.D)(_).pipe((0,pn.U)(()=>w)):(0,Le.of)(w)})}let Mo=(()=>{class b{buildTitle(_){let A,I=_.root;for(;void 0!==I;)A=this.getResolvedTitleForRoute(I)??A,I=I.children.find(V=>V.outlet===mn);return A}getResolvedTitleForRoute(_){return _.data[oa]}}return b.\u0275fac=function(_){return new(_||b)},b.\u0275prov=L.Yz7({token:b,factory:function(){return(0,L.f3M)(So)},providedIn:"root"}),b})(),So=(()=>{class b extends Mo{constructor(_){super(),this.title=_}updateTitle(_){const A=this.buildTitle(_);void 0!==A&&this.title.setTitle(A)}}return b.\u0275fac=function(_){return new(_||b)(L.LFG(ns.Dx))},b.\u0275prov=L.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class nf{}class Kp extends class hs{shouldDetach(w){return!1}store(w,_){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,_){return w.routeConfig===_.routeConfig}}{}const Tl=new L.OlP("",{providedIn:"root",factory:()=>({})}),aa=new L.OlP("ROUTES");let la=(()=>{class b{constructor(_,A){this.injector=_,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,Le.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const A=ie(_.loadComponent()).pipe((0,Wt.b)(V=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=V}),Ji(()=>{this.componentLoaders.delete(_)})),I=new Ot(A,()=>new me.x).pipe(Ut());return this.componentLoaders.set(_,I),I}loadChildren(_,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,Le.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const V=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,pn.U)(re=>{this.onLoadEndListener&&this.onLoadEndListener(A);let Ce,bt,Pn=!1;Array.isArray(re)?bt=re:(Ce=re.create(_).injector,bt=Go(Ce.get(aa,[],L.XFs.Self|L.XFs.Optional)));return{routes:bt.map(si),injector:Ce}}),Ji(()=>{this.childrenLoaders.delete(A)})),K=new Ot(V,()=>new me.x).pipe(Ut());return this.childrenLoaders.set(A,K),K}loadModuleFactoryOrRoutes(_){return ie(_()).pipe((0,We.z)(A=>A instanceof L.YKP||Array.isArray(A)?(0,Le.of)(A):(0,Ge.D)(this.compiler.compileModuleAsync(A))))}}return b.\u0275fac=function(_){return new(_||b)(L.LFG(L.zs3),L.LFG(L.Sil))},b.\u0275prov=L.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class Zp{}class rf{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,_){return w}}function sf(b){throw b}function pd(b,w,_){return w.parse("/")}const af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lf(){const b=(0,L.f3M)(Qi),w=(0,L.f3M)(gl),_=(0,L.f3M)(_e.Ye),A=(0,L.f3M)(L.zs3),I=(0,L.f3M)(L.Sil),V=(0,L.f3M)(aa,{optional:!0})??[],K=(0,L.f3M)(Tl,{optional:!0})??{},re=(0,L.f3M)(So),Ce=(0,L.f3M)(Mo,{optional:!0}),bt=(0,L.f3M)(Zp,{optional:!0}),Pn=(0,L.f3M)(nf,{optional:!0}),zt=new dr(null,b,w,_,A,I,Go(V));return bt&&(zt.urlHandlingStrategy=bt),Pn&&(zt.routeReuseStrategy=Pn),zt.titleStrategy=Ce??re,function Al(b,w){b.errorHandler&&(w.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(w.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(w.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(w.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(w.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(w.canceledNavigationResolution=b.canceledNavigationResolution)}(K,zt),zt}let dr=(()=>{class b{constructor(_,A,I,V,K,re,Ce){this.rootComponentType=_,this.urlSerializer=A,this.rootContexts=I,this.location=V,this.config=Ce,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new me.x,this.errorHandler=sf,this.malformedUriErrorHandler=pd,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Le.of)(void 0),this.urlHandlingStrategy=new rf,this.routeReuseStrategy=new Kp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=K.get(la),this.configLoader.onLoadEndListener=oi=>this.triggerEvent(new Uh(oi)),this.configLoader.onLoadStartListener=oi=>this.triggerEvent(new rd(oi)),this.ngModule=K.get(L.h0i),this.console=K.get(L.c2e);const zt=K.get(L.R0b);this.isNgZoneEnabled=zt instanceof L.R0b&&L.R0b.isInAngularZone(),this.resetConfig(Ce),this.currentUrlTree=function ht(){return new Bn(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dl(this.currentUrlTree,this.rootComponentType),this.transitions=new Je.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const A=this.events;return _.pipe((0,xe.h)(I=>0!==I.id),(0,pn.U)(I=>({...I,extractedUrl:this.urlHandlingStrategy.extract(I.rawUrl)})),(0,St.w)(I=>{let V=!1,K=!1;return(0,Le.of)(I).pipe((0,Wt.b)(re=>{this.currentNavigation={id:re.id,initialUrl:re.rawUrl,extractedUrl:re.extractedUrl,trigger:re.source,extras:re.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,St.w)(re=>{const Ce=this.browserUrlTree.toString(),bt=!this.navigated||re.extractedUrl.toString()!==Ce||Ce!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||bt)&&this.urlHandlingStrategy.shouldProcessUrl(re.rawUrl))return ca(re.source)&&(this.browserUrlTree=re.extractedUrl),(0,Le.of)(re).pipe((0,St.w)(zt=>{const oi=this.transitions.getValue();return A.next(new wr(zt.id,this.serializeUrl(zt.extractedUrl),zt.source,zt.restoredState)),oi!==this.transitions.getValue()?Tt.E:Promise.resolve(zt)}),function ra(b,w,_,A){return(0,St.w)(I=>function na(b,w,_,A,I){return new ia(b,w,_,A,I).apply()}(b,w,_,I.extractedUrl,A).pipe((0,pn.U)(V=>({...I,urlAfterRedirects:V}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wt.b)(zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:zt.urlAfterRedirects},I.urlAfterRedirects=zt.urlAfterRedirects}),function Xp(b,w,_,A,I,V){return(0,We.z)(K=>function wo(b,w,_,A,I,V,K="emptyOnly",re="legacy"){return new Ml(b,w,_,A,I,K,re,V).recognize().pipe((0,St.w)(Ce=>null===Ce?function $p(b){return new Ae.y(w=>w.error(b))}(new bo):(0,Le.of)(Ce)))}(b,w,_,K.urlAfterRedirects,A.serialize(K.urlAfterRedirects),A,I,V).pipe((0,pn.U)(re=>({...K,targetSnapshot:re}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wt.b)(zt=>{if(I.targetSnapshot=zt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!zt.extras.skipLocationChange){const Lr=this.urlHandlingStrategy.merge(zt.urlAfterRedirects,zt.rawUrl);this.setBrowserUrl(Lr,zt)}this.browserUrlTree=zt.urlAfterRedirects}const oi=new _i(zt.id,this.serializeUrl(zt.extractedUrl),this.serializeUrl(zt.urlAfterRedirects),zt.targetSnapshot);A.next(oi)}));if(bt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:oi,extractedUrl:Lr,source:qi,restoredState:da,extras:ps}=re,Eo=new wr(oi,this.serializeUrl(Lr),qi,da);A.next(Eo);const Kr=dl(Lr,this.rootComponentType).snapshot;return I={...re,targetSnapshot:Kr,urlAfterRedirects:Lr,extras:{...ps,skipLocationChange:!1,replaceUrl:!1}},(0,Le.of)(I)}return this.rawUrlTree=re.rawUrl,re.resolve(null),Tt.E}),(0,Wt.b)(re=>{const Ce=new Tc(re.id,this.serializeUrl(re.extractedUrl),this.serializeUrl(re.urlAfterRedirects),re.targetSnapshot);this.triggerEvent(Ce)}),(0,pn.U)(re=>I={...re,guards:Rc(re.targetSnapshot,re.currentSnapshot,this.rootContexts)}),function ea(b,w){return(0,We.z)(_=>{const{targetSnapshot:A,currentSnapshot:I,guards:{canActivateChecks:V,canDeactivateChecks:K}}=_;return 0===K.length&&0===V.length?(0,Le.of)({..._,guardsResult:!0}):function eo(b,w,_,A){return(0,Ge.D)(b).pipe((0,We.z)(I=>function La(b,w,_,A,I){const V=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!V||0===V.length)return(0,Le.of)(!0);const K=V.map(re=>{const Ce=et(re,w,I);return ie(function zy(b){return b&&cr(b.canDeactivate)}(Ce)?Ce.canDeactivate(b,w,_,A):Ce(b,w,_,A)).pipe(Ei())});return(0,Le.of)(K).pipe(Qo())}(I.component,I.route,_,w,A)),Ei(I=>!0!==I,!0))}(K,A,I,b).pipe((0,We.z)(re=>re&&function Is(b){return"boolean"==typeof b}(re)?function ta(b,w,_,A){return(0,Ge.D)(w).pipe((0,Nt.b)(I=>(0,Dn.z)(function Wp(b,w){return null!==b&&w&&w(new zh(b)),(0,Le.of)(!0)}(I.route.parent,A),function Yh(b,w){return null!==b&&w&&w(new Vh(b)),(0,Le.of)(!0)}(I.route,A),function Oc(b,w,_){const A=w[w.length-1],V=w.slice(0,w.length-1).reverse().map(K=>function Gp(b){const w=b.routeConfig?b.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:b,guards:w}:null}(K)).filter(K=>null!==K).map(K=>sn(()=>{const re=K.guards.map(Ce=>{const bt=et(Ce,K.node,_);return ie(function Pc(b){return b&&cr(b.canActivateChild)}(bt)?bt.canActivateChild(A,b):bt(A,b)).pipe(Ei())});return(0,Le.of)(re).pipe(Qo())}));return(0,Le.of)(V).pipe(Qo())}(b,I.path,_),function jp(b,w,_){const A=w.routeConfig?w.routeConfig.canActivate:null;if(!A||0===A.length)return(0,Le.of)(!0);const I=A.map(V=>sn(()=>{const K=et(V,w,_);return ie(function ud(b){return b&&cr(b.canActivate)}(K)?K.canActivate(w,b):K(w,b)).pipe(Ei())}));return(0,Le.of)(I).pipe(Qo())}(b,I.route,_))),Ei(I=>!0!==I,!0))}(A,V,b,w):(0,Le.of)(re)),(0,pn.U)(re=>({..._,guardsResult:re})))})}(this.ngModule.injector,re=>this.triggerEvent(re)),(0,Wt.b)(re=>{if(I.guardsResult=re.guardsResult,ei(re.guardsResult))throw vr(0,re.guardsResult);const Ce=new nd(re.id,this.serializeUrl(re.extractedUrl),this.serializeUrl(re.urlAfterRedirects),re.targetSnapshot,!!re.guardsResult);this.triggerEvent(Ce)}),(0,xe.h)(re=>!!re.guardsResult||(this.restoreHistory(re),this.cancelNavigationTransition(re,"",3),!1)),Dl(re=>{if(re.guards.canActivateChecks.length)return(0,Le.of)(re).pipe((0,Wt.b)(Ce=>{const bt=new id(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(bt)}),(0,St.w)(Ce=>{let bt=!1;return(0,Le.of)(Ce).pipe(function ef(b,w){return(0,We.z)(_=>{const{targetSnapshot:A,guards:{canActivateChecks:I}}=_;if(!I.length)return(0,Le.of)(_);let V=0;return(0,Ge.D)(I).pipe((0,Nt.b)(K=>function Ua(b,w,_,A){const I=b.routeConfig,V=b._resolve;return void 0!==I?.title&&!zc(I)&&(V[oa]=I.title),function us(b,w,_,A){const I=function ds(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===I.length)return(0,Le.of)({});const V={};return(0,Ge.D)(I).pipe((0,We.z)(K=>function qr(b,w,_,A){const I=et(b,w,A);return ie(I.resolve?I.resolve(w,_):I(w,_))}(b[K],w,_,A).pipe(Ei(),(0,Wt.b)(re=>{V[K]=re}))),$i(1),(0,Jn.h)(V),(0,ii.K)(K=>ur(K)?Tt.E:(0,Qe._)(K)))}(V,b,w,A).pipe((0,pn.U)(K=>(b._resolvedData=K,b.data=fl(b,_).resolve,I&&zc(I)&&(b.data[oa]=I.title),null)))}(K.route,A,b,w)),(0,Wt.b)(()=>V++),$i(1),(0,We.z)(K=>V===I.length?(0,Le.of)(_):Tt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wt.b)({next:()=>bt=!0,complete:()=>{bt||(this.restoreHistory(Ce),this.cancelNavigationTransition(Ce,"",2))}}))}),(0,Wt.b)(Ce=>{const bt=new cl(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(bt)}))}),Dl(re=>{const Ce=bt=>{const Pn=[];bt.routeConfig?.loadComponent&&!bt.routeConfig._loadedComponent&&Pn.push(this.configLoader.loadComponent(bt.routeConfig).pipe((0,Wt.b)(zt=>{bt.component=zt}),(0,pn.U)(()=>{})));for(const zt of bt.children)Pn.push(...Ce(zt));return Pn};return mt(Ce(re.targetSnapshot.root)).pipe(_t(),(0,Mt.q)(1))}),Dl(()=>this.afterPreactivation()),(0,pn.U)(re=>{const Ce=function Ra(b,w,_){const A=Pa(b,w._root,_?_._root:void 0);return new Cc(A,w)}(this.routeReuseStrategy,re.targetSnapshot,re.currentRouterState);return I={...re,targetRouterState:Ce}}),(0,Wt.b)(re=>{this.currentUrlTree=re.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(re.urlAfterRedirects,re.rawUrl),this.routerState=re.targetRouterState,"deferred"===this.urlUpdateStrategy&&(re.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,re),this.browserUrlTree=re.urlAfterRedirects)}),((b,w,_)=>(0,pn.U)(A=>(new _o(w,A.targetRouterState,A.currentRouterState,_).activate(b),A)))(this.rootContexts,this.routeReuseStrategy,re=>this.triggerEvent(re)),(0,Wt.b)({next(){V=!0},complete(){V=!0}}),Ji(()=>{V||K||this.cancelNavigationTransition(I,"",1),this.currentNavigation?.id===I.id&&(this.currentNavigation=null)}),(0,ii.K)(re=>{if(K=!0,Jo(re)){od(re)||(this.navigated=!0,this.restoreHistory(I,!0));const Ce=new Js(I.id,this.serializeUrl(I.extractedUrl),re.message,re.cancellationCode);if(A.next(Ce),od(re)){const bt=this.urlHandlingStrategy.merge(re.url,this.rawUrlTree),Pn={skipLocationChange:I.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ca(I.source)};this.scheduleNavigation(bt,"imperative",null,Pn,{resolve:I.resolve,reject:I.reject,promise:I.promise})}else I.resolve(!1)}else{this.restoreHistory(I,!0);const Ce=new Qs(I.id,this.serializeUrl(I.extractedUrl),re,I.targetSnapshot??void 0);A.next(Ce);try{I.resolve(this.errorHandler(re))}catch(bt){I.reject(bt)}}return Tt.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const A="popstate"===_.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const I={replaceUrl:!0},V=_.state?.navigationId?_.state:null;if(V){const re={...V};delete re.navigationId,delete re.\u0275routerPageId,0!==Object.keys(re).length&&(I.state=re)}const K=this.parseUrl(_.url);this.scheduleNavigation(K,A,V,I)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(si),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,A={}){const{relativeTo:I,queryParams:V,fragment:K,queryParamsHandling:re,preserveFragment:Ce}=A,bt=I||this.routerState.root,Pn=Ce?this.currentUrlTree.fragment:K;let zt=null;switch(re){case"merge":zt={...this.currentUrlTree.queryParams,...V};break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=V||null}return null!==zt&&(zt=this.removeEmptyProps(zt)),go(bt,this.currentUrlTree,_,zt,Pn??null)}navigateByUrl(_,A={skipLocationChange:!1}){const I=ei(_)?_:this.parseUrl(_),V=this.urlHandlingStrategy.merge(I,this.rawUrlTree);return this.scheduleNavigation(V,"imperative",null,A)}navigate(_,A={skipLocationChange:!1}){return function cf(b){for(let w=0;w<b.length;w++){if(null==b[w])throw new L.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,A),A)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let A;try{A=this.urlSerializer.parse(_)}catch(I){A=this.malformedUriErrorHandler(I,this.urlSerializer,_)}return A}isActive(_,A){let I;if(I=!0===A?{...af}:!1===A?{...Vc}:A,ei(_))return gn(this.currentUrlTree,_,I);const V=this.parseUrl(_);return gn(this.currentUrlTree,V,I)}removeEmptyProps(_){return Object.keys(_).reduce((A,I)=>{const V=_[I];return null!=V&&(A[I]=V),A},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new as(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,A,I,V,K){if(this.disposed)return Promise.resolve(!1);let re,Ce,bt;K?(re=K.resolve,Ce=K.reject,bt=K.promise):bt=new Promise((oi,Lr)=>{re=oi,Ce=Lr});const Pn=++this.navigationId;let zt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(I=this.location.getState()),zt=I&&I.\u0275routerPageId?I.\u0275routerPageId:V.replaceUrl||V.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):zt=0,this.setTransition({id:Pn,targetPageId:zt,source:A,restoredState:I,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:V,resolve:re,reject:Ce,promise:bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bt.catch(oi=>Promise.reject(oi))}setBrowserUrl(_,A){const I=this.urlSerializer.serialize(_),V={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(I)||A.extras.replaceUrl?this.location.replaceState(I,"",V):this.location.go(I,"",V)}restoreHistory(_,A=!1){if("computed"===this.canceledNavigationResolution){const I=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===I?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===I&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(I)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,A,I){const V=new Js(_.id,this.serializeUrl(_.extractedUrl),A,I);this.triggerEvent(V),_.resolve(!1)}generateNgRouterState(_,A){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:A}:{navigationId:_}}}return b.\u0275fac=function(_){L.$Z()},b.\u0275prov=L.Yz7({token:b,factory:function(){return lf()},providedIn:"root"}),b})();function ca(b){return"imperative"!==b}class gd{}let Ls=(()=>{class b{constructor(_,A,I,V,K){this.router=_,this.injector=I,this.preloadingStrategy=V,this.loader=K}setUpPreloading(){this.subscription=this.router.events.pipe((0,xe.h)(_=>_ instanceof as),(0,Nt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,A){const I=[];for(const V of A){V.providers&&!V._injector&&(V._injector=(0,L.MMx)(V.providers,_,`Route: ${V.path}`));const K=V._injector??_,re=V._loadedInjector??K;V.loadChildren&&!V._loadedRoutes&&void 0===V.canLoad||V.loadComponent&&!V._loadedComponent?I.push(this.preloadConfig(K,V)):(V.children||V._loadedRoutes)&&I.push(this.processRoutes(re,V.children??V._loadedRoutes))}return(0,Ge.D)(I).pipe((0,Dr.J)())}preloadConfig(_,A){return this.preloadingStrategy.preload(A,()=>{let I;I=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(_,A):(0,Le.of)(null);const V=I.pipe((0,We.z)(K=>null===K?(0,Le.of)(void 0):(A._loadedRoutes=K.routes,A._loadedInjector=K.injector,this.processRoutes(K.injector??_,K.routes))));if(A.loadComponent&&!A._loadedComponent){const K=this.loader.loadComponent(A);return(0,Ge.D)([V,K]).pipe((0,Dr.J)())}return V})}}return b.\u0275fac=function(_){return new(_||b)(L.LFG(dr),L.LFG(L.Sil),L.LFG(L.lqb),L.LFG(gd),L.LFG(la))},b.\u0275prov=L.Yz7({token:b,factory:b.\u0275fac}),b})();const ua=new L.OlP("");let df=(()=>{class b{constructor(_,A,I={}){this.router=_,this.viewportScroller=A,this.options=I,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},I.scrollPositionRestoration=I.scrollPositionRestoration||"disabled",I.anchorScrolling=I.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof wr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof as&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof sd&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,A){this.router.triggerEvent(new sd(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(_){L.$Z()},b.\u0275prov=L.Yz7({token:b,factory:b.\u0275fac}),b})();const Qp=new L.OlP("ROUTER_FORROOT_GUARD"),hf=new L.OlP(""),gi=[_e.Ye,{provide:Qi,useClass:Tr},{provide:dr,useFactory:lf},gl,{provide:As,useFactory:function Hy(b){return b.routerState.root},deps:[dr]},la];function ff(){return new L.PXZ("Router",dr)}let za=(()=>{class b{constructor(_){}static forRoot(_,A){return{ngModule:b,providers:[gi,[],Xr(_),{provide:Qp,useFactory:Wc,deps:[[dr,new L.FiY,new L.tp0]]},{provide:Tl,useValue:A||{}},A?.useHash?{provide:_e.S$,useClass:_e.Do}:{provide:_e.S$,useClass:_e.b0},{provide:ua,useFactory:()=>{const b=(0,L.f3M)(dr),w=(0,L.f3M)(_e.EM),_=(0,L.f3M)(Tl);return _.scrollOffset&&w.setOffset(_.scrollOffset),new df(b,w,_)}},A?.preloadingStrategy?em(A.preloadingStrategy):[],{provide:L.PXZ,multi:!0,useFactory:ff},A?.initialNavigation?zn(A):[],[{provide:Ll,useFactory:Pr},{provide:L.tb,multi:!0,useExisting:Ll}]]}}static forChild(_){return{ngModule:b,providers:[Xr(_)]}}}return b.\u0275fac=function(_){return new(_||b)(L.LFG(Qp,8))},b.\u0275mod=L.oAB({type:b}),b.\u0275inj=L.cJS({}),b})();function Wc(b){return"guarded"}function Xr(b){return[{provide:aa,multi:!0,useValue:b}]}function Pr(){const b=(0,L.f3M)(L.zs3);return w=>{const _=b.get(L.z2F);if(w!==_.components[0])return;const A=b.get(dr),I=b.get(Ol);1===b.get(pf)&&A.initialNavigation(),b.get(hf,null,L.XFs.Optional)?.setUpPreloading(),b.get(ua,null,L.XFs.Optional)?.init(),A.resetRootComponentType(_.componentTypes[0]),I.next(),I.complete()}}const Ll=new L.OlP("");function zn(b){return["disabled"===b.initialNavigation?[{provide:L.ip1,multi:!0,useFactory:()=>{const b=(0,L.f3M)(dr);return()=>{b.setUpLocationChangeListener()}}},{provide:pf,useValue:2}]:[],"enabledBlocking"===b.initialNavigation?[{provide:pf,useValue:0},{provide:L.ip1,multi:!0,deps:[L.zs3],useFactory:b=>{const w=b.get(_e.V_,Promise.resolve(null));let _=!1;return()=>w.then(()=>new Promise(I=>{const V=b.get(dr),K=b.get(Ol);(function A(I){b.get(dr).events.pipe((0,xe.h)(K=>K instanceof as||K instanceof Js||K instanceof Qs),(0,pn.U)(K=>K instanceof as||K instanceof Js&&(0===K.code||1===K.code)&&null),(0,xe.h)(K=>null!==K),(0,Mt.q)(1)).subscribe(()=>{I()})})(()=>{I(!0),_=!0}),V.afterPreactivation=()=>(I(!0),_||K.closed?(0,Le.of)(void 0):K),V.initialNavigation()}))}}]:[]]}const Ol=new L.OlP("",{factory:()=>new me.x}),pf=new L.OlP("",{providedIn:"root",factory:()=>1});function em(b){return[Ls,{provide:hf,useExisting:Ls},{provide:gd,useExisting:b}]}}},Xt=>{Xt(Xt.s=6376)}]);